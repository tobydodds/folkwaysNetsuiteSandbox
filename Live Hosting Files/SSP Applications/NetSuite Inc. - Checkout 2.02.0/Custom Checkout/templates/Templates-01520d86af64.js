SC.templates = {"order_wizard_register_guest_module_tmpl":"<h3><%= _('Create an account (optional):').translate() %><\/h3>\n<form>\n\n\t<%= registerFormFields({view:view}) %>\n\t\n\t<p>\n\t\t<button type=\"submit\" class=\"btn btn-primary btn-large\">\n\t\t\t<%= _('Create Account').translate() %>\n\t\t<\/button>\n\t<\/p>\n<\/form>","macros":["<% registerMacro('message', function ( message, type, closable ) { %>\n<div class=\"alert <%= type ? 'alert-'+ type : '' %>\">\n\t<% if ( closable ) { %>\n\t\t<button class=\"close\" data-dismiss=\"alert\">&times;<\/button>\n\t<% } %>\n\t<% if ( _.isObject( message ) ) { %>\n\t\t<ul>\n\t\t<% _.each(message, function(item, index) { %>\n\t\t\t<li><%= item %><\/li>\n\t\t<% }) %>\n\t\t<ul>\n\t<% } else { %>\n\t\t<%= message %>\n\t<% } %>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('modal', function (page_header) { %>\n<div id=\"modal\" class=\"modal fade\">\n\t<div class=\"modal-dialog\">\n\t\t<div class=\"modal-content\">\n\t\t\t<div id=\"modal-header\" class=\"modal-header\">\n\t\t\t\t<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">\n\t\t\t\t\t&times;\n\t\t\t\t<\/button>\n\t\t\t\t<h3 class=\"modal-title\">\n\t\t\t\t\t<%= page_header || '&nbsp;' %>\n\t\t\t\t<\/h3>\n\t\t\t<\/div>\n\t\t\t<div id=\"modal-body\" class=\"modal-body\"><\/div>\n\t\t<\/div><!-- \/.modal-content -->\n\t<\/div><!-- \/.modal-dialog -->\n<\/div><!-- \/.modal -->\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('backToTop', function () { %>\n<div id=\"back-to-top\" class=\"text-center back-to-top\">\n\t<a href=\"#\" data-action=\"back-to-top\">\n\t\t<i class=\"icon-arrow-up\"><\/i>\n\t\t<%= _('Top').translate() %>\n\t<\/a>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('formatPaymentMethod', function (payment, creditCardIcons) {\n\t%><span class=\"payment-method-formatted payment-method-formatted-<%=payment.get('type')%>\"><%\n\tswitch (payment.get('type')){\n\t\tcase 'creditcard':\n\t\t\tvar creditcard = payment.get('creditcard');\n\t\t\tif(creditcard){\n\t\t\t\tvar ccpname = creditcard.paymentmethod ? creditcard.paymentmethod.name : ''; %> \n\t\t\t\t<b class=\"credit-card-icon\"> \n\t\t\t\t\t<% if(creditCardIcons && ccpname in creditCardIcons){ %>\n\t\t\t\t\t\t<img class=\"credit-card-icon\" src=\"<%= creditCardIcons[ccpname] %>\" alt=\"<%= ccpname %>\">\n\t\t\t\t\t<% }else{ %>\n\t\t\t\t\t\t<%= ccpname %>\t\n\t\t\t\t\t<% } %>\n\t\t\t\t\t<span>&nbsp;-&nbsp;<\/span>\n\t\t\t\t\t<%= _('Ending in $(0)').translate(creditcard.ccnumber.replace(\/\\*\/g, '')) %>\n\t\t\t\t<\/b>\n\t\t\t\t<br>\n\t\t\t\t<b class=\"credit-card-name\">\n\t\t\t\t\t<%= creditcard.ccname %>\n\t\t\t\t<\/b>\n\t\t\t\t<br>\n\t\t\t\t<span class=\"credit-card-expiredate\">\n\t\t\t\t\t<%= _('Expires ').translate() + creditcard.ccexpiredate %>\n\t\t\t\t<\/span>\n\t\t\t<% }\n\t\t\tbreak;\n\t\tcase 'giftcertificate':\n\t\t\tvar code_length = payment.get('giftcertificate').code.length; %>\t\t\t\t\t\n\t\t\t<%= _('Ending in: $(0)').translate(payment.get('giftcertificate').code.substring(code_length - 4, code_length)) %>\n\t\t\t<% break;\n\t\tcase 'invoice': %>\n\t\t\t<b class=\"payment-method-formatted-invoice-terms\">\n\t\t\t\t<%= _('Invoice: Terms $(0)').translate(payment.get('paymentterms').name) %>\n\t\t\t<\/b> \n\t\t\t<% if(payment.get('purchasenumber')) { %>\n\t\t\t\t<br\/> \n\t\t\t\t<span class=\"payment-method-formatted-invoice-purchasenumber\">\n\t\t\t\t\t<%= _('Purchase Number: $(0)').translate(payment.get('purchasenumber')) %>\n\t\t\t\t<\/span>\n\t\t\t<% }\n\t\t\tbreak;\n\t\tcase 'paypal': %>\n\t\t\t<b>\n\t\t\t\t<%= _('Payment via Paypal').translate() %>\n\t\t\t<\/b>\n\t\t\t<%\n\t\t\tbreak;\n\t\tdefault: %>\n\t\t<%= payment.get('type') %><%\n\t}\n\t%><\/span><%\n}) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('pagination', function (configuration) { %>\n<%\n\t\/\/ Pagination Macro\n\t\/\/ ================\n\t\/\/ Displays a pagination component based on the configuration object.\n\t\/\/ The configuration object understands the following keys: \n\t\/\/ * currentPage: (Required) The page you are currently showing.\n\t\/\/ * totalPages: (Required) The total amount of pages you can show (This is not items, you need to do the math of items\/items_per_page outside this macro).\n\t\/\/ * pager: (Required) a function that recives a page number as parameter and returns the url that the mentioned page number should point to.\n\t\/\/ * showPageList: a boolean to show or hide the pages list portion of this component, defauts to true.\n\t\/\/ * pagesToShow: The amount of pages you want to be displayed in the pages list, defaults to 4.\n\t\/\/ * showPageIndicator: a boolean to show or hide a note on which page you have selected and how many pages are there, defaults to false\n\t\/\/ * extraClass: a string that will be added to the class attribute to the component\n\n\n\tvar current_page = parseInt(configuration.currentPage, 10)\n\t,\ttotal_pages = parseInt(configuration.totalPages, 10)\n\t,\tpager = configuration.pager\n\t,\tpages_to_show = parseInt(configuration.pagesToShow, 10) || 4\n\t,\trange_start = 1\n\t,\trange_end = total_pages\n\t,\tpadding_left = (pages_to_show % 2 === 0) ? (pages_to_show \/ 2) - 1 : parseInt(pages_to_show \/ 2, 10) \/\/ ;)\n\t,\tshow_page_list = (_.isBoolean(configuration.showPageList)) ? configuration.showPageList : true\n\t,\tshow_page_indicator = configuration.showPageIndicator || false; \n\n\t\n\tif (show_page_list && pages_to_show < total_pages)\n\t{\n\t\t\/\/ if we are getting closer to the end we need to compute from the end to the begingn \n\t\tif (pages_to_show - padding_left > total_pages - current_page)\n\t\t{\n\t\t\trange_start = total_pages + 1 - pages_to_show;\n\t\t\trange_end = total_pages + 1;\n\t\t}\n\t\telse\n\t\t{\n\t\t\trange_start = current_page - padding_left < 1 ? 1 : current_page - padding_left;\n\t\t\trange_end = range_start + pages_to_show > total_pages ? total_pages : range_start + pages_to_show;\n\t\t}\n\t}\n\telse if (show_page_list)\n\t{\n\t\trange_end = total_pages + 1;\n\t}\n\tvar pages = _.range(range_start, range_end);\n%>\n\n<% if (total_pages >= current_page && current_page > 0 && pages.length > 1) { %>\n<div class=\"pagination <%= configuration.extraClass || '' %>\">\n\n\t<% if (show_page_indicator) { %>\n\t\t<ul class=\"pagination-page-indicator\">\n\t\t\t<li>\n\t\t\t\t<span class=\"\">\n\t\t\t\t\t<%= _('$(0) of $(1)').translate(current_page, total_pages) %>\n\t\t\t\t<\/span>\n\t\t\t<\/li>\n\t\t<\/ul>\n\t\t\n\t<% } %>\n\n\t<ul class=\"pagination-links <% if (!show_page_list) { %>pagination-links-compact<% } %>\">\n\t<% if (current_page !== 1) { %>\n\t\t<li>\n\t\t\t<a rel=\"prev\" href=\"<%- _(pager(current_page-1)).fixUrl() %>\">\n\t\t\t\t&laquo;\n\t\t\t\t<span class=\"hidden\"><%= _('Previous').translate() %><\/span>\n\t\t\t<\/a>\n\t\t<\/li>\n\t<% } else { %>\n\t\t<li class=\"disabled\">\n\t\t\t<a href=\"<%- _(pager(current_page)).fixUrl() %>\">\n\t\t\t\t&laquo;\n\t\t\t\t<span class=\"hidden\"><%= _('Previous').translate() %><\/span>\n\t\t\t<\/a>\n\t\t<\/li>\n\t<% } %>\n\t\n\t<% if (show_page_list) { %>\n\t\t<% if (range_start > 1) { %>\n\t\t\t<li class=\"disabled\">\n\t\t\t\t<a href=\"<%- _(pager(current_page)).fixUrl() %>\">\n\t\t\t\t\t<span>...<\/span>\n\t\t\t\t<\/a>\n\t\t\t<\/li>\t\n\t\t<% } %>\n\n\t\t<% _.each(pages, function (page) { %>\n\t\t\t<% if (current_page !== page) { %>\n\t\t\t\t<li><a href=\"<%- pager(page) %>\"><%= page %><\/a><\/li>\n\t\t\t<% } else { %>\n\t\t\t\t<li class=\"active\"><a href=\"<%- _(pager(page)).fixUrl() %>\"><%= page %><\/a><\/li>\n\t\t\t<% } %>\n\t\t<% }) %>\n\n\t\t<% if (range_end < total_pages) { %>\n\t\t\t<li class=\"disabled\">\n\t\t\t\t<a href=\"<%- _(pager(current_page)).fixUrl() %>\">\n\t\t\t\t\t<span>...<\/span>\n\t\t\t\t<\/a>\n\t\t\t<\/li>\t\n\t\t<% } %>\n\t<% } %>\n\n\t<% if (current_page !== total_pages){ %>\n\t\t<li>\n\t\t\t<a rel=\"next\" href=\"<%- _(pager(current_page+1)).fixUrl() %>\">\n\t\t\t\t<span class=\"hidden\"><%= _('Next').translate() %><\/span>\n\t\t\t\t&raquo;\n\t\t\t<\/a>\n\t\t<\/li>\n\t<% } else { %>\n\t\t<li class=\"disabled\">\n\t\t\t<a href=\"<%- _(pager(current_page)).fixUrl() %>\">\n\t\t\t\t<span class=\"hidden\"><%= _('Next').translate() %><\/span>\n\t\t\t\t&raquo;\n\t\t\t<\/a>\n\t\t<\/li>\n\t<% } %>\n\t<\/ul>\n<\/div>\n<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('breadcrumb', function(pages) { %>\n<% pages = _.isUndefined(pages) || _.isArray(pages) ? pages : [pages]; %>\n<div id=\"banner-breadcrumb-top\" class=\"content-banner banner-breadcrumb-top\"><\/div>\n<ul itemprop=\"breadcrumb\" class=\"breadcrumb\">\n<% _.each(pages, function(link, index) { %>\n\t<% if (link) { %>\n\t\t<% if (index < pages.length - 1) { %>\n\t\t\t<li>\n\t\t\t\t<a <%= _.objectToAtrributes(link) %>><%= link.text %><\/a>\n\t\t\t\t<span class=\"divider\">\/<\/span>\n\t\t\t<\/li>\n\t\t<% } else { %>\n\t\t\t<li class=\"active\"><%= link.text %><\/li>\n\t\t<% } %>\n\t<% } %>\n<% }) %>\n<\/ul>\n<div id=\"banner-breadcrumb-bottom\" class=\"content-banner banner-breadcrumb-bottom\"><\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('currencySelector', function (currencies, selected_code) { %>\n<% if (currencies && currencies.length > 1) { %>\n<div class=\"input-prepend\">\n\t<span class=\"add-on\"><%= SC.ENVIRONMENT.siteSettings.shopperCurrency.symbol %><\/span>\n\t<select data-toggle=\"currency-selector\" class=\"input-medium\">\n\t<% _.each(currencies, function (currency) { %>\n\t\t<option value=\"<%- currency.code %>\" <%= selected_code === currency.code ? 'selected' : '' %>>\n\t\t\t<%= currency.title || currency.name %>\n\t\t<\/option>\n\t<% }) %>\n\t<\/select>\n<\/div>\n<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('showItemPrice', function (item) { %>\n<% var price = item.getPrice(); %>\n<% if (price.min && price.max) { %>\n\t<!-- Price Range -->\n\t<strong class=\"lead-price\">\n\t\t<%= _('$(0) to $(1)').translate(_.formatCurrency(price.min.price), _.formatCurrency(price.max.price)) %>\n\t<\/strong>\n\t<meta itemprop=\"lowPrice\" content=\"<%- _.formatCurrency(price.min.price)%>\" \/>\n\t<meta itemprop=\"highPrice\" content=\"<%- _.formatCurrency(price.max.price)%>\" \/>   \n\t<meta itemprop=\"priceCurrency\" content=\"<%- SC.ENVIRONMENT.currentCurrency.code %>\" \/>     \n\t<% if (price.max.price < price.compare_price) { %>\n\t\t<small class=\"muted crossed\"><%= _.formatCurrency(price.compare_price) %><\/small>\n\t<% } %>\n<% } else { %>\n\t<!-- Single -->\n\t<strong class=\"lead-price\">\n\t\t<%= _.formatCurrency(price.price) %>\n\t<\/strong>\n\t<meta itemprop=\"price\" content=\"<%- _.formatCurrency(price.price)%>\" \/> \n\t<meta itemprop=\"priceCurrency\" content=\"<%- SC.ENVIRONMENT.currentCurrency.code %>\" \/> \n\t<% if (price.price < price.compare_price) { %>\n\t\t<small class=\"muted crossed\"><%= _.formatCurrency(price.compare_price) %><\/small>\n\t<% } %>\n<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('countriesDropdown', function (countries, selected_country, manage) { %>\n<select class=\"input-xlarge\" id=\"<%= manage ? manage : ''%>country\" name=\"country\" data-type=\"country\">\n\t<option value=\"\">\n\t\t<%= _('-- Select --').translate() %>\n\t<\/option>\n\t<% _.each(_.values(countries), function (country, index) { %>\n\t\t<option value=\"<%- country.code %>\" <%= country.code === selected_country ? 'selected' : '' %>>\n\t\t\t<%= country.name %>\n\t\t<\/option>\n\t<% }) %>\n<\/select>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('displayInRows', function(items, macro, items_per_row) { %>\n\t<% items_per_row = parseInt(items_per_row, 10) || 3 %>\n\t<% var span = 12 \/ items_per_row %>\n\t<div class=\"row-fluid\">\n\t<% _.each(items, function (item, index){ %>\n\t\t<% if ((index % items_per_row) == 0 && index > 0){ %>\n\t\t\t<\/div>\n\t\t\t<div class=\"row-fluid\">\n\t\t<% } %>\n\t\t<div class=\"span<%= span %>\">\n\t\t\t<% if (_.isFunction(macro)){ %>\n\t\t\t\t<%= macro(item) %>\n\t\t\t<% }else{ %>\n\t\t\t\t<%= item %>\n\t\t\t<% } %>\n\t\t<\/div>\n\t<% }) %>\n\t<\/div>\n<%})%>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('languageSelector', function (languages, selected_locale) { %>\n<% if (languages && languages.length > 1) { %>\n<div class=\"input-prepend\">\n\t<span class=\"add-on\">\n\t\t<i class=\"icon-globe\"><\/i>\n\t<\/span>\n\t<select data-toggle=\"lenguage-selector\" class=\"input-medium\">\n\t<% _.each(languages, function(language) { %>\n\t\t<option value=\"<%- language.locale %>\" <%= language.locale === selected_locale ? 'selected' : '' %>>\n\t\t\t<%= language.title || language.name %>\n\t\t<\/option>\n\t<%})%>\n\t<\/select>\n<\/div>\n<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('hostSelector', function (hosts, current_host) { %>\n<% if (hosts && hosts.length > 1) { %>\n<div class=\"input-prepend\">\n\t<span class=\"add-on\">\n\t\t<i class=\"icon-globe\"><\/i>\n\t<\/span>\n\t<select data-toggle=\"host-selector\" class=\"input-medium\">\n\t<% _.each(hosts, function(host) { %>\n\t\t<% if (host.languages && host.languages.length) { %>\n\t\t\t<optgroup label=\"<%- host.title %>\">\n\t\t\t<% _.each(host.languages, function(language) { %>\n\t\t\t\t<option value=\"<%- language.host %>\" <%= language.host === current_host ? 'selected' : '' %>>\n\t\t\t\t\t<%= language.title || language.name %>\n\t\t\t\t<\/option>\n\t\t\t<%})%>\n\t\t\t<\/optgroup>\n\t\t<% } %>\n\t<% }) %>\n\t<\/select>\n<\/div>\n<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('relatedItem', function (item, application) { %>\n<div class=\"item-cell item-cell-grid\">\n\t<a class=\"thumbnail\" href=\"<%= item.get('_url') %>\">\n\t\t<% var thumbnail = item.get('_thumbnail'); %>\n\t\t<img src=\"<%= application.resizeImage(thumbnail.url, 'thumbnail') %>\" alt=\"<%= thumbnail.altimagetext %>\">\n\t<\/a>\n\t<h5>\n\t\t<a href=\"<%= item.get('_url') %>\">\n\t\t\t<%= item.get('_name') %>\n\t\t<\/a>\n\t<\/h5>\n\t<a class=\"btn btn-small btn-primary\" href=\"<%= item.get('_url') %>\">\n\t\t<%= _('See more').translate() %>\n\t<\/a>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('statesDropdown', function (options) { %>\n<%\n\tvar country = options.selectedCountry && options.countries[options.selectedCountry]\n\t,\tstates = country && country.states;\n%>\n<% if (country && states) { %>\n\t<label class=\"control-label\" for=\"<%= options.manage ? options.manage : ''%>state\">\n\t\t<%= _('State').translate() %>\n\t\t<small><%= _('(required)').translate() %><\/small>\n\t<\/label>\n\t<div class=\"controls\">\n\t\t<select class=\"input-xlarge\" id=\"<%= options.manage ? options.manage : ''%>state\" name=\"state\" data-type=\"state\">\n\t\t\t<option value=\"\">\n\t\t\t\t<%= _('-- Select --').translate() %>\n\t\t\t<\/option>\n\t\t\t<% _.each(states, function (state) { %>\n\t\t\t<option value=\"<%- state.code %>\" <%= state.code === options.selectedState ? 'selected' : '' %>>\n\t\t\t\t<%= state.name %>\n\t\t\t<\/option>\n\t\t\t<% }) %>\n\t\t<\/select>\n\t<\/div>\n<% } else { %>\n\t<label class=\"control-label\" for=\"<%= options.manage ? options.manage : ''%>state\">\n\t\t<%= _('State\/Province\/Region').translate() %>\n\t<\/label>\n\t<div class=\"controls\">\n\t\t<input\n\t\t\ttype=\"text\"\n\t\t\tid=\"<%= options.manage ? options.manage : ''%>state\"\n\t\t\tname=\"state\"\n\t\t\tclass=\"input-xlarge\"\n\t\t\tvalue=\"<%- options.selectedState %>\"\n\t\t\tdata-type=\"state\"\n\t\t\tplaceholder=\"<%- _('(optional)').translate() %>\"\n\t\t>\n\t<\/div>\n<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('message', function ( message, type, closable ) { %>\n<div class=\"alert <%= type ? 'alert-'+ type : '' %>\">\n\t<% if ( closable ) { %>\n\t\t<button class=\"close\" data-dismiss=\"alert\">&times;<\/button>\n\t<% } %>\n\t<% if ( _.isObject( message ) ) { %>\n\t\t<ul>\n\t\t<% _.each(message, function(item, index) { %>\n\t\t\t<li><%= item %><\/li>\n\t\t<% }) %>\n\t\t<ul>\n\t<% } else { %>\n\t\t<%= message %>\n\t<% } %>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('modal', function (page_header) { %>\n<div id=\"modal\" class=\"modal fade\">\n\t<div class=\"modal-dialog\">\n\t\t<div class=\"modal-content\">\n\t\t\t<div id=\"modal-header\" class=\"modal-header\">\n\t\t\t\t<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">\n\t\t\t\t\t&times;\n\t\t\t\t<\/button>\n\t\t\t\t<h3 class=\"modal-title\">\n\t\t\t\t\t<%= page_header || '&nbsp;' %>\n\t\t\t\t<\/h3>\n\t\t\t<\/div>\n\t\t\t<div id=\"modal-body\" class=\"modal-body\"><\/div>\n\t\t<\/div><!-- \/.modal-content -->\n\t<\/div><!-- \/.modal-dialog -->\n<\/div><!-- \/.modal -->\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('backToTop', function () { %>\n<div id=\"back-to-top\" class=\"text-center back-to-top\">\n\t<a href=\"#\" data-action=\"back-to-top\">\n\t\t<i class=\"icon-arrow-up\"><\/i>\n\t\t<%= _('Top').translate() %>\n\t<\/a>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('formatPaymentMethod', function (payment, creditCardIcons) {\n\t%><span class=\"payment-method-formatted payment-method-formatted-<%=payment.get('type')%>\"><%\n\tswitch (payment.get('type')){\n\t\tcase 'creditcard':\n\t\t\tvar creditcard = payment.get('creditcard');\n\t\t\tif(creditcard){\n\t\t\t\tvar ccpname = creditcard.paymentmethod ? creditcard.paymentmethod.name : ''; %> \n\t\t\t\t<b class=\"credit-card-icon\"> \n\t\t\t\t\t<% if(creditCardIcons && ccpname in creditCardIcons){ %>\n\t\t\t\t\t\t<img class=\"credit-card-icon\" src=\"<%= creditCardIcons[ccpname] %>\" alt=\"<%= ccpname %>\">\n\t\t\t\t\t<% }else{ %>\n\t\t\t\t\t\t<%= ccpname %>\t\n\t\t\t\t\t<% } %>\n\t\t\t\t\t<span>&nbsp;-&nbsp;<\/span>\n\t\t\t\t\t<%= _('Ending in $(0)').translate(creditcard.ccnumber.replace(\/\\*\/g, '')) %>\n\t\t\t\t<\/b>\n\t\t\t\t<br>\n\t\t\t\t<b class=\"credit-card-name\">\n\t\t\t\t\t<%= creditcard.ccname %>\n\t\t\t\t<\/b>\n\t\t\t\t<br>\n\t\t\t\t<span class=\"credit-card-expiredate\">\n\t\t\t\t\t<%= _('Expires ').translate() + creditcard.ccexpiredate %>\n\t\t\t\t<\/span>\n\t\t\t<% }\n\t\t\tbreak;\n\t\tcase 'giftcertificate':\n\t\t\tvar code_length = payment.get('giftcertificate').code.length; %>\t\t\t\t\t\n\t\t\t<%= _('Ending in: $(0)').translate(payment.get('giftcertificate').code.substring(code_length - 4, code_length)) %>\n\t\t\t<% break;\n\t\tcase 'invoice': %>\n\t\t\t<b class=\"payment-method-formatted-invoice-terms\">\n\t\t\t\t<%= _('Invoice: Terms $(0)').translate(payment.get('paymentterms').name) %>\n\t\t\t<\/b> \n\t\t\t<% if(payment.get('purchasenumber')) { %>\n\t\t\t\t<br\/> \n\t\t\t\t<span class=\"payment-method-formatted-invoice-purchasenumber\">\n\t\t\t\t\t<%= _('Purchase Number: $(0)').translate(payment.get('purchasenumber')) %>\n\t\t\t\t<\/span>\n\t\t\t<% }\n\t\t\tbreak;\n\t\tcase 'paypal': %>\n\t\t\t<b>\n\t\t\t\t<%= _('Payment via Paypal').translate() %>\n\t\t\t<\/b>\n\t\t\t<%\n\t\t\tbreak;\n\t\tdefault: %>\n\t\t<%= payment.get('type') %><%\n\t}\n\t%><\/span><%\n}) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('breadcrumb', function(pages) { %>\n<% pages = _.isUndefined(pages) || _.isArray(pages) ? pages : [pages]; %>\n<div id=\"banner-breadcrumb-top\" class=\"content-banner banner-breadcrumb-top\"><\/div>\n<ul itemprop=\"breadcrumb\" class=\"breadcrumb\">\n<% _.each(pages, function(link, index) { %>\n\t<% if (link) { %>\n\t\t<% if (index < pages.length - 1) { %>\n\t\t\t<li>\n\t\t\t\t<a <%= _.objectToAtrributes(link) %>><%= link.text %><\/a>\n\t\t\t\t<span class=\"divider\">\/<\/span>\n\t\t\t<\/li>\n\t\t<% } else { %>\n\t\t\t<li class=\"active\"><%= link.text %><\/li>\n\t\t<% } %>\n\t<% } %>\n<% }) %>\n<\/ul>\n<div id=\"banner-breadcrumb-bottom\" class=\"content-banner banner-breadcrumb-bottom\"><\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('pagination', function (configuration) { %>\n<%\n\t\/\/ Pagination Macro\n\t\/\/ ================\n\t\/\/ Displays a pagination component based on the configuration object.\n\t\/\/ The configuration object understands the following keys: \n\t\/\/ * currentPage: (Required) The page you are currently showing.\n\t\/\/ * totalPages: (Required) The total amount of pages you can show (This is not items, you need to do the math of items\/items_per_page outside this macro).\n\t\/\/ * pager: (Required) a function that recives a page number as parameter and returns the url that the mentioned page number should point to.\n\t\/\/ * showPageList: a boolean to show or hide the pages list portion of this component, defauts to true.\n\t\/\/ * pagesToShow: The amount of pages you want to be displayed in the pages list, defaults to 4.\n\t\/\/ * showPageIndicator: a boolean to show or hide a note on which page you have selected and how many pages are there, defaults to false\n\t\/\/ * extraClass: a string that will be added to the class attribute to the component\n\n\n\tvar current_page = parseInt(configuration.currentPage, 10)\n\t,\ttotal_pages = parseInt(configuration.totalPages, 10)\n\t,\tpager = configuration.pager\n\t,\tpages_to_show = parseInt(configuration.pagesToShow, 10) || 4\n\t,\trange_start = 1\n\t,\trange_end = total_pages\n\t,\tpadding_left = (pages_to_show % 2 === 0) ? (pages_to_show \/ 2) - 1 : parseInt(pages_to_show \/ 2, 10) \/\/ ;)\n\t,\tshow_page_list = (_.isBoolean(configuration.showPageList)) ? configuration.showPageList : true\n\t,\tshow_page_indicator = configuration.showPageIndicator || false; \n\n\t\n\tif (show_page_list && pages_to_show < total_pages)\n\t{\n\t\t\/\/ if we are getting closer to the end we need to compute from the end to the begingn \n\t\tif (pages_to_show - padding_left > total_pages - current_page)\n\t\t{\n\t\t\trange_start = total_pages + 1 - pages_to_show;\n\t\t\trange_end = total_pages + 1;\n\t\t}\n\t\telse\n\t\t{\n\t\t\trange_start = current_page - padding_left < 1 ? 1 : current_page - padding_left;\n\t\t\trange_end = range_start + pages_to_show > total_pages ? total_pages : range_start + pages_to_show;\n\t\t}\n\t}\n\telse if (show_page_list)\n\t{\n\t\trange_end = total_pages + 1;\n\t}\n\tvar pages = _.range(range_start, range_end);\n%>\n\n<% if (total_pages >= current_page && current_page > 0 && pages.length > 1) { %>\n<div class=\"pagination <%= configuration.extraClass || '' %>\">\n\n\t<% if (show_page_indicator) { %>\n\t\t<ul class=\"pagination-page-indicator\">\n\t\t\t<li>\n\t\t\t\t<span class=\"\">\n\t\t\t\t\t<%= _('$(0) of $(1)').translate(current_page, total_pages) %>\n\t\t\t\t<\/span>\n\t\t\t<\/li>\n\t\t<\/ul>\n\t\t\n\t<% } %>\n\n\t<ul class=\"pagination-links <% if (!show_page_list) { %>pagination-links-compact<% } %>\">\n\t<% if (current_page !== 1) { %>\n\t\t<li>\n\t\t\t<a rel=\"prev\" href=\"<%- _(pager(current_page-1)).fixUrl() %>\">\n\t\t\t\t&laquo;\n\t\t\t\t<span class=\"hidden\"><%= _('Previous').translate() %><\/span>\n\t\t\t<\/a>\n\t\t<\/li>\n\t<% } else { %>\n\t\t<li class=\"disabled\">\n\t\t\t<a href=\"<%- _(pager(current_page)).fixUrl() %>\">\n\t\t\t\t&laquo;\n\t\t\t\t<span class=\"hidden\"><%= _('Previous').translate() %><\/span>\n\t\t\t<\/a>\n\t\t<\/li>\n\t<% } %>\n\t\n\t<% if (show_page_list) { %>\n\t\t<% if (range_start > 1) { %>\n\t\t\t<li class=\"disabled\">\n\t\t\t\t<a href=\"<%- _(pager(current_page)).fixUrl() %>\">\n\t\t\t\t\t<span>...<\/span>\n\t\t\t\t<\/a>\n\t\t\t<\/li>\t\n\t\t<% } %>\n\n\t\t<% _.each(pages, function (page) { %>\n\t\t\t<% if (current_page !== page) { %>\n\t\t\t\t<li><a href=\"<%- pager(page) %>\"><%= page %><\/a><\/li>\n\t\t\t<% } else { %>\n\t\t\t\t<li class=\"active\"><a href=\"<%- _(pager(page)).fixUrl() %>\"><%= page %><\/a><\/li>\n\t\t\t<% } %>\n\t\t<% }) %>\n\n\t\t<% if (range_end < total_pages) { %>\n\t\t\t<li class=\"disabled\">\n\t\t\t\t<a href=\"<%- _(pager(current_page)).fixUrl() %>\">\n\t\t\t\t\t<span>...<\/span>\n\t\t\t\t<\/a>\n\t\t\t<\/li>\t\n\t\t<% } %>\n\t<% } %>\n\n\t<% if (current_page !== total_pages){ %>\n\t\t<li>\n\t\t\t<a rel=\"next\" href=\"<%- _(pager(current_page+1)).fixUrl() %>\">\n\t\t\t\t<span class=\"hidden\"><%= _('Next').translate() %><\/span>\n\t\t\t\t&raquo;\n\t\t\t<\/a>\n\t\t<\/li>\n\t<% } else { %>\n\t\t<li class=\"disabled\">\n\t\t\t<a href=\"<%- _(pager(current_page)).fixUrl() %>\">\n\t\t\t\t<span class=\"hidden\"><%= _('Next').translate() %><\/span>\n\t\t\t\t&raquo;\n\t\t\t<\/a>\n\t\t<\/li>\n\t<% } %>\n\t<\/ul>\n<\/div>\n<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('currencySelector', function (currencies, selected_code) { %>\n<% if (currencies && currencies.length > 1) { %>\n<div class=\"input-prepend\">\n\t<span class=\"add-on\"><%= SC.ENVIRONMENT.siteSettings.shopperCurrency.symbol %><\/span>\n\t<select data-toggle=\"currency-selector\" class=\"input-medium\">\n\t<% _.each(currencies, function (currency) { %>\n\t\t<option value=\"<%- currency.code %>\" <%= selected_code === currency.code ? 'selected' : '' %>>\n\t\t\t<%= currency.title || currency.name %>\n\t\t<\/option>\n\t<% }) %>\n\t<\/select>\n<\/div>\n<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('showItemPrice', function (item) { %>\n<% var price = item.getPrice(); %>\n<% if (price.min && price.max) { %>\n\t<!-- Price Range -->\n\t<strong class=\"lead-price\">\n\t\t<%= _('$(0) to $(1)').translate(_.formatCurrency(price.min.price), _.formatCurrency(price.max.price)) %>\n\t<\/strong>\n\t<meta itemprop=\"lowPrice\" content=\"<%- _.formatCurrency(price.min.price)%>\" \/>\n\t<meta itemprop=\"highPrice\" content=\"<%- _.formatCurrency(price.max.price)%>\" \/>   \n\t<meta itemprop=\"priceCurrency\" content=\"<%- SC.ENVIRONMENT.currentCurrency.code %>\" \/>     \n\t<% if (price.max.price < price.compare_price) { %>\n\t\t<small class=\"muted crossed\"><%= _.formatCurrency(price.compare_price) %><\/small>\n\t<% } %>\n<% } else { %>\n\t<!-- Single -->\n\t<strong class=\"lead-price\">\n\t\t<%= _.formatCurrency(price.price) %>\n\t<\/strong>\n\t<meta itemprop=\"price\" content=\"<%- _.formatCurrency(price.price)%>\" \/> \n\t<meta itemprop=\"priceCurrency\" content=\"<%- SC.ENVIRONMENT.currentCurrency.code %>\" \/> \n\t<% if (price.price < price.compare_price) { %>\n\t\t<small class=\"muted crossed\"><%= _.formatCurrency(price.compare_price) %><\/small>\n\t<% } %>\n<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('countriesDropdown', function (countries, selected_country, manage) { %>\n<select class=\"input-xlarge\" id=\"<%= manage ? manage : ''%>country\" name=\"country\" data-type=\"country\">\n\t<option value=\"\">\n\t\t<%= _('-- Select --').translate() %>\n\t<\/option>\n\t<% _.each(_.values(countries), function (country, index) { %>\n\t\t<option value=\"<%- country.code %>\" <%= country.code === selected_country ? 'selected' : '' %>>\n\t\t\t<%= country.name %>\n\t\t<\/option>\n\t<% }) %>\n<\/select>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('displayInRows', function(items, macro, items_per_row) { %>\n\t<% items_per_row = parseInt(items_per_row, 10) || 3 %>\n\t<% var span = 12 \/ items_per_row %>\n\t<div class=\"row-fluid\">\n\t<% _.each(items, function (item, index){ %>\n\t\t<% if ((index % items_per_row) == 0 && index > 0){ %>\n\t\t\t<\/div>\n\t\t\t<div class=\"row-fluid\">\n\t\t<% } %>\n\t\t<div class=\"span<%= span %>\">\n\t\t\t<% if (_.isFunction(macro)){ %>\n\t\t\t\t<%= macro(item) %>\n\t\t\t<% }else{ %>\n\t\t\t\t<%= item %>\n\t\t\t<% } %>\n\t\t<\/div>\n\t<% }) %>\n\t<\/div>\n<%})%>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('languageSelector', function (languages, selected_locale) { %>\n<% if (languages && languages.length > 1) { %>\n<div class=\"input-prepend\">\n\t<span class=\"add-on\">\n\t\t<i class=\"icon-globe\"><\/i>\n\t<\/span>\n\t<select data-toggle=\"lenguage-selector\" class=\"input-medium\">\n\t<% _.each(languages, function(language) { %>\n\t\t<option value=\"<%- language.locale %>\" <%= language.locale === selected_locale ? 'selected' : '' %>>\n\t\t\t<%= language.title || language.name %>\n\t\t<\/option>\n\t<%})%>\n\t<\/select>\n<\/div>\n<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('hostSelector', function (hosts, current_host) { %>\n<% if (hosts && hosts.length > 1) { %>\n<div class=\"input-prepend\">\n\t<span class=\"add-on\">\n\t\t<i class=\"icon-globe\"><\/i>\n\t<\/span>\n\t<select data-toggle=\"host-selector\" class=\"input-medium\">\n\t<% _.each(hosts, function(host) { %>\n\t\t<% if (host.languages && host.languages.length) { %>\n\t\t\t<optgroup label=\"<%- host.title %>\">\n\t\t\t<% _.each(host.languages, function(language) { %>\n\t\t\t\t<option value=\"<%- language.host %>\" <%= language.host === current_host ? 'selected' : '' %>>\n\t\t\t\t\t<%= language.title || language.name %>\n\t\t\t\t<\/option>\n\t\t\t<%})%>\n\t\t\t<\/optgroup>\n\t\t<% } %>\n\t<% }) %>\n\t<\/select>\n<\/div>\n<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('relatedItem', function (item, application) { %>\n<div class=\"item-cell item-cell-grid\">\n\t<a class=\"thumbnail\" href=\"<%= item.get('_url') %>\">\n\t\t<% var thumbnail = item.get('_thumbnail'); %>\n\t\t<img src=\"<%= application.resizeImage(thumbnail.url, 'thumbnail') %>\" alt=\"<%= thumbnail.altimagetext %>\">\n\t<\/a>\n\t<h5>\n\t\t<a href=\"<%= item.get('_url') %>\">\n\t\t\t<%= item.get('_name') %>\n\t\t<\/a>\n\t<\/h5>\n\t<a class=\"btn btn-small btn-primary\" href=\"<%= item.get('_url') %>\">\n\t\t<%= _('See more').translate() %>\n\t<\/a>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('statesDropdown', function (options) { %>\n<%\n\tvar country = options.selectedCountry && options.countries[options.selectedCountry]\n\t,\tstates = country && country.states;\n%>\n<% if (country && states) { %>\n\t<label class=\"control-label\" for=\"<%= options.manage ? options.manage : ''%>state\">\n\t\t<%= _('State').translate() %>\n\t\t<small><%= _('(required)').translate() %><\/small>\n\t<\/label>\n\t<div class=\"controls\">\n\t\t<select class=\"input-xlarge\" id=\"<%= options.manage ? options.manage : ''%>state\" name=\"state\" data-type=\"state\">\n\t\t\t<option value=\"\">\n\t\t\t\t<%= _('-- Select --').translate() %>\n\t\t\t<\/option>\n\t\t\t<% _.each(states, function (state) { %>\n\t\t\t<option value=\"<%- state.code %>\" <%= state.code === options.selectedState ? 'selected' : '' %>>\n\t\t\t\t<%= state.name %>\n\t\t\t<\/option>\n\t\t\t<% }) %>\n\t\t<\/select>\n\t<\/div>\n<% } else { %>\n\t<label class=\"control-label\" for=\"<%= options.manage ? options.manage : ''%>state\">\n\t\t<%= _('State\/Province\/Region').translate() %>\n\t<\/label>\n\t<div class=\"controls\">\n\t\t<input\n\t\t\ttype=\"text\"\n\t\t\tid=\"<%= options.manage ? options.manage : ''%>state\"\n\t\t\tname=\"state\"\n\t\t\tclass=\"input-xlarge\"\n\t\t\tvalue=\"<%- options.selectedState %>\"\n\t\t\tdata-type=\"state\"\n\t\t\tplaceholder=\"<%- _('(optional)').translate() %>\"\n\t\t>\n\t<\/div>\n<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('headerProfile', function (Profile) { %>\n<% if (Profile.get('isLoggedIn') === 'T' &&  Profile.get('isGuest') === 'F') { %>\n\t<li class=\"welcome\"><a><%= _('Welcome $(0)').translate(Profile.get('firstname') || Profile.get('companyname'))  %><\/a><\/li>\n\t<li id=\"my-account-container\" class=\"dropdown my-account-container\">\n\t\t<a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\">\n\t\t\t<span class=\"my-account-title\"><%= _('Your Account').translate() %><\/span>\n\t\t\t<b class=\"caret\"><\/b>\n\t\t<\/a>\n\t\t<ul class=\"dropdown-menu\">\n\t\t\t<li class=\"my-account-item-cell\">\n\t\t\t\t<a href=\"#\" data-touchpoint=\"customercenter\" data-hashtag=\"#\">\n\t\t\t\t\t<%= _('Overview').translate() %>\n\t\t\t\t<\/a>\n\t\t\t<\/li>\n\t\t\t<li class=\"my-account-item-cell\">\n\t\t\t\t<a href=\"#\" data-touchpoint=\"customercenter\" data-hashtag=\"#profileinformation\">\n\t\t\t\t\t<%= _('Profile Information').translate() %>\n\t\t\t\t<\/a>\n\t\t\t<\/li>\n\t\t\t<li class=\"my-account-item-cell\">\n\t\t\t\t<a href=\"#\" data-touchpoint=\"customercenter\" data-hashtag=\"#addressbook\">\n\t\t\t\t\t<%= _('Address Book').translate() %>\n\t\t\t\t<\/a>\n\t\t\t<\/li>\n\t\t\t<li class=\"my-account-item-cell\">\n\t\t\t\t<a href=\"#\" data-touchpoint=\"customercenter\" data-hashtag=\"#creditcards\">\n\t\t\t\t\t<%= _('Credit Cards').translate() %>\n\t\t\t\t<\/a>\n\t\t\t<\/li>\n\t\t\t<li class=\"my-account-item-cell\">\n\t\t\t\t<a href=\"#\" data-touchpoint=\"customercenter\" data-hashtag=\"#ordershistory\">\n\t\t\t\t\t<%= _('Order History & Returns').translate() %>\n\t\t\t\t<\/a>\n\t\t\t<\/li>\n\t\t\t<li class=\"my-account-item-cell\">\n\t\t\t\t<a href=\"#\" data-touchpoint=\"customercenter\" data-hashtag=\"#emailpreferences\">\n\t\t\t\t\t<%= _('Email Preferences').translate() %>\n\t\t\t\t<\/a>\n\t\t\t<\/li>\n\t\t\t<li class=\"my-account-item-cell\">\n\t\t\t\t<a href=\"#\" data-touchpoint=\"customercenter\" data-hashtag=\"#reorderItems\">\n\t\t\t\t\t<%= _('Reorder Items').translate() %>\n\t\t\t\t<\/a>\n\t\t\t<\/li>\n\t\t\t<li class=\"my-account-item-cell\">\n\t\t\t\t<a href=\"#\" data-touchpoint=\"customercenter\" data-hashtag=\"#updateyourpassword\">\n\t\t\t\t\t<%= _('Update Your Password').translate() %>\n\t\t\t\t<\/a>\n\t\t\t<\/li>\n\t\t\t<li class=\"divider\"><\/li>\n\t\t\t<li class=\"my-account-item-cell\">\n\t\t\t\t<a href=\"#\" data-touchpoint=\"logout\">\n\t\t\t\t\t<%= _('Sign Out').translate() %>\n\t\t\t\t<\/a>\n\t\t\t<\/li>\t\n\t\t<\/ul>\n\t<\/li>\t\n<% } else { %>\n\t<li><a href=\"#\" data-touchpoint=\"login\"><%= _('Login').translate() %><\/a><\/li>\n\t<li class=\"divider-vertical\"><\/li>\n\t<li><a href=\"#\" data-touchpoint=\"register\"><%= _('Register').translate() %><\/a><\/li>\n<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('siteSearch', function (name, view) { %>\n<% var maxLength = view.application.getConfig('searchPrefs.maxLength') || 0; %>\n<form class=\"form-search site-search\" method=\"GET\" action=\"\/search\">\n\t<div class=\"input-append\">\n\t\t<input class=\"input-medium search-query\" placeholder=\"<%- _('Search').translate() %>\" type=\"search\" name=\"<%- name %>\" autocomplete=\"off\"\n\t\t\t<%= maxLength > 0 ? 'maxlength=\"'+maxLength+'\"' : '' %>\t>\n\t\t<button type=\"submit\" class=\"btn\">\n\t\t\t<i class=\"icon-search\"><\/i>\n\t\t<\/button>\n\t<\/div>\n<\/form>\n<%})%>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('simplifiedHeader', function (view) { %>\n<!-- Bar just for style -->\n<nav class=\"navbar navbar-inverse navbar-static-top site-header-top-nav\">\n\t<div class=\"navbar-inner\">\n\t\t<div class=\"container\"><\/div>\n\t<\/div>\n<\/nav>\n<!-- \/Bar just for style -->\n<div class=\"container\">\n\t<div class=\"row-fluid site-branding\">\n\t\t<div class=\"span3 site-logo\">\n\t\t\t<%= SC.macros.siteLogo(view.application, true) %>\n\t\t<\/div>\n\t\t<div class=\"span6 header-banner\">\n\t\t\t<div id=\"banner-header-top\" class=\"content-banner banner-header-top\"><\/div>\n\t\t\t&nbsp;\n\t\t<\/div>\n\t\t<div class=\"span3 back-to-shopping\">\n\t\t\t<a class=\"btn btn-link pull-right\" href=\"\/\" data-touchpoint=\"home\" data-hashtag=\"#\/\">\n\t\t\t\t<%= _('continue shopping >').translate() %>\n\t\t\t<\/a>\n\t\t<\/div>\n\t<\/div>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('typeahead', function (item, query, application) { %>\n<div class=\"typeahead-item clearfix\">\n\t<div class=\"typeahead-item-head\">\n\t\t<% var thumbnail = item.get('_thumbnail'); %>\n\t\t<img class=\"typeahead-image\" src=\"<%- application.resizeImage(thumbnail.url, 'tinythumb') %>\" alt=\"<%- thumbnail.altimagetext %>\">\n\t\t<div class=\"typeahead-title\"><%= _.highlightKeyword(item.get('_name'), query) %><\/div>\n\t<\/div>\n<\/div>\n<%})%> \n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('miniCart', function (cart, application) { %>\n<%\n\tvar lines = cart.get('lines')\n\t,\thas_cart_router = application.modulesMountToAppResult.Cart instanceof application.modules.Cart.Router\n\t,\tcurrent_touchpoint = application.Configuration.currentTouchpoint\n\t,\ttotal_items = _.reduce(lines.pluck('quantity'), function (memo, quantity) {\n\t\t\treturn memo + (parseFloat(quantity) || 1);\n\t\t}, 0);\n%>\n<a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\">\n\t<%= SC.macros.miniCartSummary(total_items) %>\n\t<b class=\"caret\"><\/b>\n<\/a>\n<div class=\"dropdown-menu\">\n<% if (lines.length) { %>\n\t<ul class=\"cart-summary-items mini-cart-items\">\n\t\t<% var thumbnail = '', item = null; %>\n\t\t<% lines.each(function (line) { %>\n\t\t\t<%\n\t\t\t\titem = line.get('item');\n\t\t\t\tthumbnail = item.get('_thumbnail');\n\t\t\t%>\n\t\t\t<li class=\"cart-summary-item-cell mini-cart-item-cell\">\n\t\t\t\t<a href=\"#\" class=\"row-fluid\" data-touchpoint=\"home\" data-hashtag=\"#<%= _(item.get('_url')).fixUrl() %>\">\n\t\t\t\t\t<div class=\"span3 thumbnail mini-cart-item-thumbnail\">\n\t\t\t\t\t\t<img src=\"<%- application.resizeImage(thumbnail.url, 'tinythumb') %>\" alt=\"<%- thumbnail.altimagetext %>\">\n\t\t\t\t\t<\/div>\n\t\t\t\t\t<div class=\"span9 mini-cart-item-details\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<strong><%= item.get('_name') %><\/strong>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<!-- Renders the selected options for the item -->\n\t\t\t\t\t\t<%= item.renderAllOptionSelected() %>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<%= _('Quantity: $(0)').translate( line.get('quantity') ) %>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<%= _('Price: $(0)').translate( line.get('total_formatted') ) %>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/a>\n\t\t\t<\/li>\n\t\t<% }) %>\n\t<\/ul>\n\t<ul class=\"summary\">\n\t\t<li class=\"mini-cart-summary-container\">\n\t\t\t<p class=\"mini-cart-summary\">\n\t\t\t\t<span class=\"pull-right mini-cart-subtotal\">\n\t\t\t\t\t<%= _('Subtotal: <b>$(0)<\/b>').translate( cart.get('summary').subtotal_formatted ) %>\n\t\t\t\t<\/span>\n\t\t\t\t<span class=\"item-count\">\n\t\t\t\t<% if ( total_items !== 1 ) { %>\n\t\t\t\t\t<%= _('$(0) items').translate( total_items ) %>\n\t\t\t\t<% } else { %>\n\t\t\t\t\t<%= _('1 item').translate() %>\n\t\t\t\t<% } %>\n\t\t\t\t<\/span>\n\t\t\t<\/p>\n\t\t\t<div class=\"mini-cart-actions\">\n\t\t\t\t<a href=\"#\" data-touchpoint=\"<%= has_cart_router ? current_touchpoint : 'viewcart' %>\" data-hashtag=\"#cart\" class=\"btn btn-view-cart\">\n\t\t\t\t\t<%= _('View Cart').translate() %>\n\t\t\t\t<\/a>\n\t\t\t\t<a href=\"#\" data-touchpoint=\"checkout\" data-hashtag=\"#\" class=\"btn btn-primary btn-checkout\">\n\t\t\t\t\t<%= _('Checkout').translate() %>\n\t\t\t\t<\/a>\n\t\t\t<\/div>\n\t\t\t<div id=\"mini-cart-bottom-banner\" class=\"mini-cart-bottom-banner\"><\/div>\n\t\t<\/li>\n\t<\/ul>\n<% } else { %>\n\t<ul class=\"items mini-cart-empty\">\n\t\t<li>\n\t\t\t<a href=\"#\" data-touchpoint=\"<%= has_cart_router ? current_touchpoint : 'viewcart' %>\" data-hashtag=\"#cart\">\n\t\t\t\t<%= _('Your cart is empty').translate() %>\n\t\t\t<\/a>\n\t\t<\/li>\n\t<\/ul>\n<% } %>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('headerTopNav', function (view) { %>\n<%\n\tvar application = view.application\n\t,\tenvironment = SC.ENVIRONMENT\n\t,\tmacros = SC.macros\n\n\t,\thosts = environment.availableHosts\n\t,\thas_multiple_hosts = hosts.length > 1\n\n\t,\tlanguages = environment.availableLanguages\n\t,\thas_multiple_languages = languages.length > 1\n\n\t,\thas_hosts_or_languages = has_multiple_hosts || has_multiple_languages\n\n\t,\tcurrencies = environment.availableCurrencies\n\t,\thas_multiple_currencies = currencies.length > 1;\n%>\n<nav class=\"navbar navbar-inverse navbar-static-top site-header-top-nav\">\n\t<div class=\"navbar-inner\">\n\t\t<div class=\"container\">\n\t\t\t<% if (has_hosts_or_languages || has_multiple_currencies) { %>\n\t\t\t\t<ul class=\"nav customer-site-settings\">\n\t\t\t\t<% if (has_hosts_or_languages) { %>\n\t\t\t\t\t<li id=\"language-selector-container\" class=\"language-selector-container\">\n\t\t\t\t\t\t<form action=\"\" class=\"navbar-form\">\n\t\t\t\t\t\t\t<% if (has_multiple_hosts) { %>\n\t\t\t\t\t\t\t\t<%= macros.hostSelector(hosts, environment.currentHostString) %>\n\t\t\t\t\t\t\t<% } else if (has_multiple_languages) { %>\n\t\t\t\t\t\t\t\t<%= macros.languageSelector(languages, environment.currentLanguage.locale) %>\n\t\t\t\t\t\t\t<% } %>\n\t\t\t\t\t\t<\/form>\n\t\t\t\t\t<\/li>\n\t\t\t\t<% } %>\n\t\t\t\t<% if (has_hosts_or_languages && has_multiple_currencies) { %>\n\t\t\t\t\t<li class=\"divider-vertical\"><\/li>\n\t\t\t\t<% } %>\n\t\t\t\t<% if (has_multiple_currencies) { %>\n\t\t\t\t\t<li id=\"currency-selector-container\" class=\"currency-selector-container\">\n\t\t\t\t\t\t<form action=\"\" class=\"navbar-form\">\n\t\t\t\t\t\t\t<%= macros.currencySelector(currencies, environment.currentCurrency.code) %>\n\t\t\t\t\t\t<\/form>\n\t\t\t\t\t<\/li>\n\t\t\t\t<% } %>\n\t\t\t\t<\/ul>\n\t\t\t<% } %>\n\t\t\t<!-- TODO: should the following be inside a macro? -->\n\t\t\t<ul class=\"nav pull-right\">\n\t\t\t\t<%= macros[application.getConfig('profileMacro')](application.getUser()) %>\n\t\t\t\t<li id=\"mini-cart-container\" class=\"dropdown mini-cart-container\">\n\t\t\t\t\t<%= macros.miniCart(application.getCart(), application) %>\n\t\t\t\t<\/li>\n\t\t\t<\/ul>\n\t\t<\/div>\n\t<\/div>\n<\/nav>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('header', function (view) { %>\n<div class=\"container\">\n\n\t<div class=\"row-fluid site-branding\">\n\t\t<div class=\"span3 site-logo\">\n\t\t\t<%= SC.macros.siteLogo(view.application, true) %>\n\t\t<\/div>\n\t\t<div class=\"span3 offset6\">\n\n<% if ( view.application.getUser().get(\"email\") ) { %>\n<a class=\"btn btn-link pull-right\" href=\"\/\" data-touchpoint=\"logout\" data-hashtag=\"#\/\"><%= _('Sign Out').translate() %><\/a>\n<% } else { %>\n<a class=\"btn btn-link pull-right\" href=\"\/\" data-touchpoint=\"login\" data-hashtag=\"#\/\"><%= _('Register').translate() %><\/a> &nbsp; <a class=\"btn btn-link pull-right\" href=\"\/\" data-touchpoint=\"login\" data-hashtag=\"#\/\"><%= _('Sign In').translate() %><\/a>\n<% }%>\n\t\t<\/div>\n\t<\/div>\n\n\t<div class=\"row-fluid site-menu hidden-xs\">\n\n\t\t<ul class=\"span12\">\n\t\t\t<li class=\"span12 cart\" style=\"float:left !important\"><a href=\"\/\" data-touchpoint=\"viewcart\" data-hashtag=\"#\/\"><img src=\"\/c.297799\/Checkout\/img\/pixel.gif\" style=\"height:30px !important; width:141px\" border=\"0\" alt=\"Shopping Cart\"><\/a><\/li>\n\t\t\t<li class=\"span12 checkout\" style=\"float:left !important\"><a  href=\"\/\" data-touchpoint=\"checkout\" data-hashtag=\"#\/\"><img src=\"\/c.297799\/Checkout\/img\/pixel.gif\" style=\"height:30px !important; width:103px\" border=\"0\" alt=\"Checkout\"><\/a><\/li>\n\t\t\t<li class=\"span12 myaccount\" style=\"float:left !important\"><a href=\"\/\" data-touchpoint=\"customercenter\" data-hashtag=\"#\/\"><img src=\"\/c.297799\/Checkout\/img\/pixel.gif\" style=\"height:30px !important; width:121px\" border=\"0\" alt=\"My Account\"><\/a><\/li>\n\t\t<\/ul>\n\n\t\t<div class=\"span7\">&nbsp;<\/div>\n\n\t<\/div>\n\n\t<div class=\"row-fluid site-menu visible-xs\">\n\n\t\t<ul class=\"span12\">\n\t\t\t<li class=\"span12 cart\" style=\"float:left !important\"><a href=\"\/\" data-touchpoint=\"viewcart\" data-hashtag=\"#\/\">SHOPPING CART<\/a><\/li>\n\t\t\t<li class=\"span12 checkout\" style=\"float:left !important\"><a  href=\"\/\" data-touchpoint=\"checkout\" data-hashtag=\"#\/\">CHECKOUT<\/a><\/li>\n\t\t\t<li class=\"span12 myaccount\" style=\"float:left !important\"><a href=\"\/\" data-touchpoint=\"customercenter\" data-hashtag=\"#\/\">MY ACCOUNT<\/a><\/li>\n\t\t<\/ul>\n\n\t\t<div class=\"span7\">&nbsp;<\/div>\n\n\t<\/div>\n\t<div class=\"\"><\/div>\n\n<\/div>\n<% }) %>\n\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('miniCartSummary', function (total_items) { %>\n<i class=\"icon-shopping-cart icon-white\"><\/i>\n<span class=\"item-count\">\n<% if (total_items !== 1) { %>\n\t<%= _('<b>$(0)<\/b> items').translate(total_items) %>\n<% } else { %>\n\t<%= _('<b>1<\/b> item').translate() %>\n<% } %>\n<\/span>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('siteLogo', function (application, remove_home_link) { %>\n<div id=\"site-logo\" class=\"site-logo content-banner\">\n\n\t<%\n\t\tvar logoUrl = application.getConfig('logoUrl')\n\t\t,       siteUrl = application.getConfig('siteUrl')\n\t\t,\tsiteName = application.getConfig('siteSettings.displayname');\n\t%>\n\n\t<% if (remove_home_link){ %>\n\t\t<a href=\"<%=siteUrl%>\">\n\t<% } else { %>\n\t\t<a href=\"\/\" data-touchpoint=\"home\" data-hashtag=\"#\/\">\n\t<% } %>\t\n\n\t<% if (logoUrl) { %>\n\t\t<img itemprop=\"image\" src=\"<%- logoUrl %>\" alt=\"<%- siteName %>\">\n\t<% } else { %>\n\t\t<h4 itemprop=\"name\"><%= siteName %><\/h4>\n\t<% } %>\n\t<\/a>\n\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('navigationTabs', function (item, is_top) { %>\n<% if (item.categories && item.categories.length) { %>\n\t<%\n\t\titem.href = item.href ? _.fixUrl(item.href) : '#';\n\t\titem['class'] = (item['class'] || '') + ' dropdown-toggle';\n\t\titem.data = _.extend({}, item.data, {toggle: 'dropdown'});\n\t%>\n\t<% if (is_top) { %>\n\t\t<li class=\"dropdown\">\n\t\t\t<a <%= _.objectToAtrributes(item) %>>\n\t\t\t\t<%= item.text %>\n\t\t\t\t<b class=\"caret\"><\/b>\n\t\t\t<\/a>\n\t\t\t<ul class=\"dropdown-menu\">\n\t\t\t\t<% _.each(item.categories, function (sub) { %>\n\t\t\t\t\t<%= SC.macros.navigationTabs(sub) %>\n\t\t\t\t<% }) %>\n\t\t\t<\/ul>\n\t\t<\/li>\n\t<% } else { %>\n\t\t<li class=\"dropdown-submenu\">\n\t\t\t<a <%= _.objectToAtrributes(item) %>>\n\t\t\t\t<%= item.text %>\n\t\t\t<\/a>\n\t\t\t<ul class=\"dropdown-menu\">\n\t\t\t\t<% _.each(item.categories, function (sub) { %>\n\t\t\t\t\t<%= SC.macros.navigationTabs(sub) %>\n\t\t\t\t<% }) %>\n\t\t\t<\/ul>\n\t\t<\/li>\n\t<% } %>\n<% } else { %>\n<li>\n\t<a data-toggle='collapse' data-target='.main-nav' <%= _.objectToAtrributes(item) %>>\n\t\t<%= item.text %>\n\t<\/a>\n<\/li>\n<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('headerSimpleProfile', function (Profile) { %>\n<% if (Profile.get('isLoggedIn') === 'T' &&  Profile.get('isGuest') === 'F') { %>\n\t<li class=\"welcome\"><a><%= _('Welcome $(0)').translate(Profile.get('firstname') || Profile.get('companyname'))  %><\/a><\/li>\n\t<li class=\"my-account-title\">\n\t\t<a href=\"#\" data-touchpoint=\"customercenter\">\n\t\t\t<%= _('Your Account').translate() %>\n\t\t<\/a>\n\t<\/li>\n\t<li class=\"divider-vertical\"><\/li>\n\t<li class=\"logout\">\n\t\t<a href=\"#\" data-touchpoint=\"logout\">\n\t\t\t<%= _('Sign Out').translate() %>\n\t\t<\/a>\n\t<\/li>\t\n<% } else { %>\n\t<li><a href=\"#\" data-touchpoint=\"login\"><%= _('Login').translate() %><\/a><\/li>\n\t<li class=\"divider-vertical\"><\/li>\n\t<li><a href=\"#\" data-touchpoint=\"register\"><%= _('Register').translate() %><\/a><\/li>\n<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('footer', function (view) { %>\n<%\n\tvar environment = SC.ENVIRONMENT\n\n\t,\thosts = environment.availableHosts\n\t,\tlanguages = environment.availableLanguages\n\t,\tcurrencies = environment.availableCurrencies\n\n\t,\tnav_links = view.application.getConfig('footerNavigation', [])\n\t,\tmacros = SC.macros;\n%>\n\n<div class=\"container\">\n<footer id=\"site-footer\" class=\"site-footer row-fluid\">\n\n\t<div class=\"privacy\">\n\t\tWe use the NetSuite secure shopping cart. <a href=\"http:\/\/www.netsuite.com\/portal\/resource\/terms-of-service.shtml\" target=\"_blank\">Terms of Service<\/a> and <a href=\"http:\/\/www.netsuite.com\/portal\/privacy.shtml\" target=\"_blank\">Privacy Policy<\/a> apply.\n\t<\/div>\n\n    <div class=\"row-fluid\" id=\"footer-container\">\n\n\t\t<ul>\n\t\t\t<li><a href=\"http:\/\/www.si.edu\/\" target=\"new\">(c) 2016 Smithsonian Institution<\/a><\/li>\n\t\t\t<li>|<\/li>\n\t\t\t<li><a href=\"http:\/\/www.si.edu\/copyright\/\" target=\"new\">Copyright<\/a><\/li>\n\t\t\t<li>|<\/li>\n\t\t\t<li><a href=\"http:\/\/www.folkways.si.edu\/folkways-staff\/smithsonian\">Contact<\/a><\/li>\n\t\t\t<li>|<\/li>\n\t\t\t<li><a href=\"http:\/\/www.si.edu\/privacy\/\" target=\"new\">Privacy<\/a><\/li>\n\t\t\t<li>|<\/li>\n\t\t\t<li><a href=\"http:\/\/www.folkways.si.edu\/production-credits\/smithsonian\">Credits<\/a><\/li>\n\t\t<\/ul>\n\n\t<\/div>\n<\/footer>\n<\/div>\n\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('footerNavigation', function (nav_links) { %>\n<ul class=\"site-footer-main-nav\">\n<% _.each(nav_links, function (item) { %>\n\t<li>\n\t\t<a <%= _.objectToAtrributes(item) %>>\n\t\t<%= item.text %>\n\t\t<\/a>\n\t<\/li>\n<% }) %>\n<\/ul>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('simplifiedFooter', function (view) { %>\n\t<%= SC.macros.backToTop() %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('itemDetailsOptionTile', function (option, selected_value, item_model) { %>\n<% var htmlid = 'option-'+ option.cartOptionId; %>\n<div id=\"<%= htmlid %>-container\" class=\"<%= htmlid %>-container\" data-type=\"option\" data-cart-option-id=\"<%= option.cartOptionId %>\">\n\t<p class=\"option-label strong\">\n\t\t<%= option.label %><% if (selected_value) { %>: <span><%= selected_value.label %><\/span><% } %>\n\t<\/p>\n\t<ul id=\"<%= htmlid %>\" class=\"tiles size-tiles <%= htmlid %>\">\n\t\t<% _.each(option.values, function (item) { %>\n\t\t\t<% if (item.internalid) { %>\n\t\t\t\t<% \n\t\t\t\t\tvar is_active = selected_value && item.internalid == selected_value.internalid\n\t\t\t\t\t,\tis_available = item.isAvailable;\n\t\t\t\t%>\n\t\t\t\t<li class=\"<%= (is_active ? 'active' : '') +' '+ (is_available ? '' : 'muted') %>\">\n\t\t\t\t\t<a \n\t\t\t\t\t\thref=\"<%= item_model.get('_url') + '?' + option.url + '=' + encodeURIComponent(item.label) %>\" \n\t\t\t\t\t\tclass=\"tile\" \n\t\t\t\t\t\tdata-value=\"<%= item.internalid %>\" \n\t\t\t\t\t\tdata-toggle=\"set-option\" \n\t\t\t\t\t\tdata-active=\"<%= is_active %>\" \n\t\t\t\t\t\tdata-available=\"<%= is_available %>\">\n\t\t\t\t\t\t\t<%= item.label %>\n\t\t\t\t\t<\/a>\n\t\t\t\t<\/li>\n\t\t\t<% } %>\n\t\t<% }) %>\n\t<\/ul>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('itemDetailsOptionDropdown', function (option, selected_value, item_model) { %>\n<% var htmlid = 'option-'+ option.cartOptionId; %>\n<div id=\"<%= htmlid %>-container\" data-type=\"option\" data-cart-option-id=\"<%= option.cartOptionId %>\">\n\t<label class=\"option-label strong\" for=\"<%= htmlid %>\">\n\t\t<%= option.label %><% if (selected_value) { %>: <span><%= selected_value.label %><\/span><% } %>\n\t<\/label>\n\t<select name=\"<%= htmlid %>\" id=\"<%= htmlid %>\" class=\"input-medium\" data-toggle=\"select-option\">\n\t<% _.each(option.values, function (item) { %>\n\t\t<% if (item.internalid) { %>\n\t\t\t<% \n\t\t\t\tvar is_active = selected_value && item.internalid == selected_value.internalid\n\t\t\t\t,\tis_available = item.isAvailable;\n\t\t\t%>\n\t\t\t<option\n\t\t\t\tclass=\"<%= (is_active ? 'active' : '') +' '+ (is_available ? '' : 'muted') %>\"\n\t\t\t\tvalue=\"<%= item.internalid %>\"\n\t\t\t\t<%= is_active ? 'selected' : '' %>\n\t\t\t\tdata-active=\"<%= is_active %>\"\n\t\t\t\tdata-available=\"<%= is_available %>\">\n\t\t\t\t\t<%= item.label %>\n\t\t\t<\/option>\n\t\t\t<% } %>\n\t\t<% }) %>\n\t<\/select>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('itemDetailsStock', function (stock_info) { %>\n\t<% if (!stock_info.isInStock && stock_info.showOutOfStockMessage) { %>\n\t\t<span class=\"label label-important stock-status out-of-stock\">\n\t\t\t<link itemprop=\"availability\" href=\"http:\/\/schema.org\/OutOfStock\" \/><%= stock_info.outOfStockMessage %>\n\t\t<\/span>\n\t<% } else if (stock_info.showInStockMessage) { %>\n\t\t<span class=\"label label-success stock-status in-stock\">\n\t\t\t<link itemprop=\"availability\" href=\"http:\/\/schema.org\/InStock\" \/><%= stock_info.inStockMessage %>\n\t\t<\/span>\n\t<% } %>\n\t<% if (stock_info.showStockDescription && stock_info.stockDescription) { %>\n\t\t<span class=\"stock-description <%= stock_info.stockDescriptionClass %>\">\n\t\t\t<%= stock_info.stockDescription %>\n\t\t<\/span>\n\t<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('itemImageGallery', function (images, view) { %>\n<div class=\"item-image-gallery\">\n<% if (images.length) { %>\n\t<% if (images.length > 1) { %>\n\t\t<% var resizeImage = view.application.resizeImage; %>\n\t\t<ul class=\"bxslider\">\n\t\t<% _.each(images, function (image) { %>\n\t\t\t<li>\n\t\t\t\t<img src=\"<%= resizeImage(image.url, 'main') %>\" alt=\"<% image.altimagetext %>\">\n\t\t\t<\/li>\n\t\t<% }) %>\n\t\t<\/ul>\n\t<% } else { %>\n\t\t<% var image = images[0]; %>\n\t\t<div class=\"item-detailed-image\">\n\t\t\t<img src=\"<%= view.application.resizeImage(image.url, 'main') %>\" alt=\"<% image.altimagetext %>\">\n\t\t<\/div>\n\t<% } %>\n<% } %>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('itemDetailsMainImage', function (images, view) { %>\n<% if (images.length) { %>\n\t<% var image = images[0]; %>\n\t<div class=\"item-detailed-image\">\n\t\t<img src=\"<%= view.application.resizeImage(image.url, 'main') %>\" alt=\"<% image.altimagetext %>\">\n\t<\/div>\n<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('itemDetailsOptionRadio', function (option, selected_value, item_model) { %>\n<% var htmlid = 'option-'+ option.cartOptionId; %>\n<div id=\"<%= htmlid %>-container\" class=\"<%= htmlid %>-container\" data-type=\"option\" data-cart-option-id=\"<%= option.cartOptionId %>\">\n\t<p class=\"option-label strong\">\n\t\t<%= option.label %><% if (selected_value) { %>: <span><%= selected_value.label %><\/span><% } %>\n\t<\/p>\n\t<div id=\"<%= htmlid %>\" class=\"<%= htmlid %>\">\n\t\t<% _.each(option.values, function (item) { %>\n\t\t\t<% if (item.internalid) { %>\n\t\t\t\t<% \n\t\t\t\t\tvar is_active = selected_value && item.internalid == selected_value.internalid\n\t\t\t\t\t,\tis_available = item.isAvailable;\n\t\t\t\t%>\n\t\t\t\t<label class=\"radio <%= (is_active ? 'active' : '') +' '+ (is_available ? '' : 'muted') %>\">\n\t\t\t\t\t<input \n\t\t\t\t\t\ttype=\"radio\" \n\t\t\t\t\t\tname=\"<%= htmlid %>\" \n\t\t\t\t\t\tvalue=\"<%= item.internalid %>\" \n\t\t\t\t\t\t<%= is_active ? 'checked' : '' %> \n\t\t\t\t\t\tdata-toggle=\"set-option\" \n\t\t\t\t\t\tdata-active=\"<%= is_active %>\" \n\t\t\t\t\t\tdata-available=\"<%= is_available %>\">\n\t\t\t\t\t<%= item.label %>\n\t\t\t\t<\/label>\n\t\t\t<% } %>\n\t\t<% }) %>\n\t<\/div>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('itemDetailsReviews', function ( options ) { %>\n<% if (options.item.get('_ratingsCount')) { %>\n\t<div class=\"item-detailed-reviews\">\n\t\t<h3 class=\"no-margin-top\">\n\t\t\t<%= options.title || _('Reviews Summary').translate() %>\n\t\t<\/h3>\n\t\t<header class=\"reviews-header\">\n\t\t\t<div class=\"row-fluid\">\n\t\t\t\t<div class=\"span3 reviews-star-filters\">\n\t\t\t\t\t<div class=\"star-rating\">\n\t\t\t\t\t\t<%= SC.macros.starRating({\n\t\t\t\t\t\t\tmax: options.application.getConfig('productReviews.maxRate')\n\t\t\t\t\t\t,\tvalue: options.item.get('_rating')\n\t\t\t\t\t\t,\tfillRounded: true\n\t\t\t\t\t\t,\tclassName: 'star'\n\t\t\t\t\t\t,\tshowValue: true\n\t\t\t\t\t\t}) %>\n\t\t\t\t\t<\/div>\n\t\t\t\t\t<div class=\"rating-by-star\">\n\t\t\t\t\t\t<%= SC.macros.ratingByStar({\n\t\t\t\t\t\t\tratingsCountsByRate: options.item.get('_ratingsCountsByRate') || {}\n\t\t\t\t\t\t,\tmaxRate: options.application.getConfig('productReviews.maxRate')\n\t\t\t\t\t\t,\ttotalReviews: options.item.get('_ratingsCount')\n\t\t\t\t\t\t,\tbaseUrl: options.item.get('_url')\n\t\t\t\t\t\t,\tshowPercentage: true\n\t\t\t\t\t\t,\tshowCount: true\n\t\t\t\t\t\t}) %>\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t\t<div class=\"span3 based-on strong\">\n\t\t\t\t\t<%\n\t\t\t\t\t\tvar label = options.item.get('_ratingsCount') === 1 ? _('Review').translate() : _('Reviews').translate()\n\t\t\t\t\t\t,\tcount = options.item.get('_ratingsCount');\n\t\t\t\t\t%>\n\t\t\t\t\t<%= _('Based on $(0) $(1)').translate('<span class=\"reviews-count\">'+ count +'<\/span>', label) %>\n\t\t\t\t<\/div>\n\t\t\t\t<div class=\"span6 right-aligned write-review-container\">\n\t\t\t\t\t<a href=\"<%= options.item.get('_url') %>\/reviews\/new\" class=\"btn btn-primary btn-large\"><%= _('Write a Review').translate() %><\/a>\n\t\t\t\t<\/div>\n\t\t\t<\/div>\n\t\t<\/header>\n\t\t<section class='reviews-list'>\n\t\t\t<h4><%= options.subtitle || 'Reviews List' %><\/h4>\n\t\t\t<% if (options.collection.totalRecordsFound) { %>\n\t\t\t\t<% options.collection.each(function (review) { %>\n\t\t\t\t\t<div class=\"review-container\">\n\t\t\t\t\t\t<%= SC.macros[options.application.getConfig('productReviews.reviewMacro')](review, _.extend({showActionButtons: true}, options.application.getConfig('productReviews'))) %>\n\t\t\t\t\t<\/div>\n\t\t\t\t<% }) %>\n\t\t\t<% } %>\n\t\t<\/section>\n\t\t<% if (options.collection.length < options.collection.totalRecordsFound) { %>\n\t\t<footer>\n\t\t\t<a href=\"<%= options.item.get('_url') %>\" class=\"btn btn-large\">\n\t\t\t\t<%= _('View more reviews ($(0))').translate(options.collection.totalRecordsFound) %>\n\t\t\t\t<i class=\"icon-chevron-right\"><\/i>\n\t\t\t<\/a>\n\t\t<\/footer>\n\t<% } %>\n\t<\/div>\n<% } else { %>\n\t<% if (jQuery('#first-review').length == 0) { %>\n\t\t<div class=\"item-detailed-reviews\">\n\t\t\t<h3 class=\"no-margin-top\"><%= options.title || _('Reviews Summary').translate() %><\/h3>\n\t\t\t<p id=\"first-review\" class=\"first-review\">\n\t\t\t\t<%= _('Be the first to <a href=\"$(0)\">write a review<\/a>').translate( options.item.get('_url') + '\/reviews\/new' ) %>\n\t\t\t<\/p>\n\t\t<\/div>\n\t<% } %>\n<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('itemDetailsOptionText', function (option, selected_value, item_model) { %>\n<% var htmlid = 'option-'+ option.cartOptionId; %>\n<div id=\"<%= htmlid %>-container\" class=\"<%= htmlid %>-container\" data-type=\"option\" data-cart-option-id=\"<%= option.cartOptionId %>\">\n\t<label class=\"option-label strong\" for=\"<%= htmlid %>\">\n\t\t<%= option.label %>\n\t<\/label>\n\t<% if (option.type === 'textarea') { %>\n\t\t<textarea name=\"<%= htmlid %>\" id=\"<%= htmlid %>\" class=\"input-medium <%= htmlid %>\" data-toggle=\"text-option\" data-available=\"true\"><%= selected_value && selected_value.internalid || '' %><\/textarea>\n\t<% } else { %>\n\t\t<input type=\"<%= option.type === 'email' ? 'email' : 'text' %>\" name=\"<%= htmlid %>\" id=\"<%= htmlid %>\" class=\"input-medium <%= htmlid %>\" value=\"<%= selected_value && selected_value.internalid || '' %>\" data-toggle=\"text-option\" data-available=\"true\">\n\t<% } %>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('itemDetailsOptionColor', function (option, selected_value, item_model) { %>\n<% var htmlid = 'option-'+ option.cartOptionId; %>\n<div id=\"<%= htmlid %>-container\" class=\"<%= htmlid %>-container\" data-type=\"option\" data-cart-option-id=\"<%= option.cartOptionId %>\">\n\t<p class=\"option-label strong\">\n\t\t<%= option.label %><% if (selected_value) { %>: <span><%= selected_value.label %><\/span><% } %>\n\t<\/p>\n\t<ul id=\"<%= htmlid %>\" class=\"tiles color-tiles <%= htmlid %>\">\n\t\t<% _.each(option.values, function (item) { %>\n\t\t\t<% if (item.internalid) { %>\n\t\t\t\t<% \n\t\t\t\t\tvar is_active = selected_value && item.internalid == selected_value.internalid\n\t\t\t\t\t,\tis_available = item.isAvailable;\n\t\t\t\t%>\n\t\t\t\t<li class=\"<%= (is_active ? 'active' : '') +' '+ (is_available ? '' : 'muted') %>\">\n\t\t\t\t\t<% var color = option.colors && (option.colors[item.label] || option.colors.defaultColor); %>\n\t\t\t\t\t<a \n\t\t\t\t\t\thref=\"<%= item_model.get('_url') + '?' + option.url + '=' + encodeURIComponent(item.label) %>\" \n\t\t\t\t\t\tclass=\"tile\" \n\t\t\t\t\t\ttitle=\"<%= item.label %>\"\n\t\t\t\t\t\t<% if (!_.isObject(color)) { %>\n\t\t\t\t\t\t\tstyle=\"background: <%= color %>\"\n\t\t\t\t\t\t<% } %>\n\t\t\t\t\t\tdata-value=\"<%= item.internalid %>\" \n\t\t\t\t\t\tdata-toggle=\"set-option\" \n\t\t\t\t\t\tdata-active=\"<%= is_active %>\" \n\t\t\t\t\t\tdata-available=\"<%= is_available %>\">\n\t\t\t\t\t\t\t<% if (_.isObject(color) && color.type === 'image') { %>\n\t\t\t\t\t\t\t\t<img \n\t\t\t\t\t\t\t\t\tsrc=\"<%= color.src %>\" \n\t\t\t\t\t\t\t\t\talt=\"<%= item.label %>\"\n\t\t\t\t\t\t\t\t\twidth=\"<%= color.width || '' %>\" \n\t\t\t\t\t\t\t\t\theight=\"<%= color.height || '' %>\">\n\t\t\t\t\t\t\t<% } %>\n\t\t\t\t\t<\/a>\n\t\t\t\t<\/li>\n\t\t\t<% } %>\n\t\t<% }) %>\n\t<\/ul>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('itemDetailsOptionTile', function (option, selected_value, item_model) { %>\n<% var htmlid = 'option-'+ option.cartOptionId; %>\n<div id=\"<%= htmlid %>-container\" class=\"<%= htmlid %>-container\" data-type=\"option\" data-cart-option-id=\"<%= option.cartOptionId %>\">\n\t<p class=\"option-label strong\">\n\t\t<%= option.label %><% if (selected_value) { %>: <span><%= selected_value.label %><\/span><% } %>\n\t<\/p>\n\t<ul id=\"<%= htmlid %>\" class=\"tiles size-tiles <%= htmlid %>\">\n\t\t<% _.each(option.values, function (item) { %>\n\t\t\t<% if (item.internalid) { %>\n\t\t\t\t<% \n\t\t\t\t\tvar is_active = selected_value && item.internalid == selected_value.internalid\n\t\t\t\t\t,\tis_available = item.isAvailable;\n\t\t\t\t%>\n\t\t\t\t<li class=\"<%= (is_active ? 'active' : '') +' '+ (is_available ? '' : 'muted') %>\">\n\t\t\t\t\t<a \n\t\t\t\t\t\thref=\"<%= item_model.get('_url') + '?' + option.url + '=' + encodeURIComponent(item.label) %>\" \n\t\t\t\t\t\tclass=\"tile\" \n\t\t\t\t\t\tdata-value=\"<%= item.internalid %>\" \n\t\t\t\t\t\tdata-toggle=\"set-option\" \n\t\t\t\t\t\tdata-active=\"<%= is_active %>\" \n\t\t\t\t\t\tdata-available=\"<%= is_available %>\">\n\t\t\t\t\t\t\t<%= item.label %>\n\t\t\t\t\t<\/a>\n\t\t\t\t<\/li>\n\t\t\t<% } %>\n\t\t<% }) %>\n\t<\/ul>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('itemDetailsOptionDropdown', function (option, selected_value, item_model) { %>\n<% var htmlid = 'option-'+ option.cartOptionId; %>\n<div id=\"<%= htmlid %>-container\" data-type=\"option\" data-cart-option-id=\"<%= option.cartOptionId %>\">\n\t<label class=\"option-label strong\" for=\"<%= htmlid %>\">\n\t\t<%= option.label %><% if (selected_value) { %>: <span><%= selected_value.label %><\/span><% } %>\n\t<\/label>\n\t<select name=\"<%= htmlid %>\" id=\"<%= htmlid %>\" class=\"input-medium\" data-toggle=\"select-option\">\n\t<% _.each(option.values, function (item) { %>\n\t\t<% if (item.internalid) { %>\n\t\t\t<% \n\t\t\t\tvar is_active = selected_value && item.internalid == selected_value.internalid\n\t\t\t\t,\tis_available = item.isAvailable;\n\t\t\t%>\n\t\t\t<option\n\t\t\t\tclass=\"<%= (is_active ? 'active' : '') +' '+ (is_available ? '' : 'muted') %>\"\n\t\t\t\tvalue=\"<%= item.internalid %>\"\n\t\t\t\t<%= is_active ? 'selected' : '' %>\n\t\t\t\tdata-active=\"<%= is_active %>\"\n\t\t\t\tdata-available=\"<%= is_available %>\">\n\t\t\t\t\t<%= item.label %>\n\t\t\t<\/option>\n\t\t\t<% } %>\n\t\t<% }) %>\n\t<\/select>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('itemDetailsStock', function (stock_info) { %>\n\t<% if (!stock_info.isInStock && stock_info.showOutOfStockMessage) { %>\n\t\t<span class=\"label label-important stock-status out-of-stock\">\n\t\t\t<link itemprop=\"availability\" href=\"http:\/\/schema.org\/OutOfStock\" \/><%= stock_info.outOfStockMessage %>\n\t\t<\/span>\n\t<% } else if (stock_info.showInStockMessage) { %>\n\t\t<span class=\"label label-success stock-status in-stock\">\n\t\t\t<link itemprop=\"availability\" href=\"http:\/\/schema.org\/InStock\" \/><%= stock_info.inStockMessage %>\n\t\t<\/span>\n\t<% } %>\n\t<% if (stock_info.showStockDescription && stock_info.stockDescription) { %>\n\t\t<span class=\"stock-description <%= stock_info.stockDescriptionClass %>\">\n\t\t\t<%= stock_info.stockDescription %>\n\t\t<\/span>\n\t<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('itemImageGallery', function (images, view) { %>\n<div class=\"item-image-gallery\">\n<% if (images.length) { %>\n\t<% if (images.length > 1) { %>\n\t\t<% var resizeImage = view.application.resizeImage; %>\n\t\t<ul class=\"bxslider\">\n\t\t<% _.each(images, function (image) { %>\n\t\t\t<li>\n\t\t\t\t<img src=\"<%= resizeImage(image.url, 'main') %>\" alt=\"<% image.altimagetext %>\">\n\t\t\t<\/li>\n\t\t<% }) %>\n\t\t<\/ul>\n\t<% } else { %>\n\t\t<% var image = images[0]; %>\n\t\t<div class=\"item-detailed-image\">\n\t\t\t<img src=\"<%= view.application.resizeImage(image.url, 'main') %>\" alt=\"<% image.altimagetext %>\">\n\t\t<\/div>\n\t<% } %>\n<% } %>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('itemDetailsMainImage', function (images, view) { %>\n<% if (images.length) { %>\n\t<% var image = images[0]; %>\n\t<div class=\"item-detailed-image\">\n\t\t<img src=\"<%= view.application.resizeImage(image.url, 'main') %>\" alt=\"<% image.altimagetext %>\">\n\t<\/div>\n<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('itemDetailsOptionRadio', function (option, selected_value, item_model) { %>\n<% var htmlid = 'option-'+ option.cartOptionId; %>\n<div id=\"<%= htmlid %>-container\" class=\"<%= htmlid %>-container\" data-type=\"option\" data-cart-option-id=\"<%= option.cartOptionId %>\">\n\t<p class=\"option-label strong\">\n\t\t<%= option.label %><% if (selected_value) { %>: <span><%= selected_value.label %><\/span><% } %>\n\t<\/p>\n\t<div id=\"<%= htmlid %>\" class=\"<%= htmlid %>\">\n\t\t<% _.each(option.values, function (item) { %>\n\t\t\t<% if (item.internalid) { %>\n\t\t\t\t<% \n\t\t\t\t\tvar is_active = selected_value && item.internalid == selected_value.internalid\n\t\t\t\t\t,\tis_available = item.isAvailable;\n\t\t\t\t%>\n\t\t\t\t<label class=\"radio <%= (is_active ? 'active' : '') +' '+ (is_available ? '' : 'muted') %>\">\n\t\t\t\t\t<input \n\t\t\t\t\t\ttype=\"radio\" \n\t\t\t\t\t\tname=\"<%= htmlid %>\" \n\t\t\t\t\t\tvalue=\"<%= item.internalid %>\" \n\t\t\t\t\t\t<%= is_active ? 'checked' : '' %> \n\t\t\t\t\t\tdata-toggle=\"set-option\" \n\t\t\t\t\t\tdata-active=\"<%= is_active %>\" \n\t\t\t\t\t\tdata-available=\"<%= is_available %>\">\n\t\t\t\t\t<%= item.label %>\n\t\t\t\t<\/label>\n\t\t\t<% } %>\n\t\t<% }) %>\n\t<\/div>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('itemDetailsReviews', function ( options ) { %>\n<% if (options.item.get('_ratingsCount')) { %>\n\t<div class=\"item-detailed-reviews\">\n\t\t<h3 class=\"no-margin-top\">\n\t\t\t<%= options.title || _('Reviews Summary').translate() %>\n\t\t<\/h3>\n\t\t<header class=\"reviews-header\">\n\t\t\t<div class=\"row-fluid\">\n\t\t\t\t<div class=\"span3 reviews-star-filters\">\n\t\t\t\t\t<div class=\"star-rating\">\n\t\t\t\t\t\t<%= SC.macros.starRating({\n\t\t\t\t\t\t\tmax: options.application.getConfig('productReviews.maxRate')\n\t\t\t\t\t\t,\tvalue: options.item.get('_rating')\n\t\t\t\t\t\t,\tfillRounded: true\n\t\t\t\t\t\t,\tclassName: 'star'\n\t\t\t\t\t\t,\tshowValue: true\n\t\t\t\t\t\t}) %>\n\t\t\t\t\t<\/div>\n\t\t\t\t\t<div class=\"rating-by-star\">\n\t\t\t\t\t\t<%= SC.macros.ratingByStar({\n\t\t\t\t\t\t\tratingsCountsByRate: options.item.get('_ratingsCountsByRate') || {}\n\t\t\t\t\t\t,\tmaxRate: options.application.getConfig('productReviews.maxRate')\n\t\t\t\t\t\t,\ttotalReviews: options.item.get('_ratingsCount')\n\t\t\t\t\t\t,\tbaseUrl: options.item.get('_url')\n\t\t\t\t\t\t,\tshowPercentage: true\n\t\t\t\t\t\t,\tshowCount: true\n\t\t\t\t\t\t}) %>\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t\t<div class=\"span3 based-on strong\">\n\t\t\t\t\t<%\n\t\t\t\t\t\tvar label = options.item.get('_ratingsCount') === 1 ? _('Review').translate() : _('Reviews').translate()\n\t\t\t\t\t\t,\tcount = options.item.get('_ratingsCount');\n\t\t\t\t\t%>\n\t\t\t\t\t<%= _('Based on $(0) $(1)').translate('<span class=\"reviews-count\">'+ count +'<\/span>', label) %>\n\t\t\t\t<\/div>\n\t\t\t\t<div class=\"span6 right-aligned write-review-container\">\n\t\t\t\t\t<a href=\"<%= options.item.get('_url') %>\/reviews\/new\" class=\"btn btn-primary btn-large\"><%= _('Write a Review').translate() %><\/a>\n\t\t\t\t<\/div>\n\t\t\t<\/div>\n\t\t<\/header>\n\t\t<section class='reviews-list'>\n\t\t\t<h4><%= options.subtitle || 'Reviews List' %><\/h4>\n\t\t\t<% if (options.collection.totalRecordsFound) { %>\n\t\t\t\t<% options.collection.each(function (review) { %>\n\t\t\t\t\t<div class=\"review-container\">\n\t\t\t\t\t\t<%= SC.macros[options.application.getConfig('productReviews.reviewMacro')](review, _.extend({showActionButtons: true}, options.application.getConfig('productReviews'))) %>\n\t\t\t\t\t<\/div>\n\t\t\t\t<% }) %>\n\t\t\t<% } %>\n\t\t<\/section>\n\t\t<% if (options.collection.length < options.collection.totalRecordsFound) { %>\n\t\t<footer>\n\t\t\t<a href=\"<%= options.item.get('_url') %>\" class=\"btn btn-large\">\n\t\t\t\t<%= _('View more reviews ($(0))').translate(options.collection.totalRecordsFound) %>\n\t\t\t\t<i class=\"icon-chevron-right\"><\/i>\n\t\t\t<\/a>\n\t\t<\/footer>\n\t<% } %>\n\t<\/div>\n<% } else { %>\n\t<% if (jQuery('#first-review').length == 0) { %>\n\t\t<div class=\"item-detailed-reviews\">\n\t\t\t<h3 class=\"no-margin-top\"><%= options.title || _('Reviews Summary').translate() %><\/h3>\n\t\t\t<p id=\"first-review\" class=\"first-review\">\n\t\t\t\t<%= _('Be the first to <a href=\"$(0)\">write a review<\/a>').translate( options.item.get('_url') + '\/reviews\/new' ) %>\n\t\t\t<\/p>\n\t\t<\/div>\n\t<% } %>\n<% } %>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('itemDetailsOptionText', function (option, selected_value, item_model) { %>\n<% var htmlid = 'option-'+ option.cartOptionId; %>\n<div id=\"<%= htmlid %>-container\" class=\"<%= htmlid %>-container\" data-type=\"option\" data-cart-option-id=\"<%= option.cartOptionId %>\">\n\t<label class=\"option-label strong\" for=\"<%= htmlid %>\">\n\t\t<%= option.label %>\n\t<\/label>\n\t<% if (option.type === 'textarea') { %>\n\t\t<textarea name=\"<%= htmlid %>\" id=\"<%= htmlid %>\" class=\"input-medium <%= htmlid %>\" data-toggle=\"text-option\" data-available=\"true\"><%= selected_value && selected_value.internalid || '' %><\/textarea>\n\t<% } else { %>\n\t\t<input type=\"<%= option.type === 'email' ? 'email' : 'text' %>\" name=\"<%= htmlid %>\" id=\"<%= htmlid %>\" class=\"input-medium <%= htmlid %>\" value=\"<%= selected_value && selected_value.internalid || '' %>\" data-toggle=\"text-option\" data-available=\"true\">\n\t<% } %>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('itemDetailsOptionColor', function (option, selected_value, item_model) { %>\n<% var htmlid = 'option-'+ option.cartOptionId; %>\n<div id=\"<%= htmlid %>-container\" class=\"<%= htmlid %>-container\" data-type=\"option\" data-cart-option-id=\"<%= option.cartOptionId %>\">\n\t<p class=\"option-label strong\">\n\t\t<%= option.label %><% if (selected_value) { %>: <span><%= selected_value.label %><\/span><% } %>\n\t<\/p>\n\t<ul id=\"<%= htmlid %>\" class=\"tiles color-tiles <%= htmlid %>\">\n\t\t<% _.each(option.values, function (item) { %>\n\t\t\t<% if (item.internalid) { %>\n\t\t\t\t<% \n\t\t\t\t\tvar is_active = selected_value && item.internalid == selected_value.internalid\n\t\t\t\t\t,\tis_available = item.isAvailable;\n\t\t\t\t%>\n\t\t\t\t<li class=\"<%= (is_active ? 'active' : '') +' '+ (is_available ? '' : 'muted') %>\">\n\t\t\t\t\t<% var color = option.colors && (option.colors[item.label] || option.colors.defaultColor); %>\n\t\t\t\t\t<a \n\t\t\t\t\t\thref=\"<%= item_model.get('_url') + '?' + option.url + '=' + encodeURIComponent(item.label) %>\" \n\t\t\t\t\t\tclass=\"tile\" \n\t\t\t\t\t\ttitle=\"<%= item.label %>\"\n\t\t\t\t\t\t<% if (!_.isObject(color)) { %>\n\t\t\t\t\t\t\tstyle=\"background: <%= color %>\"\n\t\t\t\t\t\t<% } %>\n\t\t\t\t\t\tdata-value=\"<%= item.internalid %>\" \n\t\t\t\t\t\tdata-toggle=\"set-option\" \n\t\t\t\t\t\tdata-active=\"<%= is_active %>\" \n\t\t\t\t\t\tdata-available=\"<%= is_available %>\">\n\t\t\t\t\t\t\t<% if (_.isObject(color) && color.type === 'image') { %>\n\t\t\t\t\t\t\t\t<img \n\t\t\t\t\t\t\t\t\tsrc=\"<%= color.src %>\" \n\t\t\t\t\t\t\t\t\talt=\"<%= item.label %>\"\n\t\t\t\t\t\t\t\t\twidth=\"<%= color.width || '' %>\" \n\t\t\t\t\t\t\t\t\theight=\"<%= color.height || '' %>\">\n\t\t\t\t\t\t\t<% } %>\n\t\t\t\t\t<\/a>\n\t\t\t\t<\/li>\n\t\t\t<% } %>\n\t\t<% }) %>\n\t<\/ul>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('promocodeForm', function( promocode ) { %>\n<% var is_invalid = !!( promocode && promocode.error ); %>\n<form class=\"form-inline\" data-action=\"apply-promocode\">\n\t<fieldset>\n\t\t<div class=\"control-group <%= is_invalid ? 'error' : '' %>\">\n\t\t\t<input\n\t\t\t\ttype=\"text\"\n\t\t\t\tname=\"promocode\"\n\t\t\t\tid=\"promocode\"\n\t\t\t\tclass=\"input-medium promocode\"\n\t\t\t\tvalue=\"<%- promocode && promocode.code %>\"\n\t\t\t\tplaceholder=\"<%- _('Promo code').translate() %>\"\n\t\t\t\trequired\n\t\t\t>\n\t\t\t<button type=\"submit\" class=\"btn\">\n\t\t\t\t<%= _('Apply').translate() %>\n\t\t\t<\/button>\n\t\t<\/div>\n\t\t<div data-type=\"promocode-error-placeholder\">\n\t\t<% if (is_invalid) { %>\n\t\t\t<%= SC.macros.message(promocode.error, 'error', true) %>\n\t\t<% } %>\n\t\t<\/div>\n\t<\/fieldset>\n<\/form>\n<% }) %>\n\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('shoppingCartItem', function(line, view, options) { %>\n<% \nvar item = line.get('item');\nvar truncateTitle = 100;\nvar addExtraDots = ( item.get('displayname').length < truncateTitle ) ? \"\" : \"...\";\noptions = _.extend({ showActions: true}, options || {});\n\nvar addArtistName = \"\";\nif ( item.get(\"custitem_artistname\") != \"Various Artists\" ) \n{\naddArtistName = \" - \" + item.get(\"custitem_artistname\");\n}\n\nvar url = _(item.get('_url')).fixUrl();\n\n\nif (url && SC.ENVIRONMENT.siteType === 'ADVANCED')\n{\n\tlink_attributes = SC.Utils.objectToAtrributes({\n\t\thref: url\n\t,\tdata: {\n\t\t\ttouchpoint: 'home'\n\t\t,\thashtag: '#'+url\n\t\t}\n\t});\n}\nelse if (url)\n{\n\tlink_attributes = SC.Utils.objectToAtrributes({\n\t\thref: url\n\t});\n}\n\n%>\n<article id=\"<%- line.get('internalid') %>\" class=\"cart-item-cell <%= line.get('internalid') %>\">\n\t<div data-type=\"alert-placeholder\">\n\t<% if (item.get('_cartCustomAlert')) {%>\n\t\t<div class=\"alert alert-<%= item.get('_cartCustomAlertType') || 'info' %>\">\n\t\t\t<%= item.get('_cartCustomAlert') %>\n\t\t<\/div>\n\t<% } %>\n\t<\/div>\n\t<div class=\"row-fluid\">\n\t\t<div class=\"span3 thumbnail cart-item-thumbnail\">\n\t\t\t<% var thumbnail = item.get('_thumbnail'); %>\n\t\t\t<% if (options.showActions) { %>\n\t\t\t\t<a href=\"<%= item.get(\"custitem_catalog_itemurl\")%>\">\n\t\t\t\t\t<img src=\"<%- view.options.application.resizeImage(thumbnail.url, 'thumbnail') %>\" alt=\"<%- thumbnail.altimagetext %>\">\n\t\t\t\t<\/a>\n\t\t\t<% } else { %>\n\t\t\t\t<img src=\"<%- view.options.application.resizeImage(thumbnail.url, 'thumbnail') %>\" alt=\"<%- thumbnail.altimagetext %>\">\n\t\t\t<% } %>\n\t\t<\/div>\n\t\t<div class=\"span9 details\">\n\t\t\t<div class=\"span9 cart-item-details\">\n\t\t\t\t<div class=\"name\">\n\t\t\t\t\t<% if (options.showActions) { %>\n\t\t\t\t\t\t<a href=\"<%= item.get(\"custitem_catalog_itemurl\")%>\">\n\t\t\t\t\t\t\t<%= item.get('displayname').substring(0,truncateTitle) + addExtraDots %>\n\t\t\t\t\t\t<\/a> <span class=\"artist-name\"><%=addArtistName%><\/span><\/a>\n\t\t\t\t\t<% } else { %>\n\t\t\t\t\t\t<%= item.get('displayname') %>\n\t\t\t\t\t<% } %>\n\t\t\t\t<\/div>\n\t\t\t\t<div class=\"lead lead-small price\">\n\t\t\t\t\t<%= SC.macros.showItemPrice(item) %>\n\t\t\t\t<\/div>\n\n\t\t\t\t<div class=\"sku\" style=\"display:none;\">\n\t\t\t\t\t<%= _('SKU: #$(0)').translate( item.get('_sku') ) %>\n\t\t\t\t<\/div>\n\n\t\t\t\t<div class=\"sku\">\n\t\t\t\t\t<%= _('Format:').translate() %> <%= item.get('storedescription2') %>\n\t\t\t\t<\/div>\n\n\t\t\t\t<div class=\"quantity-container\">\n\t\t\t\t<% if (options.showActions) { %>\n\t\t\t\t\t<form action=\"#\" data-action=\"update-quantity\">\n\t\t\t\t\t\t<input type=\"hidden\" name=\"internalid\" id=\"update-internalid-<%= line.get('internalid') %>\" class=\"update-internalid-<%= line.get('internalid') %>\" value=\"<%- line.get('internalid') %>\">\n\t\t\t\t\t\t<% if(item.get('_itemType') !== 'GiftCert') { %>\n\t\t\t\t\t\t\t<input type=\"number\" name=\"quantity\" id=\"quantity-<%= line.get('internalid') %>\" class=\"input-mini quantity-<%= line.get('internalid') %>\" value=\"<%- line.get('quantity') %>\" min=\"0\"> <button class=\"btn update\" data-action=\"update-item\" data-internalid=\"<%- line.get('internalid') %>\"><%= _('Update').translate() %><\/button>\n\t\t\t\t\t\t<% } else { %>\n\t\t\t\t\t\t\t<input type=\"hidden\" name=\"quantity\" id=\"quantity-<%= line.get('internalid') %>\" value=\"1\">\n\t\t\t\t\t\t<% } %>\n\t\t\t\t\t\t\n\t\t\t\t\t<\/form>\n\t\t\t\t<% } else { %>\n\t\t\t\t\t<%=_('Qty: $(0)').translate(line.get('quantity')) %>\n\t\t\t\t<% } %>\n\t\t\t\t<\/div>\n\t\t\t<\/div>\t\t\t\n\t\t\t\n\t\t\t<div class=\"span3 amount\">\n\t\t\t\t<%= line.get('total_formatted') %>\n\t\t\t\t<% if( line.get('amount') > line.get('total') ) {%>\n\t\t\t\t\t<small class=\"muted crossed\"><%=  line.get('amount_formatted') %><\/small>\n\t\t\t\t<% } %>\n\t\t\t<\/div>\n\t\t\t<div class=\"clearfix\"><\/div>\n\t\t\t<div class=\"text-right cart-item-stock-info\" style=\"display:none;\">\n\t\t\t\t<%= SC.macros.itemDetailsStock(item.getStockInfo()) %>\n\t\t\t<\/div>\n\t\t\t<% if (options.showActions) { %>\n\t\t\t\t<div class=\"cart-item-actions\">\n\t\t\t\t\t<% if (SC.ENVIRONMENT.siteType !== \"STANDARD\") { %>\n\t\t\t\t\t\t<a class=\"btn edit\" href=\"<%- _(item.get('_editUrl')).fixUrl() %>\" data-toggle=\"show-in-modal\">\n\t\t\t\t\t\t\t<%= _('Edit').translate() %>\n\t\t\t\t\t\t<\/a>\n\t\t\t\t\t<% } %>\n\t\t\t\t\t<button class=\"btn remove\" data-action=\"remove-item\" data-internalid=\"<%- line.get('internalid') %>\">\n\t\t\t\t\t\t<%= _('Remove').translate() %>\n\t\t\t\t\t<\/button>\n\t\t\t\t<\/div>\n\t\t\t<% } %>\n\t\t<\/div>\n\t<\/div>\n<\/article>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('shoppingCartOptionDefault', function (option, value, model) { %>\n<div>\n\t<%= option.label || option.name.replace(':', '') %>: <%= value.label %> \n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('shoppingCartSummary', function (cart, siteSettings, options) { %>\n<%\n    options = _.extend({ showShipto: true, showLabelsAsEstimated: true}, options || {});\n\n    var summary = cart.get('summary')\n    ,   promocode = cart.get('promocode')\n    ,   membercode = cart.get('promocode')\n    ,   item_count = _.reduce(cart.get('lines').pluck('quantity'), function (memo, quantity) { return memo + (parseFloat(quantity) || 1); }, 0)\n    ,   shipping_address = cart.get('addresses').get(cart.get('shipaddress')) || new Backbone.Model()\n    ,   show_total = summary.subtotal !== summary.total || options.alwaysShowTotal\n    ,   has_estimated_shipping = summary.estimatedshipping\n    ,   is_promocode_valid = promocode && promocode.isvalid\n    ,   is_member_valid = membercode && membercode.isvalid\n    ,   default_county = shipping_address.get('country') || siteSettings.defaultshipcountry\n    ,   giftcertificates = cart.get('paymentmethods').where({type: 'giftcertificate'}) || []\n    \/\/  Third party checkouts\n    ,   checkout = options.checkout || {}\n    ,   paypal_express = checkout.paypalexpress;\n%>\n<div class=\"well shopping-cart-summary\">\n    <header class=\"well-header\">\n        <h2>\n            <%= _('Order Summary').translate() %>\n        <\/h2>\n    <\/header>\n    \n    <div class=\"well-body accordion\">\n        <div class=\"well-section cart-summary-subtotal\">\n            <p class=\"strong\">\n                <span class=\"pull-right\"><%= summary.subtotal_formatted %><\/span>\n                <%= _('Subtotal ($(0) $(1))').translate( item_count, item_count === 1 ? _('item').translate() : _('items').translate() ) %>\n            <\/p>\n            <% if (!show_total) { %>\n                <p class=\"small\">\n                    <%= _('(Subtotal does not include shipping or tax)').translate() %>\n                <\/p>\n            <% } %>\n        <\/div>\n\n        <% if (is_promocode_valid || summary.giftcertapplied) { %>\n\n            <% if (is_promocode_valid) { %>\n                <div class=\"well-section cart-summary-promocode-applied\">\n\n                    <p>\n                        <strong class=\"lead-price pull-right\"><%= summary.discountrate_formatted %><\/strong>\n                        <% if (promocode.code == \"SIMEMBER\" ) { %><%= _('Member Discount').translate() %><% } else { %><%= _('Promo Code Discount').translate() %><% } %> <a href=\"#\" data-action=\"remove-promocode\"><i class=\"icon-remove\"><\/i><\/a>\n                    <\/p>\n\n<!--\n                    <p class=\"text-success\">\n                        #<%= promocode.code %> - <%= _('Instant Rebate').translate() %>\n                        <a href=\"#\" data-action=\"remove-promocode\">\n                            <i class=\"icon-remove\"><\/i>\n                        <\/a>\n                    <\/p>\n-->\n\n                <\/div>\n            <% } %>\n\n            <% if (summary.discounttotal) { %>\n                <div class=\"well-section cart-summary-discount-applied\">\n                    <p>\n                        <span class=\"pull-right\"><%= summary.discounttotal_formatted %><\/span>\n                        <%= _('Discount Total').translate() %>\n                    <\/p>\n                <\/div>\n            <% } %>\n\n            <% if (summary.giftcertapplied) { %>\n                <div class=\"well-section cart-summary-giftcertificate-applied\">\n                    <p>\n                        <%= _('Gift Certificates Applied ($(0))').translate(giftcertificates.length) %>\n                    <\/p>\n                    <% _.each(giftcertificates, function(giftCertificate) { %>\n                        <p>\n                            <span class=\"pull-right\"><%= _('-$(0)').translate(giftCertificate.get('giftcertificate').amountapplied_formatted) %><\/span>\n                            <span title=\"<%= giftCertificate.get('giftcertificate').code %>\"><%= SC.macros.formatPaymentMethod(giftCertificate) %><\/span>\n                        <\/p>\n                    <% }); %>\n                <\/div>\n            <% } %>\n        <% } %>\n\n        <% if (summary.estimatedshipping || shipping_address.get('zip')) { %>\n            <div class=\"well-section cart-summary-shipping-cost-applied\">\n                <% if (options.showShipto && shipping_address.get('zip')) { %>\n                    <p style=\"display:none\">\n                        <%= _('Ship to:').translate() %>\n                        <span class=\"text-success\"><%= shipping_address.get('zip') %><\/span>\n                        <a href=\"#\" data-action=\"remove-shipping-address\">\n                            <i class=\"icon-remove\"><\/i>\n                        <\/a>\n                    <\/p>\n                <% } %>\n                <p style=\"display:none\">\n                    <span class=\"pull-right\"><%= _.formatCurrency(summary.taxtotal + summary.shippingcost) %><\/span>\n                    <%= _('Estimated Shipping & Handling').translate() %>\n                <\/p>\n                <p style=\"display:none\">\n                    <span class=\"pull-right\"><%= _.formatCurrency(summary.handlingcost) %><\/span>\n                    <%= _('Handling').translate() %>\n                <\/p>\n\n                <p>\n                    <span class=\"pull-right\"><%= _.formatCurrency(summary.handlingcost + summary.shippingcost) %><\/span>\n                    <%= _('Shipping & Handling').translate() %>\n                <\/p>\n\n\n\n            <\/div>\n        <% } %>\n\n        <% if (show_total) { %>\n            <div class=\"well-section cart-summary-total\">\n                <p class=\"no-margin-bottom strong\">\n                    <span class=\"pull-right\"><%= summary.total_formatted %><\/span>\n                    <%= options.showLabelsAsEstimated ? _('Estimated Total').translate() : _('Total').translate() %>\n                <\/p>\n                <% if (!(summary.estimatedshipping || shipping_address.get('zip'))) { %>\n                    <p class=\"no-margin-bottom small\">\n                        <%= _('(Total does not include shipping or tax)').translate() %>\n                    <\/p>\n                <% } %>\n            <\/div>\n        <% } %>\n\n        <% if (!shipping_address.get('zip')) { %>\n            <div style=\"display:none\" class=\"collapsible well-section cart-summary-shipping-section\">\n                <p class=\"collapser collapsed\" data-toggle=\"collapse\" data-target=\"#estimate-shipping-form\">\n                    <%= _('Estimate Shipping & Handling').translate() %> <i data-toggle=\"tooltip\" title=\"<%= _('<b>Shipping Estimator<\/b><br>Shipping fees are based on your shipping location. Please enter your information to view estimated shipping costs.').translate() %>\" class=\"icon-question-sign\"><\/i>\n                    <i class=\"icon-minus-sign pull-right\"><\/i>\n                    <i class=\"icon-plus-sign pull-right\"><\/i>\n                <\/p>\n                <div id=\"estimate-shipping-form\" class=\"collapse estimate-shipping-form\">\n                    <form action=\"#\" data-action=\"estimate-tax-ship\">\n                        <fieldset>\n                            <% if (_.size(siteSettings.countries) > 1) { %>\n                                <div class=\"control-group\">\n                                    <label for=\"country\"><%= _('Select Country').translate() %><\/label>\n                                    <select name=\"country\" id=\"country\" class=\"input-medium country\" data-action=\"estimate-tax-ship-country\">\n                                        <option value=\"\"><\/option>\n                                        <% _.each(siteSettings.countries, function (item, index) { %>\n                                            <option value=\"<%= item.code %>\" <%= item.code === default_county ? 'selected' : '' %>><%= item.name %><\/option>\n                                        <% }) %>\n                                    <\/select>\n                                <\/div>\n                            <% } else { %>\n                                <span><%= _('Ship available only to $(0)').translate(_.toArray(siteSettings.countries)[0].name) %><\/span>\n                                <input name=\"country\" id=\"country\" class=\"country\" value=\"<%= _.toArray(siteSettings.countries)[0].code %>\" type=\"hidden\" \/>\n                            <% } %>\n                            <div class=\"control-group\">\n                                <label for=\"zip\">\n                                    <%= default_county === 'US' ? _('Ship to the following zip code').translate() : _('Ship to the following postal code').translate() %>\n                                <\/label>\n                                <div class=\"form-inline\">\n                                    <input type=\"text\" name=\"zip\" id=\"zip\" class=\"input-small zip\" value=\"<%= shipping_address.get('zip') || '' %>\" placeholder=\"<%= default_county === 'US' ?  _('Zip code').translate() : _('Postal code').translate() %>\">\n                                    <button class=\"btn\"><%= _('Estimate').translate() %><\/button>\n                                <\/div>\n                            <\/div>\n                        <\/fieldset>\n                    <\/form>\n                <\/div>\n            <\/div>\n        <% } %>\n\n        <% if (!is_promocode_valid) { %>\n            <div class=\"collapsible well-section cart-summary-promocode-section\">\n                <p class=\"collapser collapsed\" data-target=\"#promo-code-container\" data-toggle=\"collapse\">                  \n                    <i class=\"icon-minus-sign pull-right\"><\/i>\n                    <i class=\"icon-plus-sign pull-right\"><\/i>\n                    <%= _('Have a Promo Code?').translate() %> <i data-toggle=\"tooltip\" title=\"<%= _('<b>Promo Code<\/b><br>To redeem a promo code, simply enter your code below and we will apply the offer to your purchase during checkout.').translate() %>\" class=\"icon-question-sign\"><\/i>                 \n                <\/p>\n                <div id=\"promo-code-container\" class=\"collapse promo-code-container\">\n                    <%= SC.macros.promocodeForm( promocode ) %>\n                <\/div>\n            <\/div>\n        <% } %>\n\n\n        <% if (!is_member_valid) { %>\n            <div class=\"collapsible well-section cart-summary-member-section\">\n                <p class=\"collapser collapsed\" data-target=\"#member-code-container\" data-toggle=\"collapse\">                 \n                    <i class=\"icon-minus-sign pull-right\"><\/i>\n                    <i class=\"icon-plus-sign pull-right\"><\/i>\n                    <%= _('Are you an SI member?').translate() %> <i data-toggle=\"tooltip\" title=\"<%= _('<b>SI Members<\/b><br>National Associate Members receive a 10% discount.  Enter your member code below.').translate() %>\" class=\"icon-question-sign\"><\/i>                   \n                <\/p>\n                <div id=\"member-code-container\" class=\"collapse member-code-container\" style=\"padding: 0 18px;\">\n                    <%= SC.macros.membercodeForm( membercode ) %>\n                <p class=\"small\">\n                    If you'd like to become a member, please <a href=\"http:\/\/www.smithsonian.com\/folkways\/join\" target=\"_blank\">click here<\/a> to join and get your member number to save 10%.\n                <\/p>\n                <\/div>\n            <\/div>\n        <% } %>\n\n\n    <\/div>\n    \n    <% if (options.showActions) { %>\n        <div class=\"well-footer shopping-cart-action-buttons\">\n            <a id=\"btn-proceed-checkout\" class=\"btn btn-large btn-block btn-primary btn-proceed-checkout\" href=\"#\" data-touchpoint=\"checkout\" data-hashtag=\"#\">\n                <%= _('Proceed to Checkout').translate() %>\n            <\/a>\n\n            <!--\n            <% if (paypal_express.available === 'T') { %>\n                <a href=\"#\" data-touchpoint=\"checkout\" data-hashtag=\"#\" data-parameters=\"paypalexpress=T\">\n                    <img src=\"<%= paypal_express.imageurl %>\" alt=\"PayPal Express\" width=\"145px\" height=\"42px\">\n                <\/a>\n            <% } %>\n            -->\n\n        <\/div>\n    <% } %>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('shoppingCartOptionColor', function (option, value, model) { %>\n<div>\n\t<%= option.label || option.name.replace(':', '') %>: \n\t<% var color = option.colors && (option.colors[value.label] || option.colors.defaultColor); %>\n\t<span \n\t\t<% if (!_.isObject(color)) { %>\n\t\t\tstyle=\"background: <%= color %>\"\n\t\t<% } %>\n\t\tclass=\"cart-color-tile\">\n\t\t\t<% if (_.isObject(color) && color.type === 'image') { %>\n\t\t\t\t<img \n\t\t\t\t\tsrc=\"<%- color.src %>\" \n\t\t\t\t\talt=\"<%- value.label %>\"\n\t\t\t\t\twidth=\"<%- color.width || '' %>\" \n\t\t\t\t\theight=\"<%- color.height || '' %>\">\n\t\t\t<% } %>\t\n\t<\/span> <%= value.label %>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('membercodeForm', function( membercode ) { %>\n\n<% var is_invalid = !!( membercode && membercode.error ); %>\n\n<form class=\"form-inline\" style=\"margin-bottom:5px!important\" data-action=\"apply-membercode\">\n\t<fieldset>\n\t\t<div class=\"control-group <%= is_invalid ? 'error' : '' %>\">\n\t\t\t<input\n\t\t\t\ttype=\"text\"\n\t\t\t\tname=\"membercode\"\n\t\t\t\tid=\"membercode\"\n\t\t\t\tclass=\"input-medium membercode\"\n\t\t\t\tvalue=\"<%- membercode && membercode.code %>\"\n\t\t\t\tplaceholder=\"<%- _('SI Member Code').translate() %>\"\n\t\t\t\trequired\n\t\t\t>\n\t\t\t<button type=\"submit\" class=\"btn\">\n\t\t\t\t<%= _('Apply').translate() %>\n\t\t\t<\/button>\n\t\t<\/div>\n\t\t<div data-type=\"membercode-error-placeholder\">\n\t\t<% if (is_invalid) { %>\n\t\t\t<%= SC.macros.message(membercode.error, 'error', true) %>\n\t\t<% } %>\n\t\t<\/div>\n\t<\/fieldset>\n<\/form>\n\n<% }) %>\n\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('checkoutCartSummary', function (options) { %>\n<%\n\tvar cart = options.cart\n\t,\tsummary = cart.get('summary')\n\t,\tpromocode = cart.get('promocode')\n\t,\tmembercode = cart.get('promocode')\n\t,\ttruncateTitle = 100\n\t,\titem_count = _.reduce(cart.get('lines').pluck('quantity'), function (memo, quantity) { return memo + (parseFloat(quantity) || 1); }, 0)\n\t,\tis_promocode_valid = promocode && promocode.isvalid\n\t,\tis_member_valid = membercode && membercode.isvalid\n\t,\tgiftcertificates = cart.get('paymentmethods').where({type: 'giftcertificate'}) || []; \n\n\n%>\n<div class=\"checkout-cart-summary\">\n\t<header class=\"checkout-cart-summary-header\">\n\t\t<% if (options.stepPosition.toLast > 0) { %>\n\t\t\t<a href=\"#\" class=\"btn btn-link btn-edit-cart pull-right\" data-touchpoint=\"viewcart\">\n\t\t\t\t<%= _('Edit Order').translate() %>\n\t\t\t<\/a>\n\t\t<% } %>\n\n\t\t<h2 class=\"checkout-cart-summary-title\">\n\t\t\t<%= _('Order Summary').translate() %>\n\t\t<\/h2>\n\t<\/header>\n\t\n\t<div class=\"checkout-cart-summary-body\">\n\t\t<% if (!options.hideItems) { %>\n\t\t<ul class=\"cart-summary-items checkout-summary-items\">\n\t\t<%\n\t\t\tvar thumbnail = ''\n\t\t\t,\titem = null;\n\t\t%>\n\t\t<% cart.get('lines').each(function (line) { %>\n\t\t\t<%\n\t\t\t\titem = line.get('item');\n\t\t\t\tthumbnail = item.get('_thumbnail');\n\t\t\t\taddExtraDots = ( item.get('displayname').length < truncateTitle ) ? \"\" : \"...\";\n\nvar addArtistName = \"\";\nif ( item.get(\"custitem_artistname\") != \"Various Artists\" ) \n{\naddArtistName = \" - \" + item.get(\"custitem_artistname\");\n}\n\n\n\t\t\t%>\n\t\t\t<li class=\"cart-summary-item-cell checkout-summary-item-cell\">\n\t\t\t\t<div class=\"row-fluid\">\n\t\t\t\t\t<div class=\"span3 thumbnail checkout-summary-item-thumbnail\">\n\t\t\t\t\t\t<a href=\"<%= item.get(\"custitem_catalog_itemurl\")%>\"><img src=\"<%- options.application.resizeImage(thumbnail.url, 'tinythumb') %>\" alt=\"<%- thumbnail.altimagetext %>\"><\/a>\n\t\t\t\t\t<\/div>\n\t\t\t\t\t<div class=\"span9 cart-summary-item-details checkout-summary-item-details\">\n\t\t\t\t\t\t<div class=\"pull-right cart-summary-item-total\">\n\t\t\t\t\t\t\t<%= line.get('total_formatted') %>\n\t\t\t\t\t\t\t<% if (line.get('amount') > line.get('total')) {%>\n\t\t\t\t\t\t\t\t<small class=\"muted crossed cart-summary-item-amount\">\n\t\t\t\t\t\t\t\t\t<%=  line.get('amount_formatted') %>\n\t\t\t\t\t\t\t\t<\/small>\n\t\t\t\t\t\t\t<% } %>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<div>\n\n\t\t\t\t\t\t\t<strong class=\"cart-summary-item-name\">\n\t\t\t\t\t\t\t\t<a href=\"<%= item.get(\"custitem_catalog_itemurl\")%>\"><%= item.get('displayname').substring(0,truncateTitle) + addExtraDots %><\/a> <span class=\"artist-name\" style=\"display: none;\"><%=addArtistName%><\/span> <\/a>\n\t\t\t\t\t\t\t<\/strong>\n\n\t\t\t\t\t\t\t<p class=\"cart-summary-item-sku\"><%= _('Format:').translate() %> <%= item.get('storedescription2') %><\/p>\n\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<div class=\"cart-summary-item-quantity\">\n\t\t\t\t\t\t\t<%= _('Qty: $(0)').translate(line.get('quantity')) %>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<div class=\"cart-summary-item-price\">\n\t\t\t\t\t\t\t<%= SC.macros.showItemPrice(line.get('item')) %>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<%= \/* Renders the selected options for the item *\/ \n\t\t\t\t\t\t\titem.renderAllOptionSelected() %>\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t<\/li>\n\t\t<% }) %>\n\t\t<\/ul>\n\t\t<% } %>\n\t\t<div class=\"cart-summary-subtotal\">\n\t\t\t<p class=\"strong\">\n\t\t\t\t<span class=\"pull-right cart-summary-subtotal-formatted\">\n\t\t\t\t\t<%= summary.subtotal_formatted %>\n\t\t\t\t<\/span>\n\t\t\t\t<span class=\"cart-summary-subtotal-label\">\n\t\t\t\t\t<%= _('Subtotal ($(0) $(1))').translate(item_count, item_count === 1 ? _('item').translate() : _('items').translate()) %>\n\t\t\t\t<\/span>\n\t\t\t<\/p>\n\t\t<\/div>\n\n\t\t<% if (is_promocode_valid || summary.giftcertapplied) { %>\n\n\n\t\t\t<% if (is_promocode_valid) { %>\n\t\t\t\t<div class=\"cart-summary-promocode-applied\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<strong class=\"lead-price pull-right\"><%= summary.discountrate_formatted %><\/strong>\n\t\t\t\t\t\t<% if (promocode.code == \"SIMEMBER\" ) { %><%= _('Member Discount').translate() %><% } else { %><%= _('Promo Code Discount').translate() %><% } %> <a href=\"#\" data-action=\"remove-promocode\"><i class=\"icon-remove\"><\/i><\/a>\n\t\t\t\t\t<\/p>\n\t\t\t\t<\/div>\n\t\t\t<% } %>\n\n\t\t\t<% if (summary.discounttotal) { %>\n\t\t\t<div class=\"cart-summary-discount-applied\">\n\t\t\t\t<p>\n\t\t\t\t\t<span class=\"pull-right\">\n\t\t\t\t\t\t<%= summary.discounttotal_formatted %>\n\t\t\t\t\t<\/span>\n\t\t\t\t\t<%= _('Discount Total').translate() %>\n\t\t\t\t<\/p>\n\t\t\t<\/div>\n\t\t\t<% } %>\n\n\t\t\t<% if (summary.giftcertapplied) { %>\n\t\t\t<div class=\"cart-summary-giftcertificate-applied\">\n\t\t\t\t<p>\n\t\t\t\t\t<%= _('Gift Certificates Applied ($(0))').translate(giftcertificates.length) %>\n\t\t\t\t<\/p>\n\t\t\t\t<% _.each(giftcertificates, function (giftCertificate) { %>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<span class=\"pull-right\">\n\t\t\t\t\t\t\t<%= _('-$(0)').translate(giftCertificate.get('giftcertificate').amountapplied_formatted) %>\n\t\t\t\t\t\t<\/span>\n\t\t\t\t\t\t<span title=\"<%- giftCertificate.get('giftcertificate').code %>\">\n\t\t\t\t\t\t\t<%= SC.macros.formatPaymentMethod(giftCertificate) %>\n\t\t\t\t\t\t<\/span>\n\t\t\t\t\t<\/p>\n\t\t\t\t<% }); %>\n\t\t\t\t<\/div>\n\t\t\t<% } %>\n\t\t<% } %>\n\n\t\t<div class=\"cart-summary-shipping-cost-applied\">\n\t\t\t<p>\n\t\t\t\t<span class=\"pull-right cart-summary-shipping-cost-formatted\">\n\t\t\t\t\t<%= _.formatCurrency(summary.handlingcost + summary.shippingcost) %>\n\t\t\t\t<\/span>\n\t\t\t\t<%= _('Shipping & Handling').translate() %>\n\t\t\t<\/p>\n\n\t\t\t<p style=\"display:none;\">\n\t\t\t\t<span class=\"pull-right cart-summary-shipping-cost-formatted\">\n\t\t\t\t\t<%= summary.shippingcost_formatted %>\n\t\t\t\t<\/span>\n\t\t\t\t<%= _('Shipping').translate() %>\n\t\t\t<\/p>\n\n\t\t\t<% if (summary.handlingcost) { %>\n\t\t\t<p style=\"display:none;\">\n\t\t\t\t<span class=\"pull-right cart-summary-handling-cost-formatted\">\n\t\t\t\t\t<%= summary.handlingcost_formatted %>\n\t\t\t\t<\/span>\n\t\t\t\t<%= _('Handling').translate() %>\n\t\t\t<\/p>\n\t\t\t<% } %>\n\n\t\t\t<p style=\"display:none;\">\n\t\t\t\t<span class=\"pull-right cart-summary-tax-total-formatted\">\n\t\t\t\t\t<%= summary.taxtotal_formatted %>\n\t\t\t\t<\/span>\n\t\t\t\t<%= _('Tax').translate() %>\n\t\t\t<\/p>\n\t\t<\/div>\n\n\t\t<div class=\"cart-summary-total\">\n\t\t\t<p class=\"strong\">\n\t\t\t\t<span class=\"pull-right cart-summary-total-formatted\">\n\t\t\t\t\t<%= summary.total_formatted %>\n\t\t\t\t<\/span>\n\t\t\t\t<%= _('Total').translate() %>\n\t\t\t<\/p>\n\t\t<\/div>\n\n\t<% if (options.stepPosition.toLast === 1) { %>\n\t\t<div>\n\t\t<% if (SC.ENVIRONMENT.siteSettings.checkout.requiretermsandconditions === 'T') { %>\n\t\t\t<p><%= _('By placing your order, you are agree to our <a data-toggle=\"show-terms-summary\" href=\"#\">Terms & Conditions<\/a>').translate() %><\/p><br\/>\n\t\t<% } %>\n\t\t\t<button class=\"btn btn-primary btn-large btn-place-order\" data-action=\"submit-step\">\n\t\t\t\t<%= options.continueButtonLabel %>\n\t\t\t<\/button>\n\t\t<\/div>\n\t<% } %>\n\t<\/div>\n\n\t<% if (!is_promocode_valid && options.stepPosition.toLast > 0) { %>\n\t<footer class=\"checkout-cart-summary-footer accordion\">\n\t\t<div class=\"collapsible\">\n\t\t\t<p class=\"collapser collapsed\" data-target=\"#promo-code-container\" data-toggle=\"collapse\">\t\t\t\t\t\n\t\t\t\t<i class=\"icon-minus-sign pull-right\"><\/i>\n\t\t\t\t<i class=\"icon-plus-sign pull-right\"><\/i>\n\t\t\t\t<%= _('Have a Promo Code?').translate() %>\n\t\t\t\t<i class=\"icon-question-sign\"\n\t\t\t\t\tdata-toggle=\"tooltip\"\n\t\t\t\t\ttitle=\"<%= _('<b>Promo Code<\/b><br>To redeem a promo code, simply enter your code below and we will apply the offer to your purchase during checkout.').translate() %>\">\n\t\t\t\t<\/i>\n\t\t\t<\/p>\n\t\t\t<div id=\"promo-code-container\" class=\"collapse promo-code-container\">\n\t\t\t\t<%= SC.macros.promocodeForm(promocode) %>\n\t\t\t<\/div>\n\t\t<\/div>\n\t<\/footer>\n\t<% } %>\n\n\n\t<% if (!is_member_valid && options.stepPosition.toLast > 0) { %>\n\t<footer class=\"checkout-cart-summary-footer accordion\">\n\t\t<div class=\"collapsible\">\n\t\t\t<div class=\"collapsible well-section cart-summary-member-section\" style=\"padding:0px;\">\n\t\t\t\t<p class=\"collapser collapsed\" data-target=\"#member-code-container\" data-toggle=\"collapse\">\t\t\t\t\t\n\t\t\t\t\t<i class=\"icon-minus-sign pull-right\"><\/i>\n\t\t\t\t\t<i class=\"icon-plus-sign pull-right\"><\/i>\n\t\t\t\t\t<%= _('Are you an SI member?').translate() %> <i data-toggle=\"tooltip\" title=\"<%= _('<b>SI Members<\/b><br>National Associate Members receive a 10% discount.  Enter your member code below.').translate() %>\" class=\"icon-question-sign\"><\/i>\t\t\t\t\t\n\t\t\t\t<\/p>\n\t\t\t\t<div id=\"member-code-container\" class=\"collapse member-code-container\" style=\"padding: 0 18px;\">\n\t\t\t\t\t<%= SC.macros.membercodeForm( membercode ) %>\n                <p class=\"small\">\n                    If you'd like to become a member, please <a href=\"http:\/\/www.smithsonian.com\/folkways\/join\" target=\"_blank\">click here<\/a> to join and get your member number to save 10%.\n                <\/p>\n\t\t\t\t<\/div>\n\t\t\t<\/div>\n                 <\/div>\n\t<\/footer>\n\t<% } %>\n\n<\/div>\n<% }) %>\n\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('promocodeForm', function( promocode ) { %>\n<% var is_invalid = !!( promocode && promocode.error ); %>\n<form class=\"form-inline\" data-action=\"apply-promocode\">\n\t<fieldset>\n\t\t<div class=\"control-group <%= is_invalid ? 'error' : '' %>\">\n\t\t\t<input\n\t\t\t\ttype=\"text\"\n\t\t\t\tname=\"promocode\"\n\t\t\t\tid=\"promocode\"\n\t\t\t\tclass=\"input-medium promocode\"\n\t\t\t\tvalue=\"<%- promocode && promocode.code %>\"\n\t\t\t\tplaceholder=\"<%- _('Promo code').translate() %>\"\n\t\t\t\trequired\n\t\t\t>\n\t\t\t<button type=\"submit\" class=\"btn\">\n\t\t\t\t<%= _('Apply').translate() %>\n\t\t\t<\/button>\n\t\t<\/div>\n\t\t<div data-type=\"promocode-error-placeholder\">\n\t\t<% if (is_invalid) { %>\n\t\t\t<%= SC.macros.message(promocode.error, 'error', true) %>\n\t\t<% } %>\n\t\t<\/div>\n\t<\/fieldset>\n<\/form>\n<% }) %>\n\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('shoppingCartItem', function(line, view, options) { %>\n<% \nvar item = line.get('item');\nvar truncateTitle = 100;\nvar addExtraDots = ( item.get('displayname').length < truncateTitle ) ? \"\" : \"...\";\noptions = _.extend({ showActions: true}, options || {});\n\nvar addArtistName = \"\";\nif ( item.get(\"custitem_artistname\") != \"Various Artists\" ) \n{\naddArtistName = \" - \" + item.get(\"custitem_artistname\");\n}\n\nvar url = _(item.get('_url')).fixUrl();\n\n\nif (url && SC.ENVIRONMENT.siteType === 'ADVANCED')\n{\n\tlink_attributes = SC.Utils.objectToAtrributes({\n\t\thref: url\n\t,\tdata: {\n\t\t\ttouchpoint: 'home'\n\t\t,\thashtag: '#'+url\n\t\t}\n\t});\n}\nelse if (url)\n{\n\tlink_attributes = SC.Utils.objectToAtrributes({\n\t\thref: url\n\t});\n}\n\n%>\n<article id=\"<%- line.get('internalid') %>\" class=\"cart-item-cell <%= line.get('internalid') %>\">\n\t<div data-type=\"alert-placeholder\">\n\t<% if (item.get('_cartCustomAlert')) {%>\n\t\t<div class=\"alert alert-<%= item.get('_cartCustomAlertType') || 'info' %>\">\n\t\t\t<%= item.get('_cartCustomAlert') %>\n\t\t<\/div>\n\t<% } %>\n\t<\/div>\n\t<div class=\"row-fluid\">\n\t\t<div class=\"span3 thumbnail cart-item-thumbnail\">\n\t\t\t<% var thumbnail = item.get('_thumbnail'); %>\n\t\t\t<% if (options.showActions) { %>\n\t\t\t\t<a href=\"<%= item.get(\"custitem_catalog_itemurl\")%>\">\n\t\t\t\t\t<img src=\"<%- view.options.application.resizeImage(thumbnail.url, 'thumbnail') %>\" alt=\"<%- thumbnail.altimagetext %>\">\n\t\t\t\t<\/a>\n\t\t\t<% } else { %>\n\t\t\t\t<img src=\"<%- view.options.application.resizeImage(thumbnail.url, 'thumbnail') %>\" alt=\"<%- thumbnail.altimagetext %>\">\n\t\t\t<% } %>\n\t\t<\/div>\n\t\t<div class=\"span9 details\">\n\t\t\t<div class=\"span9 cart-item-details\">\n\t\t\t\t<div class=\"name\">\n\t\t\t\t\t<% if (options.showActions) { %>\n\t\t\t\t\t\t<a href=\"<%= item.get(\"custitem_catalog_itemurl\")%>\">\n\t\t\t\t\t\t\t<%= item.get('displayname').substring(0,truncateTitle) + addExtraDots %>\n\t\t\t\t\t\t<\/a> <span class=\"artist-name\"><%=addArtistName%><\/span><\/a>\n\t\t\t\t\t<% } else { %>\n\t\t\t\t\t\t<%= item.get('displayname') %>\n\t\t\t\t\t<% } %>\n\t\t\t\t<\/div>\n\t\t\t\t<div class=\"lead lead-small price\">\n\t\t\t\t\t<%= SC.macros.showItemPrice(item) %>\n\t\t\t\t<\/div>\n\n\t\t\t\t<div class=\"sku\" style=\"display:none;\">\n\t\t\t\t\t<%= _('SKU: #$(0)').translate( item.get('_sku') ) %>\n\t\t\t\t<\/div>\n\n\t\t\t\t<div class=\"sku\">\n\t\t\t\t\t<%= _('Format:').translate() %> <%= item.get('storedescription2') %>\n\t\t\t\t<\/div>\n\n\t\t\t\t<div class=\"quantity-container\">\n\t\t\t\t<% if (options.showActions) { %>\n\t\t\t\t\t<form action=\"#\" data-action=\"update-quantity\">\n\t\t\t\t\t\t<input type=\"hidden\" name=\"internalid\" id=\"update-internalid-<%= line.get('internalid') %>\" class=\"update-internalid-<%= line.get('internalid') %>\" value=\"<%- line.get('internalid') %>\">\n\t\t\t\t\t\t<% if(item.get('_itemType') !== 'GiftCert') { %>\n\t\t\t\t\t\t\t<input type=\"number\" name=\"quantity\" id=\"quantity-<%= line.get('internalid') %>\" class=\"input-mini quantity-<%= line.get('internalid') %>\" value=\"<%- line.get('quantity') %>\" min=\"0\"> <button class=\"btn update\" data-action=\"update-item\" data-internalid=\"<%- line.get('internalid') %>\"><%= _('Update').translate() %><\/button>\n\t\t\t\t\t\t<% } else { %>\n\t\t\t\t\t\t\t<input type=\"hidden\" name=\"quantity\" id=\"quantity-<%= line.get('internalid') %>\" value=\"1\">\n\t\t\t\t\t\t<% } %>\n\t\t\t\t\t\t\n\t\t\t\t\t<\/form>\n\t\t\t\t<% } else { %>\n\t\t\t\t\t<%=_('Qty: $(0)').translate(line.get('quantity')) %>\n\t\t\t\t<% } %>\n\t\t\t\t<\/div>\n\t\t\t<\/div>\t\t\t\n\t\t\t\n\t\t\t<div class=\"span3 amount\">\n\t\t\t\t<%= line.get('total_formatted') %>\n\t\t\t\t<% if( line.get('amount') > line.get('total') ) {%>\n\t\t\t\t\t<small class=\"muted crossed\"><%=  line.get('amount_formatted') %><\/small>\n\t\t\t\t<% } %>\n\t\t\t<\/div>\n\t\t\t<div class=\"clearfix\"><\/div>\n\t\t\t<div class=\"text-right cart-item-stock-info\" style=\"display:none;\">\n\t\t\t\t<%= SC.macros.itemDetailsStock(item.getStockInfo()) %>\n\t\t\t<\/div>\n\t\t\t<% if (options.showActions) { %>\n\t\t\t\t<div class=\"cart-item-actions\">\n\t\t\t\t\t<% if (SC.ENVIRONMENT.siteType !== \"STANDARD\") { %>\n\t\t\t\t\t\t<a class=\"btn edit\" href=\"<%- _(item.get('_editUrl')).fixUrl() %>\" data-toggle=\"show-in-modal\">\n\t\t\t\t\t\t\t<%= _('Edit').translate() %>\n\t\t\t\t\t\t<\/a>\n\t\t\t\t\t<% } %>\n\t\t\t\t\t<button class=\"btn remove\" data-action=\"remove-item\" data-internalid=\"<%- line.get('internalid') %>\">\n\t\t\t\t\t\t<%= _('Remove').translate() %>\n\t\t\t\t\t<\/button>\n\t\t\t\t<\/div>\n\t\t\t<% } %>\n\t\t<\/div>\n\t<\/div>\n<\/article>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('shoppingCartOptionDefault', function (option, value, model) { %>\n<div>\n\t<%= option.label || option.name.replace(':', '') %>: <%= value.label %> \n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('shoppingCartSummary', function (cart, siteSettings, options) { %>\n<%\n    options = _.extend({ showShipto: true, showLabelsAsEstimated: true}, options || {});\n\n    var summary = cart.get('summary')\n    ,   promocode = cart.get('promocode')\n    ,   membercode = cart.get('promocode')\n    ,   item_count = _.reduce(cart.get('lines').pluck('quantity'), function (memo, quantity) { return memo + (parseFloat(quantity) || 1); }, 0)\n    ,   shipping_address = cart.get('addresses').get(cart.get('shipaddress')) || new Backbone.Model()\n    ,   show_total = summary.subtotal !== summary.total || options.alwaysShowTotal\n    ,   has_estimated_shipping = summary.estimatedshipping\n    ,   is_promocode_valid = promocode && promocode.isvalid\n    ,   is_member_valid = membercode && membercode.isvalid\n    ,   default_county = shipping_address.get('country') || siteSettings.defaultshipcountry\n    ,   giftcertificates = cart.get('paymentmethods').where({type: 'giftcertificate'}) || []\n    \/\/  Third party checkouts\n    ,   checkout = options.checkout || {}\n    ,   paypal_express = checkout.paypalexpress;\n%>\n<div class=\"well shopping-cart-summary\">\n    <header class=\"well-header\">\n        <h2>\n            <%= _('Order Summary').translate() %>\n        <\/h2>\n    <\/header>\n    \n    <div class=\"well-body accordion\">\n        <div class=\"well-section cart-summary-subtotal\">\n            <p class=\"strong\">\n                <span class=\"pull-right\"><%= summary.subtotal_formatted %><\/span>\n                <%= _('Subtotal ($(0) $(1))').translate( item_count, item_count === 1 ? _('item').translate() : _('items').translate() ) %>\n            <\/p>\n            <% if (!show_total) { %>\n                <p class=\"small\">\n                    <%= _('(Subtotal does not include shipping or tax)').translate() %>\n                <\/p>\n            <% } %>\n        <\/div>\n\n        <% if (is_promocode_valid || summary.giftcertapplied) { %>\n\n            <% if (is_promocode_valid) { %>\n                <div class=\"well-section cart-summary-promocode-applied\">\n\n                    <p>\n                        <strong class=\"lead-price pull-right\"><%= summary.discountrate_formatted %><\/strong>\n                        <% if (promocode.code == \"SIMEMBER\" ) { %><%= _('Member Discount').translate() %><% } else { %><%= _('Promo Code Discount').translate() %><% } %> <a href=\"#\" data-action=\"remove-promocode\"><i class=\"icon-remove\"><\/i><\/a>\n                    <\/p>\n\n<!--\n                    <p class=\"text-success\">\n                        #<%= promocode.code %> - <%= _('Instant Rebate').translate() %>\n                        <a href=\"#\" data-action=\"remove-promocode\">\n                            <i class=\"icon-remove\"><\/i>\n                        <\/a>\n                    <\/p>\n-->\n\n                <\/div>\n            <% } %>\n\n            <% if (summary.discounttotal) { %>\n                <div class=\"well-section cart-summary-discount-applied\">\n                    <p>\n                        <span class=\"pull-right\"><%= summary.discounttotal_formatted %><\/span>\n                        <%= _('Discount Total').translate() %>\n                    <\/p>\n                <\/div>\n            <% } %>\n\n            <% if (summary.giftcertapplied) { %>\n                <div class=\"well-section cart-summary-giftcertificate-applied\">\n                    <p>\n                        <%= _('Gift Certificates Applied ($(0))').translate(giftcertificates.length) %>\n                    <\/p>\n                    <% _.each(giftcertificates, function(giftCertificate) { %>\n                        <p>\n                            <span class=\"pull-right\"><%= _('-$(0)').translate(giftCertificate.get('giftcertificate').amountapplied_formatted) %><\/span>\n                            <span title=\"<%= giftCertificate.get('giftcertificate').code %>\"><%= SC.macros.formatPaymentMethod(giftCertificate) %><\/span>\n                        <\/p>\n                    <% }); %>\n                <\/div>\n            <% } %>\n        <% } %>\n\n        <% if (summary.estimatedshipping || shipping_address.get('zip')) { %>\n            <div class=\"well-section cart-summary-shipping-cost-applied\">\n                <% if (options.showShipto && shipping_address.get('zip')) { %>\n                    <p style=\"display:none\">\n                        <%= _('Ship to:').translate() %>\n                        <span class=\"text-success\"><%= shipping_address.get('zip') %><\/span>\n                        <a href=\"#\" data-action=\"remove-shipping-address\">\n                            <i class=\"icon-remove\"><\/i>\n                        <\/a>\n                    <\/p>\n                <% } %>\n                <p style=\"display:none\">\n                    <span class=\"pull-right\"><%= _.formatCurrency(summary.taxtotal + summary.shippingcost) %><\/span>\n                    <%= _('Estimated Shipping & Handling').translate() %>\n                <\/p>\n                <p style=\"display:none\">\n                    <span class=\"pull-right\"><%= _.formatCurrency(summary.handlingcost) %><\/span>\n                    <%= _('Handling').translate() %>\n                <\/p>\n\n                <p>\n                    <span class=\"pull-right\"><%= _.formatCurrency(summary.handlingcost + summary.shippingcost) %><\/span>\n                    <%= _('Shipping & Handling').translate() %>\n                <\/p>\n\n\n\n            <\/div>\n        <% } %>\n\n        <% if (show_total) { %>\n            <div class=\"well-section cart-summary-total\">\n                <p class=\"no-margin-bottom strong\">\n                    <span class=\"pull-right\"><%= summary.total_formatted %><\/span>\n                    <%= options.showLabelsAsEstimated ? _('Estimated Total').translate() : _('Total').translate() %>\n                <\/p>\n                <% if (!(summary.estimatedshipping || shipping_address.get('zip'))) { %>\n                    <p class=\"no-margin-bottom small\">\n                        <%= _('(Total does not include shipping or tax)').translate() %>\n                    <\/p>\n                <% } %>\n            <\/div>\n        <% } %>\n\n        <% if (!shipping_address.get('zip')) { %>\n            <div style=\"display:none\" class=\"collapsible well-section cart-summary-shipping-section\">\n                <p class=\"collapser collapsed\" data-toggle=\"collapse\" data-target=\"#estimate-shipping-form\">\n                    <%= _('Estimate Shipping & Handling').translate() %> <i data-toggle=\"tooltip\" title=\"<%= _('<b>Shipping Estimator<\/b><br>Shipping fees are based on your shipping location. Please enter your information to view estimated shipping costs.').translate() %>\" class=\"icon-question-sign\"><\/i>\n                    <i class=\"icon-minus-sign pull-right\"><\/i>\n                    <i class=\"icon-plus-sign pull-right\"><\/i>\n                <\/p>\n                <div id=\"estimate-shipping-form\" class=\"collapse estimate-shipping-form\">\n                    <form action=\"#\" data-action=\"estimate-tax-ship\">\n                        <fieldset>\n                            <% if (_.size(siteSettings.countries) > 1) { %>\n                                <div class=\"control-group\">\n                                    <label for=\"country\"><%= _('Select Country').translate() %><\/label>\n                                    <select name=\"country\" id=\"country\" class=\"input-medium country\" data-action=\"estimate-tax-ship-country\">\n                                        <option value=\"\"><\/option>\n                                        <% _.each(siteSettings.countries, function (item, index) { %>\n                                            <option value=\"<%= item.code %>\" <%= item.code === default_county ? 'selected' : '' %>><%= item.name %><\/option>\n                                        <% }) %>\n                                    <\/select>\n                                <\/div>\n                            <% } else { %>\n                                <span><%= _('Ship available only to $(0)').translate(_.toArray(siteSettings.countries)[0].name) %><\/span>\n                                <input name=\"country\" id=\"country\" class=\"country\" value=\"<%= _.toArray(siteSettings.countries)[0].code %>\" type=\"hidden\" \/>\n                            <% } %>\n                            <div class=\"control-group\">\n                                <label for=\"zip\">\n                                    <%= default_county === 'US' ? _('Ship to the following zip code').translate() : _('Ship to the following postal code').translate() %>\n                                <\/label>\n                                <div class=\"form-inline\">\n                                    <input type=\"text\" name=\"zip\" id=\"zip\" class=\"input-small zip\" value=\"<%= shipping_address.get('zip') || '' %>\" placeholder=\"<%= default_county === 'US' ?  _('Zip code').translate() : _('Postal code').translate() %>\">\n                                    <button class=\"btn\"><%= _('Estimate').translate() %><\/button>\n                                <\/div>\n                            <\/div>\n                        <\/fieldset>\n                    <\/form>\n                <\/div>\n            <\/div>\n        <% } %>\n\n        <% if (!is_promocode_valid) { %>\n            <div class=\"collapsible well-section cart-summary-promocode-section\">\n                <p class=\"collapser collapsed\" data-target=\"#promo-code-container\" data-toggle=\"collapse\">                  \n                    <i class=\"icon-minus-sign pull-right\"><\/i>\n                    <i class=\"icon-plus-sign pull-right\"><\/i>\n                    <%= _('Have a Promo Code?').translate() %> <i data-toggle=\"tooltip\" title=\"<%= _('<b>Promo Code<\/b><br>To redeem a promo code, simply enter your code below and we will apply the offer to your purchase during checkout.').translate() %>\" class=\"icon-question-sign\"><\/i>                 \n                <\/p>\n                <div id=\"promo-code-container\" class=\"collapse promo-code-container\">\n                    <%= SC.macros.promocodeForm( promocode ) %>\n                <\/div>\n            <\/div>\n        <% } %>\n\n\n        <% if (!is_member_valid) { %>\n            <div class=\"collapsible well-section cart-summary-member-section\">\n                <p class=\"collapser collapsed\" data-target=\"#member-code-container\" data-toggle=\"collapse\">                 \n                    <i class=\"icon-minus-sign pull-right\"><\/i>\n                    <i class=\"icon-plus-sign pull-right\"><\/i>\n                    <%= _('Are you an SI member?').translate() %> <i data-toggle=\"tooltip\" title=\"<%= _('<b>SI Members<\/b><br>National Associate Members receive a 10% discount.  Enter your member code below.').translate() %>\" class=\"icon-question-sign\"><\/i>                   \n                <\/p>\n                <div id=\"member-code-container\" class=\"collapse member-code-container\" style=\"padding: 0 18px;\">\n                    <%= SC.macros.membercodeForm( membercode ) %>\n                <p class=\"small\">\n                    If you'd like to become a member, please <a href=\"http:\/\/www.smithsonian.com\/folkways\/join\" target=\"_blank\">click here<\/a> to join and get your member number to save 10%.\n                <\/p>\n                <\/div>\n            <\/div>\n        <% } %>\n\n\n    <\/div>\n    \n    <% if (options.showActions) { %>\n        <div class=\"well-footer shopping-cart-action-buttons\">\n            <a id=\"btn-proceed-checkout\" class=\"btn btn-large btn-block btn-primary btn-proceed-checkout\" href=\"#\" data-touchpoint=\"checkout\" data-hashtag=\"#\">\n                <%= _('Proceed to Checkout').translate() %>\n            <\/a>\n\n            <!--\n            <% if (paypal_express.available === 'T') { %>\n                <a href=\"#\" data-touchpoint=\"checkout\" data-hashtag=\"#\" data-parameters=\"paypalexpress=T\">\n                    <img src=\"<%= paypal_express.imageurl %>\" alt=\"PayPal Express\" width=\"145px\" height=\"42px\">\n                <\/a>\n            <% } %>\n            -->\n\n        <\/div>\n    <% } %>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('shoppingCartOptionColor', function (option, value, model) { %>\n<div>\n\t<%= option.label || option.name.replace(':', '') %>: \n\t<% var color = option.colors && (option.colors[value.label] || option.colors.defaultColor); %>\n\t<span \n\t\t<% if (!_.isObject(color)) { %>\n\t\t\tstyle=\"background: <%= color %>\"\n\t\t<% } %>\n\t\tclass=\"cart-color-tile\">\n\t\t\t<% if (_.isObject(color) && color.type === 'image') { %>\n\t\t\t\t<img \n\t\t\t\t\tsrc=\"<%- color.src %>\" \n\t\t\t\t\talt=\"<%- value.label %>\"\n\t\t\t\t\twidth=\"<%- color.width || '' %>\" \n\t\t\t\t\theight=\"<%- color.height || '' %>\">\n\t\t\t<% } %>\t\n\t<\/span> <%= value.label %>\n<\/div>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('membercodeForm', function( membercode ) { %>\n\n<% var is_invalid = !!( membercode && membercode.error ); %>\n\n<form class=\"form-inline\" style=\"margin-bottom:5px!important\" data-action=\"apply-membercode\">\n\t<fieldset>\n\t\t<div class=\"control-group <%= is_invalid ? 'error' : '' %>\">\n\t\t\t<input\n\t\t\t\ttype=\"text\"\n\t\t\t\tname=\"membercode\"\n\t\t\t\tid=\"membercode\"\n\t\t\t\tclass=\"input-medium membercode\"\n\t\t\t\tvalue=\"<%- membercode && membercode.code %>\"\n\t\t\t\tplaceholder=\"<%- _('SI Member Code').translate() %>\"\n\t\t\t\trequired\n\t\t\t>\n\t\t\t<button type=\"submit\" class=\"btn\">\n\t\t\t\t<%= _('Apply').translate() %>\n\t\t\t<\/button>\n\t\t<\/div>\n\t\t<div data-type=\"membercode-error-placeholder\">\n\t\t<% if (is_invalid) { %>\n\t\t\t<%= SC.macros.message(membercode.error, 'error', true) %>\n\t\t<% } %>\n\t\t<\/div>\n\t<\/fieldset>\n<\/form>\n\n<% }) %>\n\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('checkoutCartSummary', function (options) { %>\n<%\n\tvar cart = options.cart\n\t,\tsummary = cart.get('summary')\n\t,\tpromocode = cart.get('promocode')\n\t,\tmembercode = cart.get('promocode')\n\t,\ttruncateTitle = 100\n\t,\titem_count = _.reduce(cart.get('lines').pluck('quantity'), function (memo, quantity) { return memo + (parseFloat(quantity) || 1); }, 0)\n\t,\tis_promocode_valid = promocode && promocode.isvalid\n\t,\tis_member_valid = membercode && membercode.isvalid\n\t,\tgiftcertificates = cart.get('paymentmethods').where({type: 'giftcertificate'}) || []; \n\n\n%>\n<div class=\"checkout-cart-summary\">\n\t<header class=\"checkout-cart-summary-header\">\n\t\t<% if (options.stepPosition.toLast > 0) { %>\n\t\t\t<a href=\"#\" class=\"btn btn-link btn-edit-cart pull-right\" data-touchpoint=\"viewcart\">\n\t\t\t\t<%= _('Edit Order').translate() %>\n\t\t\t<\/a>\n\t\t<% } %>\n\n\t\t<h2 class=\"checkout-cart-summary-title\">\n\t\t\t<%= _('Order Summary').translate() %>\n\t\t<\/h2>\n\t<\/header>\n\t\n\t<div class=\"checkout-cart-summary-body\">\n\t\t<% if (!options.hideItems) { %>\n\t\t<ul class=\"cart-summary-items checkout-summary-items\">\n\t\t<%\n\t\t\tvar thumbnail = ''\n\t\t\t,\titem = null;\n\t\t%>\n\t\t<% cart.get('lines').each(function (line) { %>\n\t\t\t<%\n\t\t\t\titem = line.get('item');\n\t\t\t\tthumbnail = item.get('_thumbnail');\n\t\t\t\taddExtraDots = ( item.get('displayname').length < truncateTitle ) ? \"\" : \"...\";\n\nvar addArtistName = \"\";\nif ( item.get(\"custitem_artistname\") != \"Various Artists\" ) \n{\naddArtistName = \" - \" + item.get(\"custitem_artistname\");\n}\n\n\n\t\t\t%>\n\t\t\t<li class=\"cart-summary-item-cell checkout-summary-item-cell\">\n\t\t\t\t<div class=\"row-fluid\">\n\t\t\t\t\t<div class=\"span3 thumbnail checkout-summary-item-thumbnail\">\n\t\t\t\t\t\t<a href=\"<%= item.get(\"custitem_catalog_itemurl\")%>\"><img src=\"<%- options.application.resizeImage(thumbnail.url, 'tinythumb') %>\" alt=\"<%- thumbnail.altimagetext %>\"><\/a>\n\t\t\t\t\t<\/div>\n\t\t\t\t\t<div class=\"span9 cart-summary-item-details checkout-summary-item-details\">\n\t\t\t\t\t\t<div class=\"pull-right cart-summary-item-total\">\n\t\t\t\t\t\t\t<%= line.get('total_formatted') %>\n\t\t\t\t\t\t\t<% if (line.get('amount') > line.get('total')) {%>\n\t\t\t\t\t\t\t\t<small class=\"muted crossed cart-summary-item-amount\">\n\t\t\t\t\t\t\t\t\t<%=  line.get('amount_formatted') %>\n\t\t\t\t\t\t\t\t<\/small>\n\t\t\t\t\t\t\t<% } %>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<div>\n\n\t\t\t\t\t\t\t<strong class=\"cart-summary-item-name\">\n\t\t\t\t\t\t\t\t<a href=\"<%= item.get(\"custitem_catalog_itemurl\")%>\"><%= item.get('displayname').substring(0,truncateTitle) + addExtraDots %><\/a> <span class=\"artist-name\" style=\"display: none;\"><%=addArtistName%><\/span> <\/a>\n\t\t\t\t\t\t\t<\/strong>\n\n\t\t\t\t\t\t\t<p class=\"cart-summary-item-sku\"><%= _('Format:').translate() %> <%= item.get('storedescription2') %><\/p>\n\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<div class=\"cart-summary-item-quantity\">\n\t\t\t\t\t\t\t<%= _('Qty: $(0)').translate(line.get('quantity')) %>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<div class=\"cart-summary-item-price\">\n\t\t\t\t\t\t\t<%= SC.macros.showItemPrice(line.get('item')) %>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<%= \/* Renders the selected options for the item *\/ \n\t\t\t\t\t\t\titem.renderAllOptionSelected() %>\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t<\/li>\n\t\t<% }) %>\n\t\t<\/ul>\n\t\t<% } %>\n\t\t<div class=\"cart-summary-subtotal\">\n\t\t\t<p class=\"strong\">\n\t\t\t\t<span class=\"pull-right cart-summary-subtotal-formatted\">\n\t\t\t\t\t<%= summary.subtotal_formatted %>\n\t\t\t\t<\/span>\n\t\t\t\t<span class=\"cart-summary-subtotal-label\">\n\t\t\t\t\t<%= _('Subtotal ($(0) $(1))').translate(item_count, item_count === 1 ? _('item').translate() : _('items').translate()) %>\n\t\t\t\t<\/span>\n\t\t\t<\/p>\n\t\t<\/div>\n\n\t\t<% if (is_promocode_valid || summary.giftcertapplied) { %>\n\n\n\t\t\t<% if (is_promocode_valid) { %>\n\t\t\t\t<div class=\"cart-summary-promocode-applied\">\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<strong class=\"lead-price pull-right\"><%= summary.discountrate_formatted %><\/strong>\n\t\t\t\t\t\t<% if (promocode.code == \"SIMEMBER\" ) { %><%= _('Member Discount').translate() %><% } else { %><%= _('Promo Code Discount').translate() %><% } %> <a href=\"#\" data-action=\"remove-promocode\"><i class=\"icon-remove\"><\/i><\/a>\n\t\t\t\t\t<\/p>\n\t\t\t\t<\/div>\n\t\t\t<% } %>\n\n\t\t\t<% if (summary.discounttotal) { %>\n\t\t\t<div class=\"cart-summary-discount-applied\">\n\t\t\t\t<p>\n\t\t\t\t\t<span class=\"pull-right\">\n\t\t\t\t\t\t<%= summary.discounttotal_formatted %>\n\t\t\t\t\t<\/span>\n\t\t\t\t\t<%= _('Discount Total').translate() %>\n\t\t\t\t<\/p>\n\t\t\t<\/div>\n\t\t\t<% } %>\n\n\t\t\t<% if (summary.giftcertapplied) { %>\n\t\t\t<div class=\"cart-summary-giftcertificate-applied\">\n\t\t\t\t<p>\n\t\t\t\t\t<%= _('Gift Certificates Applied ($(0))').translate(giftcertificates.length) %>\n\t\t\t\t<\/p>\n\t\t\t\t<% _.each(giftcertificates, function (giftCertificate) { %>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<span class=\"pull-right\">\n\t\t\t\t\t\t\t<%= _('-$(0)').translate(giftCertificate.get('giftcertificate').amountapplied_formatted) %>\n\t\t\t\t\t\t<\/span>\n\t\t\t\t\t\t<span title=\"<%- giftCertificate.get('giftcertificate').code %>\">\n\t\t\t\t\t\t\t<%= SC.macros.formatPaymentMethod(giftCertificate) %>\n\t\t\t\t\t\t<\/span>\n\t\t\t\t\t<\/p>\n\t\t\t\t<% }); %>\n\t\t\t\t<\/div>\n\t\t\t<% } %>\n\t\t<% } %>\n\n\t\t<div class=\"cart-summary-shipping-cost-applied\">\n\t\t\t<p>\n\t\t\t\t<span class=\"pull-right cart-summary-shipping-cost-formatted\">\n\t\t\t\t\t<%= _.formatCurrency(summary.handlingcost + summary.shippingcost) %>\n\t\t\t\t<\/span>\n\t\t\t\t<%= _('Shipping & Handling').translate() %>\n\t\t\t<\/p>\n\n\t\t\t<p style=\"display:none;\">\n\t\t\t\t<span class=\"pull-right cart-summary-shipping-cost-formatted\">\n\t\t\t\t\t<%= summary.shippingcost_formatted %>\n\t\t\t\t<\/span>\n\t\t\t\t<%= _('Shipping').translate() %>\n\t\t\t<\/p>\n\n\t\t\t<% if (summary.handlingcost) { %>\n\t\t\t<p style=\"display:none;\">\n\t\t\t\t<span class=\"pull-right cart-summary-handling-cost-formatted\">\n\t\t\t\t\t<%= summary.handlingcost_formatted %>\n\t\t\t\t<\/span>\n\t\t\t\t<%= _('Handling').translate() %>\n\t\t\t<\/p>\n\t\t\t<% } %>\n\n\t\t\t<p style=\"display:none;\">\n\t\t\t\t<span class=\"pull-right cart-summary-tax-total-formatted\">\n\t\t\t\t\t<%= summary.taxtotal_formatted %>\n\t\t\t\t<\/span>\n\t\t\t\t<%= _('Tax').translate() %>\n\t\t\t<\/p>\n\t\t<\/div>\n\n\t\t<div class=\"cart-summary-total\">\n\t\t\t<p class=\"strong\">\n\t\t\t\t<span class=\"pull-right cart-summary-total-formatted\">\n\t\t\t\t\t<%= summary.total_formatted %>\n\t\t\t\t<\/span>\n\t\t\t\t<%= _('Total').translate() %>\n\t\t\t<\/p>\n\t\t<\/div>\n\n\t<% if (options.stepPosition.toLast === 1) { %>\n\t\t<div>\n\t\t<% if (SC.ENVIRONMENT.siteSettings.checkout.requiretermsandconditions === 'T') { %>\n\t\t\t<p><%= _('By placing your order, you are agree to our <a data-toggle=\"show-terms-summary\" href=\"#\">Terms & Conditions<\/a>').translate() %><\/p><br\/>\n\t\t<% } %>\n\t\t\t<button class=\"btn btn-primary btn-large btn-place-order\" data-action=\"submit-step\">\n\t\t\t\t<%= options.continueButtonLabel %>\n\t\t\t<\/button>\n\t\t<\/div>\n\t<% } %>\n\t<\/div>\n\n\t<% if (!is_promocode_valid && options.stepPosition.toLast > 0) { %>\n\t<footer class=\"checkout-cart-summary-footer accordion\">\n\t\t<div class=\"collapsible\">\n\t\t\t<p class=\"collapser collapsed\" data-target=\"#promo-code-container\" data-toggle=\"collapse\">\t\t\t\t\t\n\t\t\t\t<i class=\"icon-minus-sign pull-right\"><\/i>\n\t\t\t\t<i class=\"icon-plus-sign pull-right\"><\/i>\n\t\t\t\t<%= _('Have a Promo Code?').translate() %>\n\t\t\t\t<i class=\"icon-question-sign\"\n\t\t\t\t\tdata-toggle=\"tooltip\"\n\t\t\t\t\ttitle=\"<%= _('<b>Promo Code<\/b><br>To redeem a promo code, simply enter your code below and we will apply the offer to your purchase during checkout.').translate() %>\">\n\t\t\t\t<\/i>\n\t\t\t<\/p>\n\t\t\t<div id=\"promo-code-container\" class=\"collapse promo-code-container\">\n\t\t\t\t<%= SC.macros.promocodeForm(promocode) %>\n\t\t\t<\/div>\n\t\t<\/div>\n\t<\/footer>\n\t<% } %>\n\n\n\t<% if (!is_member_valid && options.stepPosition.toLast > 0) { %>\n\t<footer class=\"checkout-cart-summary-footer accordion\">\n\t\t<div class=\"collapsible\">\n\t\t\t<div class=\"collapsible well-section cart-summary-member-section\" style=\"padding:0px;\">\n\t\t\t\t<p class=\"collapser collapsed\" data-target=\"#member-code-container\" data-toggle=\"collapse\">\t\t\t\t\t\n\t\t\t\t\t<i class=\"icon-minus-sign pull-right\"><\/i>\n\t\t\t\t\t<i class=\"icon-plus-sign pull-right\"><\/i>\n\t\t\t\t\t<%= _('Are you an SI member?').translate() %> <i data-toggle=\"tooltip\" title=\"<%= _('<b>SI Members<\/b><br>National Associate Members receive a 10% discount.  Enter your member code below.').translate() %>\" class=\"icon-question-sign\"><\/i>\t\t\t\t\t\n\t\t\t\t<\/p>\n\t\t\t\t<div id=\"member-code-container\" class=\"collapse member-code-container\" style=\"padding: 0 18px;\">\n\t\t\t\t\t<%= SC.macros.membercodeForm( membercode ) %>\n                <p class=\"small\">\n                    If you'd like to become a member, please <a href=\"http:\/\/www.smithsonian.com\/folkways\/join\" target=\"_blank\">click here<\/a> to join and get your member number to save 10%.\n                <\/p>\n\t\t\t\t<\/div>\n\t\t\t<\/div>\n                 <\/div>\n\t<\/footer>\n\t<% } %>\n\n<\/div>\n<% }) %>\n\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('wizadStepNavigation', function (step_groups) { %>\n<ul class=\"wizard-step-groups\">\n<% var index_counter = 0; %>\n<% _.each(step_groups, function (step_group) { %>\n\t<%\n\t\tvar list_item_class = 'wizard-step-link';\n\t\tif (step_group.state === 'present')\n\t\t{\n\t\t\tlist_item_class += ' active';\n\t\t}\n\t\telse if (step_group.state === 'future')\n\t\t{\n\t\t\tlist_item_class += ' disabled';\t\n\t\t}\n\t\t\n\t\tif (step_group.hasErrors())\n\t\t{\n\t\t\tlist_item_class += ' error';\n\t\t}\n\t%>\n\n\t<% if (index_counter) { %>\n\t\t<li class=\"divider divider-<%= index_counter %>\">\/<\/li>\n\t<% } %>\n\n\t<li class=\"<%- list_item_class %> wizard-step-<%= index_counter %>\">\t\n\t\t<a href=\"<%- step_group.state === 'future' ? Backbone.history.fragment : step_group.url + '?force=true' %>\">\n\t\t\t<span class=\"step-index step-index-<%= index_counter %>\">\n\t\t\t\t<%= ++index_counter %>\n\t\t\t<\/span>\n\t\t\t<%= step_group.name %>\n\t\t<\/a>\n\t<\/li>\n<% }) %>\n<\/ul>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('creditcard', function (creditcard, options) { %>\n<%\n\tvar payment_name = creditcard.get('paymentmethod').name\n\t,\texpiration_month = creditcard.get('expmonth')\n\t,\ticons = options.icons;\n%>\n<article class=\"creditcard\">\n\t<% if (options.showSecurityCodeForm) { %>\n\t<div class=\"row-fluid\">\n\t\t<div class=\"span6\">\n\t<% } %>\n\t\t\t<h4 class=\"summary-header\">\n\t\t\t<% if (payment_name in icons) { %>\n\t\t\t\t<img class=\"credit-card-icon\" src=\"<%- icons[payment_name] %>\" alt=\"<%- payment_name %>\">\n\t\t\t<% } else { %>\n\t\t\t\t<%= payment_name %>\n\t\t\t<% } %> &ndash; \n\t\t\t<%= _('Ending in $(0)').translate(creditcard.get('ccnumber').replace(\/\\*\/g, '')) %>\n\t\t\t<\/h4>\n\t\t\t<p>\n\t\t\t\t<%= creditcard.get('ccname') %> <br>\n\t\t\t\t<%= _('Expires').translate() + ' ' + (expiration_month < 10 ? '0' : '') + expiration_month + '\/' + creditcard.get('expyear') %>\n\t\t\t<\/p>\n\t\t\t<% if (options.showDefaults) { %>\n\t\t\t<p>\n\t\t\t\t<% if (creditcard.get('ccdefault') === 'T') { %>\n\t\t\t\t\t<i class=\"icon-star\"><\/i>\n\t\t\t\t\t<%= _('Default Credit Card').translate() %>\n\t\t\t\t<% } %>\n\t\t\t<\/p>\n\t\t\t<% } %>\n\t\t<% if (options.showSecurityCodeForm) { %>\n\t\t<\/div>\n\t\t<div class=\"span6\">\n\t\t\t<%= SC.macros.creditcardSecurityNumberForm({\n\t\t\t\terror: options.securityNumberError\n            ,   value: options.ccsecuritycode\n\t\t\t}) %>\n\t\t<\/div>\n\t<\/div>\n\t<% } %>\n\n\t<% if (options.showSelect) { %>\n\t\t<button class=\"btn btn-primary btn-block\" data-action=\"select\" data-id=\"<%- creditcard.get('internalid')%>\">\n\t\t\t<%= options.selectMessage %>\n\t\t<\/button>\n\t<% } %>\n\n\t<% if (options.showActions) { %>\n\t\t<p class=\"actions\">\n\t\t\t<a class=\"btn btn-link\" href=\"\/creditcards\/<%= creditcard.get('internalid') %>\" data-toggle=\"show-in-modal\">\n\t\t\t\t<%= _('Edit Card').translate() %>\n\t\t\t<\/a>\n\t\t\t<button class=\"btn btn-link\" data-action=\"remove\" data-id=\"<%- creditcard.get('internalid') %>\">\n\t\t\t\t<%= _('Remove').translate() %>\n\t\t\t<\/button>\n\t\t<\/p>\n\t<% } %>\n<\/article>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('creditcardSecurityNumberForm', function (options) { %>\n<% options = options || {}; %>\n<div class=\"credit-card-security-number\">\n\t<div class=\"control-group <%= options.error ? 'error' : '' %>\">\n\t\t<label class=\"control-label\" for=\"ccsecuritycode\">\n\t\t\t<%= _('Security Number').translate() %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<input\n\t\t\t\ttype=\"text\"\n\t\t\t\tclass=\"input-small\"\n\t\t\t\tid=\"ccsecuritycode\"\n\t\t\t\tname=\"ccsecuritycode\"\n\t\t\t\tvalue=\"<%- options.value %>\"\n\t\t\t\tmaxlength=\"4\"\n\t\t\t>\n\t\t\t<% if (options.error) { %>\n\t\t\t\t<p class=\"help-block\">\n\t\t\t\t\t<%= options.error.errorMessage %>\n\t\t\t\t<\/p>\n\t\t\t<% } %>\n\t\t<\/div>\n\t<\/div>\n<\/div>\n<% }) %>\n\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('creditcardForm', function (creditcard, options) { %>\n<% var application = options.application %>\n<fieldset>\n\t<div data-type=\"alert-placeholder\"><\/div>\n\n\t<div class=\"control-group\">\n\t\t<div class=\"controls\">\n\t\t\t<%\n\t\t\t\tvar icons = application.getConfig('creditCardIcons')\n\t\t\t\t,\tselected_payment_method = creditcard.get('paymentmethod')\n\t\t\t\t,\tcreditcards = _.where(application.getConfig('siteSettings.paymentmethods'), {ispaypal : 'F'});\n\t\t\t%>\n\t\t\t<input type=\"hidden\" id=\"paymentmethod\" name=\"paymentmethod\" value=\"<%- selected_payment_method && selected_payment_method.internalid %>\"\/>\n\t\t\t<% _.each(creditcards, function (paymentmethod) { %>\n\t\t\t\t<img\n\t\t\t\t\tclass=\"credit-card-icon <%- creditcard.isNew() || selected_payment_method && paymentmethod.internalid === selected_payment_method.internalid ? '' : 'hidden' %>\"\n\t\t\t\t\tsrc=\"<%- icons[paymentmethod.name] %>\"\n\t\t\t\t\tdata-value=\"<%- paymentmethod.internalid %>\"\n\t\t\t\t\talt=\"<%- paymentmethod.name %>\"\n\t\t\t\t\tdata-image=\"creditcard-icon\"\n\t\t\t\t\/>\n\t\t\t<% }) %>\n\t\t\t<\/select>\n\t\t<\/div>\n\t<\/div>\n\n\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"ccnumber\">\n\t\t\t<%= _('Credit Card Number').translate() %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<input type=\"text\" class=\"input-xlarge\" id=\"ccnumber\" name=\"ccnumber\" value=\"<%- creditcard.get('ccnumber') %>\" <%= !creditcard.isNew() ? 'disabled':'' %> >\n\t\t<\/div>\n\t<\/div>\n\n\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"expmonth\">\n\t\t\t<%= _('Expiration Date').translate() %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<select class=\"input-mini\" id=\"expmonth\" name=\"expmonth\">\t\t\t\t\t\n\t\t\t\t<% var currentMonth = creditcard.get('expmonth') ? creditcard.get('expmonth') : options.currentMonth  %>\n\t\t\t\t<% _.each(options.months, function (month, index) { %>\n\t\t\t\t\t<option value=\"<%- month %>\" <%= month == currentMonth ? 'selected' : '' %>>\n\t\t\t\t\t\t<%= month %>\n\t\t\t\t\t<\/option>\n\t\t\t\t<% }) %>\n\t\t\t<\/select>\n\t\t\t<select class=\"input-small\" id=\"expyear\" name=\"expyear\">\n\t\t\t\t<% _.each(options.years, function (year, index) { %>\n\t\t\t\t\t<option value=\"<%- year %>\" <%= year == creditcard.get('expyear') ? 'selected' : '' %> <%= options.expyear == year ? 'disabled' : '' %>>\n\t\t\t\t\t\t<%= year %>\n\t\t\t\t\t<\/option>\n\t\t\t\t<% }) %>\n\t\t\t<\/select>\n\t\t<\/div>\n\t<\/div>\n\t\n\t<% if (options.showSecurityCodeForm) { %>\n\t\t<%= SC.macros.creditcardSecurityNumberForm() %>\n\t<% } %>\n\n\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"ccname\">\n\t\t\t<%= _('Name on Card').translate() %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t<\/label>\n\n\t\t<div class=\"controls\">\n\t\t\t<input type=\"text\" class=\"input-xlarge\" id=\"ccname\" name=\"ccname\" maxlength=\"26\" value=\"<%- creditcard.get('ccname') %>\">\n\t\t<\/div>\n\t<\/div>\n\n\t<% if (application.getUser().get('isGuest') !== 'T' && options.showDefaults) { %>\n\t<div class=\"control-group\">\n\t\t<div class=\"controls\">\n\t\t\t<label class=\"checkbox\">\n\t\t\t\t<input\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tid=\"ccdefault\"\n\t\t\t\t\tvalue=\"T\"\n\t\t\t\t\tdata-unchecked-value=\"F\"\n\t\t\t\t\tname=\"ccdefault\"\n\t\t\t\t\t<%= creditcard.get('ccdefault') === 'T' ? 'checked' : '' %>\n\t\t\t\t>\n\t\t\t\t<%= _('Make this my default credit card').translate() %>\n\t\t\t<\/label>\n\t\t<\/div>\n\t<\/div>\n\t<% } %>\n\t\n<\/fieldset>\n<% }) %>\n\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('creditcard', function (creditcard, options) { %>\n<%\n\tvar payment_name = creditcard.get('paymentmethod').name\n\t,\texpiration_month = creditcard.get('expmonth')\n\t,\ticons = options.icons;\n%>\n<article class=\"creditcard\">\n\t<% if (options.showSecurityCodeForm) { %>\n\t<div class=\"row-fluid\">\n\t\t<div class=\"span6\">\n\t<% } %>\n\t\t\t<h4 class=\"summary-header\">\n\t\t\t<% if (payment_name in icons) { %>\n\t\t\t\t<img class=\"credit-card-icon\" src=\"<%- icons[payment_name] %>\" alt=\"<%- payment_name %>\">\n\t\t\t<% } else { %>\n\t\t\t\t<%= payment_name %>\n\t\t\t<% } %> &ndash; \n\t\t\t<%= _('Ending in $(0)').translate(creditcard.get('ccnumber').replace(\/\\*\/g, '')) %>\n\t\t\t<\/h4>\n\t\t\t<p>\n\t\t\t\t<%= creditcard.get('ccname') %> <br>\n\t\t\t\t<%= _('Expires').translate() + ' ' + (expiration_month < 10 ? '0' : '') + expiration_month + '\/' + creditcard.get('expyear') %>\n\t\t\t<\/p>\n\t\t\t<% if (options.showDefaults) { %>\n\t\t\t<p>\n\t\t\t\t<% if (creditcard.get('ccdefault') === 'T') { %>\n\t\t\t\t\t<i class=\"icon-star\"><\/i>\n\t\t\t\t\t<%= _('Default Credit Card').translate() %>\n\t\t\t\t<% } %>\n\t\t\t<\/p>\n\t\t\t<% } %>\n\t\t<% if (options.showSecurityCodeForm) { %>\n\t\t<\/div>\n\t\t<div class=\"span6\">\n\t\t\t<%= SC.macros.creditcardSecurityNumberForm({\n\t\t\t\terror: options.securityNumberError\n            ,   value: options.ccsecuritycode\n\t\t\t}) %>\n\t\t<\/div>\n\t<\/div>\n\t<% } %>\n\n\t<% if (options.showSelect) { %>\n\t\t<button class=\"btn btn-primary btn-block\" data-action=\"select\" data-id=\"<%- creditcard.get('internalid')%>\">\n\t\t\t<%= options.selectMessage %>\n\t\t<\/button>\n\t<% } %>\n\n\t<% if (options.showActions) { %>\n\t\t<p class=\"actions\">\n\t\t\t<a class=\"btn btn-link\" href=\"\/creditcards\/<%= creditcard.get('internalid') %>\" data-toggle=\"show-in-modal\">\n\t\t\t\t<%= _('Edit Card').translate() %>\n\t\t\t<\/a>\n\t\t\t<button class=\"btn btn-link\" data-action=\"remove\" data-id=\"<%- creditcard.get('internalid') %>\">\n\t\t\t\t<%= _('Remove').translate() %>\n\t\t\t<\/button>\n\t\t<\/p>\n\t<% } %>\n<\/article>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('creditcardSecurityNumberForm', function (options) { %>\n<% options = options || {}; %>\n<div class=\"credit-card-security-number\">\n\t<div class=\"control-group <%= options.error ? 'error' : '' %>\">\n\t\t<label class=\"control-label\" for=\"ccsecuritycode\">\n\t\t\t<%= _('Security Number').translate() %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<input\n\t\t\t\ttype=\"text\"\n\t\t\t\tclass=\"input-small\"\n\t\t\t\tid=\"ccsecuritycode\"\n\t\t\t\tname=\"ccsecuritycode\"\n\t\t\t\tvalue=\"<%- options.value %>\"\n\t\t\t\tmaxlength=\"4\"\n\t\t\t>\n\t\t\t<% if (options.error) { %>\n\t\t\t\t<p class=\"help-block\">\n\t\t\t\t\t<%= options.error.errorMessage %>\n\t\t\t\t<\/p>\n\t\t\t<% } %>\n\t\t<\/div>\n\t<\/div>\n<\/div>\n<% }) %>\n\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('creditcardForm', function (creditcard, options) { %>\n<% var application = options.application %>\n<fieldset>\n\t<div data-type=\"alert-placeholder\"><\/div>\n\n\t<div class=\"control-group\">\n\t\t<div class=\"controls\">\n\t\t\t<%\n\t\t\t\tvar icons = application.getConfig('creditCardIcons')\n\t\t\t\t,\tselected_payment_method = creditcard.get('paymentmethod')\n\t\t\t\t,\tcreditcards = _.where(application.getConfig('siteSettings.paymentmethods'), {ispaypal : 'F'});\n\t\t\t%>\n\t\t\t<input type=\"hidden\" id=\"paymentmethod\" name=\"paymentmethod\" value=\"<%- selected_payment_method && selected_payment_method.internalid %>\"\/>\n\t\t\t<% _.each(creditcards, function (paymentmethod) { %>\n\t\t\t\t<img\n\t\t\t\t\tclass=\"credit-card-icon <%- creditcard.isNew() || selected_payment_method && paymentmethod.internalid === selected_payment_method.internalid ? '' : 'hidden' %>\"\n\t\t\t\t\tsrc=\"<%- icons[paymentmethod.name] %>\"\n\t\t\t\t\tdata-value=\"<%- paymentmethod.internalid %>\"\n\t\t\t\t\talt=\"<%- paymentmethod.name %>\"\n\t\t\t\t\tdata-image=\"creditcard-icon\"\n\t\t\t\t\/>\n\t\t\t<% }) %>\n\t\t\t<\/select>\n\t\t<\/div>\n\t<\/div>\n\n\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"ccnumber\">\n\t\t\t<%= _('Credit Card Number').translate() %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<input type=\"text\" class=\"input-xlarge\" id=\"ccnumber\" name=\"ccnumber\" value=\"<%- creditcard.get('ccnumber') %>\" <%= !creditcard.isNew() ? 'disabled':'' %> >\n\t\t<\/div>\n\t<\/div>\n\n\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"expmonth\">\n\t\t\t<%= _('Expiration Date').translate() %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<select class=\"input-mini\" id=\"expmonth\" name=\"expmonth\">\t\t\t\t\t\n\t\t\t\t<% var currentMonth = creditcard.get('expmonth') ? creditcard.get('expmonth') : options.currentMonth  %>\n\t\t\t\t<% _.each(options.months, function (month, index) { %>\n\t\t\t\t\t<option value=\"<%- month %>\" <%= month == currentMonth ? 'selected' : '' %>>\n\t\t\t\t\t\t<%= month %>\n\t\t\t\t\t<\/option>\n\t\t\t\t<% }) %>\n\t\t\t<\/select>\n\t\t\t<select class=\"input-small\" id=\"expyear\" name=\"expyear\">\n\t\t\t\t<% _.each(options.years, function (year, index) { %>\n\t\t\t\t\t<option value=\"<%- year %>\" <%= year == creditcard.get('expyear') ? 'selected' : '' %> <%= options.expyear == year ? 'disabled' : '' %>>\n\t\t\t\t\t\t<%= year %>\n\t\t\t\t\t<\/option>\n\t\t\t\t<% }) %>\n\t\t\t<\/select>\n\t\t<\/div>\n\t<\/div>\n\t\n\t<% if (options.showSecurityCodeForm) { %>\n\t\t<%= SC.macros.creditcardSecurityNumberForm() %>\n\t<% } %>\n\n\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"ccname\">\n\t\t\t<%= _('Name on Card').translate() %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t<\/label>\n\n\t\t<div class=\"controls\">\n\t\t\t<input type=\"text\" class=\"input-xlarge\" id=\"ccname\" name=\"ccname\" maxlength=\"26\" value=\"<%- creditcard.get('ccname') %>\">\n\t\t<\/div>\n\t<\/div>\n\n\t<% if (application.getUser().get('isGuest') !== 'T' && options.showDefaults) { %>\n\t<div class=\"control-group\">\n\t\t<div class=\"controls\">\n\t\t\t<label class=\"checkbox\">\n\t\t\t\t<input\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tid=\"ccdefault\"\n\t\t\t\t\tvalue=\"T\"\n\t\t\t\t\tdata-unchecked-value=\"F\"\n\t\t\t\t\tname=\"ccdefault\"\n\t\t\t\t\t<%= creditcard.get('ccdefault') === 'T' ? 'checked' : '' %>\n\t\t\t\t>\n\t\t\t\t<%= _('Make this my default credit card').translate() %>\n\t\t\t<\/label>\n\t\t<\/div>\n\t<\/div>\n\t<% } %>\n\t\n<\/fieldset>\n<% }) %>\n\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('addressFrom', function (address, options) { %>\n<% \n\tvar site_settings = SC.ENVIRONMENT.siteSettings\n\t,\tmanage = options.manage ? options.manage + '-' : ''\n\t,\tcountries = options.countries\n\t,\tquantity_countries = _.size(countries)\n\t,\tselected_country = address.get('country') || site_settings.defaultshipcountry\n\t,\tapplication = this.view.options.application || this.view.options.wizard.application;\n\n\tif (quantity_countries === 1)\n\t{\n\t\tselected_country = _.keys(countries)[0];\n\t}\n%>\n<fieldset>\n\t<div data-type=\"alert-placeholder\"><\/div>\n\t\n\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"<%= manage %>fullname\">\n\t\t\t<%= _('Full Name').translate() %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<input type=\"text\" class=\"input-xlarge\" id=\"<%= manage %>fullname\" name=\"fullname\" value=\"<%- address.get('fullname')%>\">\n\t\t<\/div>\n\t<\/div>\n\t<% \/* \n\tTODO: the next field should be shown\/hidden depending on a feature in Setup Website > Shopping\n\tregistration has 2 fields: displaycompanyfield and showcompanyfield, not sure which to use \n\t*\/ %>\n\t<% if (site_settings.registration.displaycompanyfield === 'T') { %>\n\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"<%= manage %>company\">\n\t\t\t<%= _('Company').translate() %>\n\t\t\t<% if (site_settings.registration.companyfieldmandatory === 'T') { %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t\t<% } %>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<input\n\t\t\t\ttype=\"text\"\n\t\t\t\tclass=\"input-xlarge\"\n\t\t\t\tid=\"<%= manage %>company\"\n\t\t\t\tname=\"company\"\n\t\t\t\tvalue=\"<%- address.get('company') %>\"\n\t\t\t\t<% if (site_settings.registration.companyfieldmandatory !== 'T') { %>\n\t\t\t\t\tplaceholder=\"<%= _('(optional)').translate() %>\"\n\t\t\t\t<% } %>\n\t\t\t>\n\t\t<\/div>\n\t<\/div>\n\t<% } %>\n\t\n\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"<%= manage %>addr1\">\n\t\t\t<%= _('Address').translate() %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<input type=\"text\" class=\"input-xlarge\" id=\"<%= manage %>addr1\" name=\"addr1\" value=\"<%- address.get('addr1') %>\">\n\t\t<\/div>\n\t\t<span class=\"help-block\">\n\t\t\t<%= _('Example: 1234 Main Street').translate() %>\n\t\t<\/span>\n\t<\/div>\n\n\t<div class=\"control-group control-group-big\">\n\t\t<div class=\"controls\">\n\t\t\t<input type=\"text\" class=\"input-xlarge\" id=\"<%= manage %>addr2\" name=\"addr2\" value=\"<%- address.get('addr2') %>\" placeholder=\"<%= _('(optional)').translate() %>\">\n\t\t<\/div>\n\t\t<span class=\"help-block\">\n\t\t\t<%= _('Example: Apt. 3 or Suite #1516').translate() %>\n\t\t<\/span>\n\t<\/div>\n\t\n\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"<%= manage %>city\">\n\t\t\t<%= _('City').translate() %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<input type=\"text\" class=\"input-xlarge\" id=\"<%= manage %>city\" name=\"city\" value=\"<%- address.get('city') %>\">\n\t\t<\/div>\n\t<\/div>\n\n\t<div class=\"control-group <%= quantity_countries <= 1 ? 'hide' : '' %>\">\n\t\t<label class=\"control-label\" for=\"<%= manage %>country\">\n\t\t\t<%= _('Country').translate() %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<%= SC.macros.countriesDropdown(countries, selected_country, manage) %>\n\t\t<\/div>\n\t<\/div>\n\n\t<div class=\"control-group\">\n\t\t<%= SC.macros.statesDropdown({\n\t\t\tcountries: options.countries\n\t\t,\tselectedCountry: selected_country\n\t\t,\tselectedState: address.get('state')\n\t\t,\tmanage: manage\n\t\t}) %>\n\t<\/div>\n\n\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"<%= manage %>zip\">\n\t\t\t<%= _('Zip Code').translate() %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<input type=\"text\" class=\"input-medium\" id=\"<%= manage %>zip\" name=\"zip\" value=\"<%- address.get('zip') %>\" data-type=\"zip\">\n\t\t<\/div>\n\t\t<span class=\"help-block\">\n\t\t\t<%= _('Example: 94117').translate() %>\n\t\t<\/span>\n\t<\/div>\n\t\n\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"<%= manage %>phone\">\n\t\t\t<%= _('Phone Number').translate() %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<input type=\"tel\" class=\"input-xlarge\" id=\"<%= manage %>phone\" name=\"phone\" value=\"<%- address.get('phone') %>\" data-type=\"phone\">\n\t\t<\/div>\n\t\t<span class=\"help-block\">\n\t\t\t<%= _('Example: 555-123-1234').translate() %>\n\t\t<\/span>\n\t<\/div>\n\t\n\t<div class=\"control-group\">\n\t\t<div class=\"controls\">\n\t\t\t<label class=\"checkbox\">\n\t\t\t\t<input type=\"checkbox\" id=\"<%= manage %>isresidential\" value=\"T\" data-unchecked-value=\"F\" name=\"isresidential\" <%= address.get('isresidential') === 'T' ? 'checked' : '' %>>\n\t\t\t\t<%= _('This is a Residential Address').translate() %>\n\t\t\t\t<a href=\"#\" rel=\"tooltip\" data-toggle=\"tooltip\" title=\"<%= _('Indicating that this is a residential address will help us determine the best delivery method for your items.').translate() %>\">\n\t\t\t\t\t<i class=\"icon-question-sign\"><\/i>\n\t\t\t\t<\/a>\n\t\t\t<\/label>\n\t\t<\/div>\n\t<\/div>\n\t\n\t<% if (!options.hideDefaults) { %>\n\t\t<div class=\"control-group\">\n\t\t\t<div class=\"controls\">\n\t\t\t\t<label class=\"checkbox\">\n\t\t\t\t\t<input type=\"checkbox\" id=\"<%= manage %>defaultbilling\" value=\"T\" data-unchecked-value=\"F\" name=\"defaultbilling\" <%= address.get('defaultbilling') === 'T' ? 'checked' : '' %>>\n\t\t\t\t\t<%= application.getConfig('currentTouchpoint') === 'checkout' ? _('Save as my primary billing address').translate() : _('Make this my default billing address').translate() %>\n\t\t\t\t<\/label>\n\t\t\t<\/div>\n\t\t<\/div>\n\t<% } %>\n\n\t<% if (!options.hideDefaults) { %>\n\t\t<div class=\"control-group\">\n\t\t\t<div class=\"controls\">\n\t\t\t\t<label class=\"checkbox\">\n\t\t\t\t\t<input type=\"checkbox\" id=\"<%= manage %>defaultshipping\" value=\"T\" data-unchecked-value=\"F\" name=\"defaultshipping\" <%= address.get('defaultshipping') === 'T' ? 'checked' : '' %>>\n\t\t\t\t\t<%= application.getConfig('currentTouchpoint') === 'checkout' ? _('Save as my primary shipping address').translate() : _('Make this my default shipping address').translate() %>\n\t\t\t\t<\/label>\n\t\t\t<\/div>\n\t\t<\/div>\n\t<% } %>\n<\/fieldset>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('address', function (address, options) { \n\toptions = options || {}; \n\n\tvar label = address.get('label')\n\t,\tcompany = (SC.ENVIRONMENT.siteSettings.registration.displaycompanyfield === 'T') ? address.get('company') : null\n\t,\tfullname = address.get('fullname')\n\t,\tcountries = SC.ENVIRONMENT.siteSettings.countries\n\t,\tcountry_object = countries[address.get('country')]\n\t,\tcountry = (country_object)? country_object.name : address.get('country')\n\t,\tstate_object = (country_object && country_object.states)? _.findWhere(countries[address.get('country')].states, {code: address.get('state')}): null\n\t,\tstate = (state_object)? state_object.name: address.get('state');\n\n\t\n\n%>\n<article class=\"address\">\n\t<address class=\"\">\n\t\t<span class=\"address-line address-title summary-header\">\n\t\t\t<%= label || company || fullname %>\n\t\t<\/span>\n\n\t\t<% if (label && company) { %>\n\t\t\t<span class=\"address-line address-company\">\n\t\t\t\t<%= company %>\n\t\t\t<\/span>\n\t\t\t<span class=\"address-line address-name\">\n\t\t\t\t<%= fullname %>\n\t\t\t<\/span>\n\t\t<% } else if (label ? !company : company ) { %>\n\t\t\t<span class=\"address-line address-name\">\n\t\t\t\t<%= fullname %>\n\t\t\t<\/span>\n\t\t<% } %>\n\t\t<span class=\"address-line address-addr1\">\n\t\t\t<%= address.get('addr1') %>\n\t\t<\/span>\n\t\t<% if (address.get('addr2')) { %>\n\t\t\t<span class=\"address-line address-addr2\">\n\t\t\t\t<%= address.get('addr2') %>\n\t\t\t<\/span>\n\t\t<% } %>\n\t\t<span class=\"address-line\">\n\t\t\t<span class=\"address-city\">\n\t\t\t\t<%= address.get('city') %>\n\t\t\t<\/span>\n\t\t\t<% if (address.get('state')) { %>\n\t\t\t\t<span class=\"address-state\">\n\t\t\t\t\t<%= state %>\n\t\t\t\t<\/span>\n\t\t\t<% } %>\n\t\t\t<span class=\"address-zip\">\n\t\t\t\t<%= address.get('zip') %>\n\t\t\t<\/span>\n\t\t<\/span>\n\t\t<span class=\"address-line address-country\">\n\t\t\t<%= country %>\n\t\t<\/span>\n\t\t<span class=\"address-line address-phone\">\n\t\t\t<%= address.get('phone') %>\n\t\t<\/span>\n\t<\/address>\n\t\t\n\t<% if (!options.hideDefaults) { %>\n\t\t<% if (address.get('defaultshipping') === 'T') { %>\n\t\t<p>\n\t\t\t<i class=\"icon-star\"><\/i>\n\t\t\t<%= _('Default Shipping Address').translate() %>\n\t\t<\/p>\n\t\t<% } %>\n\t\t<% if (address.get('defaultbilling') === 'T') { %>\n\t\t<p>\n\t\t\t<i class=\"icon-star\"><\/i>\n\t\t\t<%= _('Default Billing Address').translate() %>\n\t\t<\/p>\n\t\t<% } %>\n\t<% } %>\n\n\t<% if (options.showSelect) { %>\n\t\t<button class=\"btn btn-primary btn-block\" data-action=\"select\" data-id=\"<%- address.get('internalid') %>\">\n\t\t\t<%= options.selectMessage || _('Select this address').translate() %>\n\t\t<\/button>\n\t<% } %>\n\n\t<% if (!options.hideActions) { %>\n\t<p class=\"actions\">\n\t\t<a class=\"btn btn-link\" href=\"\/addressbook\/<%- address.get('internalid') %>\" data-toggle=\"show-in-modal\">\n\t\t\t<%= _('Edit Address').translate() %>\n\t\t<\/a>\n\n\t\t<button class=\"btn btn-link\" data-action=\"remove\" data-id=\"<%- address.get('internalid') %>\">\n\t\t\t<%= _('Remove').translate() %>\n\t\t<\/button>\n\t<\/p>\n\t<% } %>\n<\/article>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('addressFrom', function (address, options) { %>\n<% \n\tvar site_settings = SC.ENVIRONMENT.siteSettings\n\t,\tmanage = options.manage ? options.manage + '-' : ''\n\t,\tcountries = options.countries\n\t,\tquantity_countries = _.size(countries)\n\t,\tselected_country = address.get('country') || site_settings.defaultshipcountry\n\t,\tapplication = this.view.options.application || this.view.options.wizard.application;\n\n\tif (quantity_countries === 1)\n\t{\n\t\tselected_country = _.keys(countries)[0];\n\t}\n%>\n<fieldset>\n\t<div data-type=\"alert-placeholder\"><\/div>\n\t\n\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"<%= manage %>fullname\">\n\t\t\t<%= _('Full Name').translate() %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<input type=\"text\" class=\"input-xlarge\" id=\"<%= manage %>fullname\" name=\"fullname\" value=\"<%- address.get('fullname')%>\">\n\t\t<\/div>\n\t<\/div>\n\t<% \/* \n\tTODO: the next field should be shown\/hidden depending on a feature in Setup Website > Shopping\n\tregistration has 2 fields: displaycompanyfield and showcompanyfield, not sure which to use \n\t*\/ %>\n\t<% if (site_settings.registration.displaycompanyfield === 'T') { %>\n\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"<%= manage %>company\">\n\t\t\t<%= _('Company').translate() %>\n\t\t\t<% if (site_settings.registration.companyfieldmandatory === 'T') { %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t\t<% } %>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<input\n\t\t\t\ttype=\"text\"\n\t\t\t\tclass=\"input-xlarge\"\n\t\t\t\tid=\"<%= manage %>company\"\n\t\t\t\tname=\"company\"\n\t\t\t\tvalue=\"<%- address.get('company') %>\"\n\t\t\t\t<% if (site_settings.registration.companyfieldmandatory !== 'T') { %>\n\t\t\t\t\tplaceholder=\"<%= _('(optional)').translate() %>\"\n\t\t\t\t<% } %>\n\t\t\t>\n\t\t<\/div>\n\t<\/div>\n\t<% } %>\n\t\n\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"<%= manage %>addr1\">\n\t\t\t<%= _('Address').translate() %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<input type=\"text\" class=\"input-xlarge\" id=\"<%= manage %>addr1\" name=\"addr1\" value=\"<%- address.get('addr1') %>\">\n\t\t<\/div>\n\t\t<span class=\"help-block\">\n\t\t\t<%= _('Example: 1234 Main Street').translate() %>\n\t\t<\/span>\n\t<\/div>\n\n\t<div class=\"control-group control-group-big\">\n\t\t<div class=\"controls\">\n\t\t\t<input type=\"text\" class=\"input-xlarge\" id=\"<%= manage %>addr2\" name=\"addr2\" value=\"<%- address.get('addr2') %>\" placeholder=\"<%= _('(optional)').translate() %>\">\n\t\t<\/div>\n\t\t<span class=\"help-block\">\n\t\t\t<%= _('Example: Apt. 3 or Suite #1516').translate() %>\n\t\t<\/span>\n\t<\/div>\n\t\n\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"<%= manage %>city\">\n\t\t\t<%= _('City').translate() %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<input type=\"text\" class=\"input-xlarge\" id=\"<%= manage %>city\" name=\"city\" value=\"<%- address.get('city') %>\">\n\t\t<\/div>\n\t<\/div>\n\n\t<div class=\"control-group <%= quantity_countries <= 1 ? 'hide' : '' %>\">\n\t\t<label class=\"control-label\" for=\"<%= manage %>country\">\n\t\t\t<%= _('Country').translate() %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<%= SC.macros.countriesDropdown(countries, selected_country, manage) %>\n\t\t<\/div>\n\t<\/div>\n\n\t<div class=\"control-group\">\n\t\t<%= SC.macros.statesDropdown({\n\t\t\tcountries: options.countries\n\t\t,\tselectedCountry: selected_country\n\t\t,\tselectedState: address.get('state')\n\t\t,\tmanage: manage\n\t\t}) %>\n\t<\/div>\n\n\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"<%= manage %>zip\">\n\t\t\t<%= _('Zip Code').translate() %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<input type=\"text\" class=\"input-medium\" id=\"<%= manage %>zip\" name=\"zip\" value=\"<%- address.get('zip') %>\" data-type=\"zip\">\n\t\t<\/div>\n\t\t<span class=\"help-block\">\n\t\t\t<%= _('Example: 94117').translate() %>\n\t\t<\/span>\n\t<\/div>\n\t\n\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"<%= manage %>phone\">\n\t\t\t<%= _('Phone Number').translate() %>\n\t\t\t<small>\n\t\t\t\t<%= _('(required)').translate() %>\n\t\t\t<\/small>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<input type=\"tel\" class=\"input-xlarge\" id=\"<%= manage %>phone\" name=\"phone\" value=\"<%- address.get('phone') %>\" data-type=\"phone\">\n\t\t<\/div>\n\t\t<span class=\"help-block\">\n\t\t\t<%= _('Example: 555-123-1234').translate() %>\n\t\t<\/span>\n\t<\/div>\n\t\n\t<div class=\"control-group\">\n\t\t<div class=\"controls\">\n\t\t\t<label class=\"checkbox\">\n\t\t\t\t<input type=\"checkbox\" id=\"<%= manage %>isresidential\" value=\"T\" data-unchecked-value=\"F\" name=\"isresidential\" <%= address.get('isresidential') === 'T' ? 'checked' : '' %>>\n\t\t\t\t<%= _('This is a Residential Address').translate() %>\n\t\t\t\t<a href=\"#\" rel=\"tooltip\" data-toggle=\"tooltip\" title=\"<%= _('Indicating that this is a residential address will help us determine the best delivery method for your items.').translate() %>\">\n\t\t\t\t\t<i class=\"icon-question-sign\"><\/i>\n\t\t\t\t<\/a>\n\t\t\t<\/label>\n\t\t<\/div>\n\t<\/div>\n\t\n\t<% if (!options.hideDefaults) { %>\n\t\t<div class=\"control-group\">\n\t\t\t<div class=\"controls\">\n\t\t\t\t<label class=\"checkbox\">\n\t\t\t\t\t<input type=\"checkbox\" id=\"<%= manage %>defaultbilling\" value=\"T\" data-unchecked-value=\"F\" name=\"defaultbilling\" <%= address.get('defaultbilling') === 'T' ? 'checked' : '' %>>\n\t\t\t\t\t<%= application.getConfig('currentTouchpoint') === 'checkout' ? _('Save as my primary billing address').translate() : _('Make this my default billing address').translate() %>\n\t\t\t\t<\/label>\n\t\t\t<\/div>\n\t\t<\/div>\n\t<% } %>\n\n\t<% if (!options.hideDefaults) { %>\n\t\t<div class=\"control-group\">\n\t\t\t<div class=\"controls\">\n\t\t\t\t<label class=\"checkbox\">\n\t\t\t\t\t<input type=\"checkbox\" id=\"<%= manage %>defaultshipping\" value=\"T\" data-unchecked-value=\"F\" name=\"defaultshipping\" <%= address.get('defaultshipping') === 'T' ? 'checked' : '' %>>\n\t\t\t\t\t<%= application.getConfig('currentTouchpoint') === 'checkout' ? _('Save as my primary shipping address').translate() : _('Make this my default shipping address').translate() %>\n\t\t\t\t<\/label>\n\t\t\t<\/div>\n\t\t<\/div>\n\t<% } %>\n<\/fieldset>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('address', function (address, options) { \n\toptions = options || {}; \n\n\tvar label = address.get('label')\n\t,\tcompany = (SC.ENVIRONMENT.siteSettings.registration.displaycompanyfield === 'T') ? address.get('company') : null\n\t,\tfullname = address.get('fullname')\n\t,\tcountries = SC.ENVIRONMENT.siteSettings.countries\n\t,\tcountry_object = countries[address.get('country')]\n\t,\tcountry = (country_object)? country_object.name : address.get('country')\n\t,\tstate_object = (country_object && country_object.states)? _.findWhere(countries[address.get('country')].states, {code: address.get('state')}): null\n\t,\tstate = (state_object)? state_object.name: address.get('state');\n\n\t\n\n%>\n<article class=\"address\">\n\t<address class=\"\">\n\t\t<span class=\"address-line address-title summary-header\">\n\t\t\t<%= label || company || fullname %>\n\t\t<\/span>\n\n\t\t<% if (label && company) { %>\n\t\t\t<span class=\"address-line address-company\">\n\t\t\t\t<%= company %>\n\t\t\t<\/span>\n\t\t\t<span class=\"address-line address-name\">\n\t\t\t\t<%= fullname %>\n\t\t\t<\/span>\n\t\t<% } else if (label ? !company : company ) { %>\n\t\t\t<span class=\"address-line address-name\">\n\t\t\t\t<%= fullname %>\n\t\t\t<\/span>\n\t\t<% } %>\n\t\t<span class=\"address-line address-addr1\">\n\t\t\t<%= address.get('addr1') %>\n\t\t<\/span>\n\t\t<% if (address.get('addr2')) { %>\n\t\t\t<span class=\"address-line address-addr2\">\n\t\t\t\t<%= address.get('addr2') %>\n\t\t\t<\/span>\n\t\t<% } %>\n\t\t<span class=\"address-line\">\n\t\t\t<span class=\"address-city\">\n\t\t\t\t<%= address.get('city') %>\n\t\t\t<\/span>\n\t\t\t<% if (address.get('state')) { %>\n\t\t\t\t<span class=\"address-state\">\n\t\t\t\t\t<%= state %>\n\t\t\t\t<\/span>\n\t\t\t<% } %>\n\t\t\t<span class=\"address-zip\">\n\t\t\t\t<%= address.get('zip') %>\n\t\t\t<\/span>\n\t\t<\/span>\n\t\t<span class=\"address-line address-country\">\n\t\t\t<%= country %>\n\t\t<\/span>\n\t\t<span class=\"address-line address-phone\">\n\t\t\t<%= address.get('phone') %>\n\t\t<\/span>\n\t<\/address>\n\t\t\n\t<% if (!options.hideDefaults) { %>\n\t\t<% if (address.get('defaultshipping') === 'T') { %>\n\t\t<p>\n\t\t\t<i class=\"icon-star\"><\/i>\n\t\t\t<%= _('Default Shipping Address').translate() %>\n\t\t<\/p>\n\t\t<% } %>\n\t\t<% if (address.get('defaultbilling') === 'T') { %>\n\t\t<p>\n\t\t\t<i class=\"icon-star\"><\/i>\n\t\t\t<%= _('Default Billing Address').translate() %>\n\t\t<\/p>\n\t\t<% } %>\n\t<% } %>\n\n\t<% if (options.showSelect) { %>\n\t\t<button class=\"btn btn-primary btn-block\" data-action=\"select\" data-id=\"<%- address.get('internalid') %>\">\n\t\t\t<%= options.selectMessage || _('Select this address').translate() %>\n\t\t<\/button>\n\t<% } %>\n\n\t<% if (!options.hideActions) { %>\n\t<p class=\"actions\">\n\t\t<a class=\"btn btn-link\" href=\"\/addressbook\/<%- address.get('internalid') %>\" data-toggle=\"show-in-modal\">\n\t\t\t<%= _('Edit Address').translate() %>\n\t\t<\/a>\n\n\t\t<button class=\"btn btn-link\" data-action=\"remove\" data-id=\"<%- address.get('internalid') %>\">\n\t\t\t<%= _('Remove').translate() %>\n\t\t<\/button>\n\t<\/p>\n\t<% } %>\n<\/article>\n<% }) %>\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('registerFormFields', function(options) { %>\n<% options = options || {} %>\n\n<div data-type=\"alert-placeholder\"><\/div>\n\n<div class=\"control-group\">\n\t<label class=\"control-label\" for=\"register-firstname\">\n\t\t<%= _('First Name <small>(required)<\/small>').translate() %>\n\t<\/label>\n\t<div class=\"controls\">\n\t\t<input type=\"text\" name=\"firstname\" id=\"register-firstname\" class=\"input-xlarge\">\n\t<\/div>\n<\/div>\n\n<div class=\"control-group\">\n\t<label class=\"control-label\" for=\"register-lastname\">\n\t\t<%= _('Last Name <small>(required)<\/small>').translate() %>\n\t<\/label>\n\t<div class=\"controls\">\n\t\t<input type=\"text\" name=\"lastname\" id=\"register-lastname\" class=\"input-xlarge\">\n\t<\/div>\n<\/div>\n\n<%\n\tvar show_company_field = SC.ENVIRONMENT.siteSettings.registration.showcompanyfield === 'T'\n\t,\trequire_company_field = SC.ENVIRONMENT.siteSettings.registration.companyfieldmandatory === 'T'\n\t,\tsite_name = SC.ENVIRONMENT.siteSettings.displayname\n\t,\temail_subscribe_checked = this.view.wizard && this.view.wizard.application.getUser().get('isGuest') === 'T' && this.view.wizard.application.getUser().get('emailsubscribe') === 'T';\n%>\n<% if (show_company_field) { %>\n\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"register-company\">\n\t\t\t<% if (require_company_field) { %>\n\t\t\t\t<%= _('Company <small>(required)<\/small>').translate() %>\n\t\t\t<% } else { %>\n\t\t\t\t<%= _('Company').translate() %>\n\t\t\t<% } %>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<input type=\"text\" name=\"company\" id=\"register-company\" class=\"input-xlarge\" placeholder=\"<%- require_company_field ? '' : _('(optional)').translate() %>\">\n\t\t<\/div>\n\t<\/div>\n<% } %>\n\n<div class=\"control-group\">\n\t<label class=\"control-label\" for=\"register-email\">\n\t\t<%= _('Email Address <small>(required)<\/small>').translate() %>\n\t<\/label>\n\t<div class=\"controls\">\n\t\t<input type=\"email\" name=\"email\" id=\"register-email\" class=\"input-xlarge\" placeholder=\"<%- _('your@email.com').translate() %>\"  value=\"<%- options.view && options.view.guestEmail || '' %>\" >\n\t\t<span class=\"help-block\">\n\t\t\t<small>\n\t\t\t\t<%= _('We need your email address to contact you about your order.').translate() %>\n\t\t\t<\/small>\n\t\t<\/span>\n\t<\/div>\n<\/div>\n<div class=\"control-group\">\n\t<label class=\"control-label\" for=\"register-password\">\n\t\t<%= _('Password <small>(required)<\/small>').translate() %>\n\t<\/label>\n\t<div class=\"controls\">\n\t\t<input type=\"password\" name=\"password\" id=\"register-password\" class=\"input-xlarge\">\n\t<\/div>\n<\/div>\n\n<div class=\"control-group\">\n\t<label class=\"control-label\" for=\"register-password2\">\n\t\t<%= _('Re-Enter Password <small>(required)<\/small>').translate() %>\n\t<\/label>\n\t<div class=\"controls\">\n\t\t<input type=\"password\" name=\"password2\" id=\"register-password2\" class=\"input-xlarge\">\n\t<\/div>\n<\/div>\n\n<div class=\"control-group\">\n\t<label class=\"checkbox\">\n\t\t<input type=\"checkbox\" name=\"emailsubscribe\" id=\"register-emailsubscribe\" value=\"T\" <%= email_subscribe_checked ? 'checked' : '' %> >\n\t\t<%= _('Yes, Please sign me up for $(0) exclusive offers and promotions').translate(site_name) %>\n\t<\/label>\n<\/div>\n<% }) %>\n\n\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n","<% registerMacro('registerFormFields', function(options) { %>\n<% options = options || {} %>\n\n<div data-type=\"alert-placeholder\"><\/div>\n\n<div class=\"control-group\">\n\t<label class=\"control-label\" for=\"register-firstname\">\n\t\t<%= _('First Name <small>(required)<\/small>').translate() %>\n\t<\/label>\n\t<div class=\"controls\">\n\t\t<input type=\"text\" name=\"firstname\" id=\"register-firstname\" class=\"input-xlarge\">\n\t<\/div>\n<\/div>\n\n<div class=\"control-group\">\n\t<label class=\"control-label\" for=\"register-lastname\">\n\t\t<%= _('Last Name <small>(required)<\/small>').translate() %>\n\t<\/label>\n\t<div class=\"controls\">\n\t\t<input type=\"text\" name=\"lastname\" id=\"register-lastname\" class=\"input-xlarge\">\n\t<\/div>\n<\/div>\n\n<%\n\tvar show_company_field = SC.ENVIRONMENT.siteSettings.registration.showcompanyfield === 'T'\n\t,\trequire_company_field = SC.ENVIRONMENT.siteSettings.registration.companyfieldmandatory === 'T'\n\t,\tsite_name = SC.ENVIRONMENT.siteSettings.displayname\n\t,\temail_subscribe_checked = this.view.wizard && this.view.wizard.application.getUser().get('isGuest') === 'T' && this.view.wizard.application.getUser().get('emailsubscribe') === 'T';\n%>\n<% if (show_company_field) { %>\n\t<div class=\"control-group\">\n\t\t<label class=\"control-label\" for=\"register-company\">\n\t\t\t<% if (require_company_field) { %>\n\t\t\t\t<%= _('Company <small>(required)<\/small>').translate() %>\n\t\t\t<% } else { %>\n\t\t\t\t<%= _('Company').translate() %>\n\t\t\t<% } %>\n\t\t<\/label>\n\t\t<div class=\"controls\">\n\t\t\t<input type=\"text\" name=\"company\" id=\"register-company\" class=\"input-xlarge\" placeholder=\"<%- require_company_field ? '' : _('(optional)').translate() %>\">\n\t\t<\/div>\n\t<\/div>\n<% } %>\n\n<div class=\"control-group\">\n\t<label class=\"control-label\" for=\"register-email\">\n\t\t<%= _('Email Address <small>(required)<\/small>').translate() %>\n\t<\/label>\n\t<div class=\"controls\">\n\t\t<input type=\"email\" name=\"email\" id=\"register-email\" class=\"input-xlarge\" placeholder=\"<%- _('your@email.com').translate() %>\"  value=\"<%- options.view && options.view.guestEmail || '' %>\" >\n\t\t<span class=\"help-block\">\n\t\t\t<small>\n\t\t\t\t<%= _('We need your email address to contact you about your order.').translate() %>\n\t\t\t<\/small>\n\t\t<\/span>\n\t<\/div>\n<\/div>\n<div class=\"control-group\">\n\t<label class=\"control-label\" for=\"register-password\">\n\t\t<%= _('Password <small>(required)<\/small>').translate() %>\n\t<\/label>\n\t<div class=\"controls\">\n\t\t<input type=\"password\" name=\"password\" id=\"register-password\" class=\"input-xlarge\">\n\t<\/div>\n<\/div>\n\n<div class=\"control-group\">\n\t<label class=\"control-label\" for=\"register-password2\">\n\t\t<%= _('Re-Enter Password <small>(required)<\/small>').translate() %>\n\t<\/label>\n\t<div class=\"controls\">\n\t\t<input type=\"password\" name=\"password2\" id=\"register-password2\" class=\"input-xlarge\">\n\t<\/div>\n<\/div>\n\n<div class=\"control-group\">\n\t<label class=\"checkbox\">\n\t\t<input type=\"checkbox\" name=\"emailsubscribe\" id=\"register-emailsubscribe\" value=\"T\" <%= email_subscribe_checked ? 'checked' : '' %> >\n\t\t<%= _('Yes, Please sign me up for $(0) exclusive offers and promotions').translate(site_name) %>\n\t<\/label>\n<\/div>\n<% }) %>\n\n\n {eval}exported.null = null.wrap(function(){var retval, args = $A(arguments), orig_function = args.shift();try{ retval = orig_function.apply(this, args);}catch(e){ var msg = e; if(e.message){msg = e.message;} alert(\"err in macro null: \"+msg);}return retval;});{\/eval}\n"],"reset_password_tmpl":"<div class=\"row\">\n\t<div class=\"span5\">\n\n\t\t<h2><%= _('Reset Password').translate() %><\/h2>\n\n\t\t<div>\n\t\t\t<form>\n\t\t\t\t<p><%= _('Enter a new password below for <b>$(0)<\/b>').translate(view.email) %><\/p>\n\t\t\t\t<fieldset>\n\t\t\t\t\t<div data-type=\"alert-placeholder\"><\/div>\n\t\t\t\t\t\n\t\t\t\t\t<div class=\"control-group\">\n\t\t\t\t\t\t<label class=\"control-label\" for=\"password\"><%= _('Password <small>(required)<\/small>').translate() %><\/label>\n\t\t\t\t\t\t<div class=\"controls\">\n\t\t\t\t\t\t\t<input type=\"password\" class=\"input-large\" id=\"password\" name=\"password\" value=\"\">\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\n\t\t\t\t\t<div class=\"control-group\">\n\t\t\t\t\t\t<label class=\"control-label\" for=\"confirm_password\"><%= _('Confirm Password <small>(required)<\/small>').translate() %><\/label>\n\t\t\t\t\t\t<div class=\"controls\">\n\t\t\t\t\t\t\t<input type=\"password\" class=\"input-large\" id=\"confirm_password\" name=\"confirm_password\" value=\"\">\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\n\t\t\t\t\t<button type=\"submit\" class=\"btn btn-primary btn-large btn-block\"><%=_('Change password').translate()%><\/button>\n\t\t\t\t\t\n\t\t\t\t<\/fieldset>\n\t\t\t<\/form>\n\t\t\t<p><a href=\"\/login-register\" data-target=\".register\"><%= _('Cancel & Return To Sign In > ').translate()%><\/a><\/p>\n\t\t<\/div>\n\n\t<\/div>\n<\/div>","accordion_wizard_tmpl":"<div class=\"accordion\">\n\t<% _.each(view.wizard.getStepGroups(), function(step_group) { %>\n\t\t<div class=\"accordion-group\">\n\t\t\t<div class=\"accordion-heading\">\n\t\t\t<% if (step_group.state === 'future') { %>\n\t\t\t\t<a class=\"accordion-toggle muted\" href=\"<%- Backbone.history.fragment %>\">\n\t\t\t\t\t<%= step_group.name %>\n\t\t\t\t<\/a>\n\t\t\t<% } else { %>\n\t\t\t\t<a class=\"accordion-toggle \" href=\"<%- step_group.url %>\">\n\t\t\t\t\t<%= step_group.name %>\n\t\t\t\t<\/a>\n\t\t\t<% } %>\n\t\t\t<\/div>\n\t\t\t<% if (step_group.state === 'present') { %>\n\t\t\t\t<div class=\"accordion-body collapse in\">\n\t\t\t\t\t<div class=\"accordion-inner\">\n\t\t\t\t\t\t<div id=\"wizard-content\" class=\"wizard-content\"><\/div>\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t<% } %>\n\t\t<\/div>\n\t<% }) %>\n<\/div>","creditcard_tmpl":"<% view.model = view.model || new Backbone.Model(); %>\n<% if (!view.inModal) { %>\n\t<h1>\n\t\t<%= view.model.isNew() ? _('Add a new Credit Card').translate() : _('Edit Credit Card').translate() %>\n\t<\/h1>\n\n\t<a href=\"\/\" class=\"back-btn\">\n\t\t<%= _('&lt; Back to Account').translate() %>\n\t<\/a>\n\n\t<% if (!view.collection.length) { %>\n\t\t<p>\n\t\t\t<!-- TODO: Remove BR -->\n\t\t\t<b><%= _('We have no Credit Card on file for this account.').translate() %><\/b><br>\n\t\t\t<%= _('For faster checkouts, please enter your payment information below').translate() %>\n\t\t<\/p>\n\t<% } %>\n<% } %>\n\n<form action=\"addressbook.ss\" method=\"POST\">\n\t<% if (view.inModal) { %>\n\t\t<div class=\"modal-body\">\n\t<% } %>\n\n\t<%= creditcardForm(view.model, view.options) %>\n\n\t<% if (view.inModal) { %>\n\t\t<\/div>\n\t<% } %>\n\n\t<div class=\"<%- view.inModal ? 'modal-footer left-aligned' : 'form-actions' %>\">\n\t\t<button type=\"submit\" class=\"btn btn-primary\">\n\t\t\t<%= view.model.isNew() ? _('Add Card').translate() : _('Update Card').translate() %>\n\t\t<\/button>\n\n\t\t<% if (view.inModal || view.collection.length) { %>\n\t\t\t<btn class=\"btn btn-link\" data-dismiss=\"modal\">\n\t\t\t\t<%= _('Cancel').translate() %>\n\t\t\t<\/btn>\n\t\t<% } %>\n\n\t\t<% if (!view.inModal) { %>\n\t\t\t<button type=\"reset\" class=\"btn btn-link hide\" data-action=\"reset\">\n\t\t\t\t<%= _('Reset').translate() %>\n\t\t\t<\/button>\n\t\t<% } %>\n\t<\/div>\n<\/form>","wizard_step_tmpl":"<% if (view.getName()) { %>\n\t<header class=\"page-header step-header\">\n\t\t<h2><%= view.getName() %><\/h2>\n\t<\/header>\n<% } %>\n\n<div data-type=\"alert-placeholder-step\"><\/div>\n\n<% if (!view.hideContinueButton) { %>\n<div class=\"step-navigation-buttons-top form-actions form-actions-top\">\n\t<button class=\"btn btn-primary btn-large btn-block btn-continue\" data-action=\"submit-step\">\n\t\t<%= view.continueButtonLabel %>\n\t<\/button>\n<\/div>\n<% } %>\n\n<div id=\"wizard-step-content\" class=\"wizard-step-content\"><\/div>\n\n<div class=\"step-navigation-buttons form-actions\">\n\t<% if (!view.hideContinueButton) { %>\n\t\t<button class=\"btn btn-primary btn-large btn-continue<%=(view.hideSecondContinueButtonOnPhone)? ' hidden-phone': ''%>\" data-action=\"submit-step\">\n\t\t\t<%= view.continueButtonLabel %>\n\t\t<\/button>\n\t<% } %>\t\t\n\t<% if (!view.hideBackButton) { %>\n\t\t<button class=\"btn btn-large btn-back\" data-action=\"previous-step\">\n\t\t\t<%= _('Back').translate() %>\n\t\t<\/button>\n\t<% }  %>\n<\/div>\n\n<% if (view.bottomMessage) { %>\n\t<br>\n\t<p class=\"help-block stepgroup-bottom-message\">\n\t\t<%= view.bottomMessage %>\n\t<\/p>\n<% } %>\n","order_wizard_paymentmethod_selector_module_tmpl":"<% var active_modules = _.filter(view.modules,function(module){ return module.isActive;}) %>\n<h4 class=\"section-header\">\n\t<% if (active_modules.length > 1) { %>\n\t\t<%= _('Pay With:').translate() %>\n\t<% } else { %>\n\t\t<%= _('Pay With: $(0)').translate(active_modules[0].name) %>\n\t<% }  %>\n<\/h4>\n\n<% if (active_modules.length > 1) { %>\n\t<ul class=\"nav nav-tabs\">\n\t<% _.each(view.modules, function (module) { %>\n\t<% if (module.isActive) { %>\n\t\t<li class=\"<%- view.selectedModule.type === module.type ? 'active' : ''%>\">\n\t\t\t<a data-target=\"#payment-method-selector-<%= module.type %>\" data-toggle=\"tab\" data-type=\"<%- module.type %>\" href=\"#\">\n\t\t\t\t<%= module.name %>\n\t\t\t<\/a>\n\t\t<\/li>\n\t<% } %>\n\t<% }) %>\n\t<\/ul>\n<% }  %>\n\n<div class=\"tab-content\">\n<% _.each(view.modules, function (module) { %>\n\t<% if (module.isActive) { %>\n\t\t<div class=\"tab-pane <%= view.selectedModule.type === module.type ? 'active' : ''%> payment-method-selector-<%= module.type %>\" id=\"payment-method-selector-<%= module.type %>\"><\/div>\n\t<% } %>\n<% }) %>\n<\/div>","register_tmpl":"<p class=\"register-form-legend\">\n\t<%= _('Create an account and take advantage of faster checkouts and other great benefits.').translate() %>\n<\/p>\n\n<form class=\"register-form\">\n\t<%= registerFormFields() %>\n\t\n\t<div class=\"form-actions registration-actions\">\n\t\t<button type=\"submit\" class=\"btn btn-primary btn-large\">\n\t\t\t<%= _('Create Account').translate() %>\n\t\t<\/button>\n\t<\/div>\n<\/form>","quick_view_tmpl":"<div class=\"row-fluid\">\n\t<div class=\"span6 text-center\">\n\t\t<% var thumbnail = view.model.get('_thumbnail'); %>\n\t\t<img src=\"<%= view.options.application.resizeImage(thumbnail.url, 'main') %>\" alt=\"<%= thumbnail.altimagetext %>\">\n\t<\/div>\n\t<div class=\"span6\">\n\t\t<div class=\"details-header\">\n\t\t\t<span class=\"pull-right\">\n\t\t\t\t<%= _('SKU: #$(0)').translate(view.model.get('_sku')) %>\n\t\t\t<\/span>\n\t\t\t<div class=\"lead lead-small no-margin-bottom\">\n\t\t\t\t<%= showItemPrice(view.model) %>\n\t\t\t<\/div>\n\t\t<\/div>\n\n\t\t<a data-touchpoint=\"home\" data-hashtag=\"<%= view.model.get('_url') %>\" href=\"<%= view.model.get('_url') %>\">\n\t\t\t<%= _('View full details').translate() %>\n\t\t<\/a>\n\n\t\t<% if (!view.model.isProperlyConfigured()) { %>\n\n\t\t\t<div class=\"alert alert-error\">\n\t\t\t\t<%= _('<b>Warning<\/b>: This item is not properly configured, please contact your administrator.').translate() %>\n\t\t\t<\/div>\n\n\t\t<% } else {\n\t\t\t\/*\n\t\t\tRender a single option placeholder:\n\t\t\t===================================\n\t\t\tAny HTML element that matches [data-type=option], if it's rendered by ItemDetails.View \n\t\t\twill be populated by the render of a single macro for a single option, especified by the attributes:\n\t\t\t\tdata-cart-option-id: the id of the cart opion\n\t\t\t\tdata-macro: the macro you want this option to be rendered with, if omited the default for the option will be used\n\t\t\t\n\t\t\t<div \n\t\t\t\tclass=\"options-container\" \n\t\t\t\tdata-type=\"option\" \n\t\t\t\tdata-cart-option-id=\"cart_option_id\" \n\t\t\t\tdata-macro=\"macroName\">\n\t\t\t<\/div>\n\t\t\tRender all options placeholder:\n\t\t\t===============================\n\t\t\tAny HTML element that matches [data-type=all-options], if it's rendered by ItemDetails.View \n\t\t\twill be populated with the result of the execution of all the options with the macros, \n\t\t\teither the default one or the one configured in the itemOptions array.\n\t\t\tUse the data-exclude-options to select the options you dont want to be rendered here,\n\t\t\tthis is a coma separated list, for instace: cart_option_id1, cart_option_id2\n\t\t\t*\/\n\t\t%>\n\t\t\t<div \n\t\t\t\tclass=\"options-container\" \n\t\t\t\tdata-type=\"all-options\" \n\t\t\t\tdata-exclude-options=\"\">\n\t\t\t<\/div>\n\t\t\t\t\t\t\n\t\t\t<form action=\"#\" class=\"form-inline\">\n\t\t\t\t<% if (view.model.get('_itemType') !== 'GiftCert'){ %>\n\t\t\t\t\t<label for=\"quantity\">\n\t\t\t\t\t\t<%= view.model.get('_minimumQuantity') !== 1 ? _('Quantity (Minimum of $(0) required)').translate(view.model.get('_minimumQuantity')) : _('Quantity').translate() %>\n\t\t\t\t\t<\/label>\n\t\t\t\t\t<div class=\"control-group\">\n\t\t\t\t\t\t<input type=\"number\" name=\"quantity\" id=\"quantity\" class=\"input-mini quantity\" value=\"<%= view.model.get('quantity') %>\" min=\"1\">\n\t\t\t\t<% } else { %>\n\t\t\t\t\t<div class=\"control-group\">\n\t\t\t\t\t\t<input type=\"hidden\" name=\"quantity\" id=\"quantity\" value=\"1\">\n\t\t\t\t<% } %>\n\t\t\t\t\t<%= itemDetailsStock(view.model.getStockInfo()) %>\n\t\t\t\t<\/div>\n\t\t\t\t<button data-type=\"add-to-cart\" class=\"btn btn-primary btn-large add-to-cart\"<% if (!view.model.isReadyForCart()) {%> disabled<%}%>>\n\t\t\t\t\t<i class=\"icon-shopping-cart icon-white\"><\/i>\n\t\t\t\t\t<%=  view.model.cartItemId ? _('Update').translate() : _('Add to Cart').translate() %>\n\t\t\t\t<\/button>\n\t\t\t<\/form>\n\t\t<% } %>\n\t<\/div>\n<\/div>","order_wizard_layout_tmpl":"<% var position = view.wizard.getStepPosition() %>\n<% if(!view.wizard.getCurrentStep().hideBreadcrumb && position.toLast > 0){ %>\n\t<header class=\"order-wizard-layout-header\">\n\t<%= wizadStepNavigation(view.wizard.stepGroups) %>\n\t<\/header>\n<%}%>\n<div class=\"row-fluid <%= position.toLast === 1 ? 'review-step' : '' %>\">\n\t<div class=\"span6\">\n\t\t<div id=\"wizard-content\" class=\"wizard-content\"><\/div>\n\t<\/div>\n\t<div class=\"offset2 span4\" id=\"order-summary\">\n\n\t<\/div>\n<\/div>","login_tmpl":"<h3><%= _('Returning customer').translate() %><\/h3>\n<p><%= _('Sign in below to checkout with an existing account:').translate() %><\/p>\n\n<div data-type=\"alert-placeholder\"><\/div>\n\n<form class=\"login-form\">\n\t<fieldset>\n\t\t<div class=\"control-group\">\n\t\t\t<label class=\"control-label\" for=\"login-email\">\n\t\t\t\t<%= _('Email Address <small>(required)<\/small>').translate() %>\n\t\t\t<\/label>\n\t\t\t<div class=\"controls\">\n\t\t\t\t<input type=\"email\" name=\"email\" id=\"login-email\" class=\"input-xlarge\" placeholder=\"<%- _('your@email.com').translate() %>\">\n\t\t\t<\/div>\n\t\t<\/div>\n\n\t\t<div class=\"control-group\">\n\t\t\t<label class=\"control-label\" for=\"login-password\">\n\t\t\t\t<%= _('Password <small>(required)<\/small>').translate() %>\n\t\t\t<\/label>\n\t\t\t<div class=\"controls\">\n\t\t\t\t<input type=\"password\" name=\"password\" id=\"login-password\" class=\"input-xlarge\">\n\t\t\t<\/div>\n\t\t<\/div>\n\n\t\t<div class=\"form-actions sign-in-actions\">\n\t\t\t<button type=\"submit\" class=\"btn btn-primary btn-large\">\n\t\t\t\t<%= _('Sign In').translate() %>\n\t\t\t<\/button>\n\n\t\t\t<a class=\"btn btn-link\" href=\"\/forgot-password\">\n\t\t\t\t<%=_('Forgot password?').translate()%>\n\t\t\t<\/a>\n\t\t<\/div>\n\t<\/fieldset>\n<\/form>","shopping_cart_confirmation_modal_tmpl":"<%\nvar line = view.line\n,\titem = line.get('item');\n%>\n<div class=\"row-fluid\">\n\t<div class=\"span4 item-thumbnail-container\">\n\t\t<div class=\"thumbnail\">\n\t\t\t<% var thumbnail = item.get('_thumbnail'); %>\n\t\t\t<img src=\"<%= view.options.application.resizeImage(thumbnail.url, 'main') %>\" alt=\"<%= thumbnail.altimagetext %>\">\n\t\t<\/div>\n\t<\/div>\n\t<div class=\"span8 item-details-container\">\n\t\t<h3 class=\"cart-confirmation-item-name\"><%= item.get('_name') %><\/h3>\n\t\t<p class=\"lead lead-small\">\n\t\t\t<%= SC.macros.showItemPrice(item) %>\n\t\t<\/p>\n\t\t\n\t\t<!-- Item Options -->\n\t\t<%= item.renderAllOptionSelected() %>\n\t\t\n\t\t<!-- Quantity -->\n\t\t<% if(item.get('_itemType') !== 'GiftCert') { %>\n\t\t\t<div class=\"quantity kore\"><%= _('Quantity: $(0)').translate(line.get('quantity')) %><\/div>\n\t\t<% } %>\n\t\t<div id=\"cart-confirmation-modal-message\" class=\"promotional-message cart-confirmation-modal-message\"><\/div>\n\t\t<div class=\"cart-modal-actions\">\n\t\t\t<a href=\"\/cart\" class=\"btn btn-primary view-cart\" data-trigger=\"go-to-cart\"><%= _('View Cart &amp; Checkout').translate() %><\/a>\n\t\t\t<a href=\"#\" class=\"btn continue-shopping\" data-dismiss=\"modal\"><%= _('Continue Shopping').translate() %><\/a>\n\t\t<\/div>\n\t<\/div>\n<\/div>\n<% if (item.get('_relatedItems') && item.get('_relatedItems').length) { %>\n<div class=\"related-items\">\n\t<h4><%= _('You may also like').translate() %><\/h4>\n\t<div class=\"row-fluid\">\n\t\t<%\n\t\t\tvar relatedWrap = function relatedWrap (item) {\n\t\t\t\treturn SC.macros.relatedItem(item, view.options.application);\n\t\t\t};\n\t\t%>\n\t\t<%= displayInRows(item.get('_relatedItems').first(3), relatedWrap, 3) %>\n\t<\/div>\n<\/div>\n<% } %>\n","internal_error_tmpl":"<div class=\"view-header\">\n\t<% if (view.page_header) { %>\n\t<h1><%= view.page_header %><\/h1>\n\t<% } %>\n\t<div id=\"main-banner\" class=\"main-banner\"><\/div>\n<\/div>\n<div id=\"internal-error-content\" class=\"view-body internal-error-content\">\n\t<%= view.options.message || _('Sorry, we could not load the content you requested.').translate() %>\n<\/div>","order_wizard_termsandconditions_module_tmpl":"<% if (view.options.show_checkbox) { %>\n<label class=\"checkbox\">\n\t<input type=\"checkbox\" id=\"termsandconditions\" name=\"termsandconditions\" <%= view.wizard.model.get('agreetermcondition') ? 'checked' : ''%>>\n\t<%= _('I agree to the <a data-toggle=\"show-terms\" href=\"#\">Terms & Conditions<\/a>').translate() %>\n<\/label>\n<% } else { %>\n<p>\n\t<%= _('By placing your order, you are agree to our <a data-toggle=\"show-terms\" href=\"#\">Terms & Conditions<\/a>').translate() %>\n<\/p>\n<% } %>","order_wizard_paymentmethod_invoice_module_tmpl":"<div class=\"payment-method-invoice\">\n\t<div class=\"row-fluid\">\n\t\t<div class=\"span4\">\n\t\t\t<p class=\"strong\">\n\t\t\t\t<%= _('Terms').translate() %>\n\t\t\t<\/p>\n\t\t\t<p>\n\t\t\t\t<%= view.terms.name %>\n\t\t\t<\/p>\n\t\t<\/div>\n\t\t<div class=\"span8\">\n\t\t\t<p class=\"strong\">\n\t\t\t\t<%= _('Available Balance').translate() %>\n\t\t\t<\/p>\n\t\t\t<p>\n\t\t\t\t<%= view.wizard.options.profile.get('balance_formatted') %>\n\t\t\t<\/p>\n\t\t<\/div>\n\t<\/div>\n\t<div class=\"row-fluid control-group purchase-order-number-container\">\n\t\t<label for=\"purchase-order-number\" class=\"control-label\">\n\t\t\t<%= _('Purchase Order Number (Optional)').translate() %>\n\t\t<\/label>\n\t\t<input\n\t\t\ttype=\"text\"\n\t\t\tname=\"purchase-order-number\"\n\t\t\tid=\"purchase-order-number\"\n\t\t\tclass=\"input-medium purchase-order-number\" \n\t\t\tvalue=\"<%= view.terms.purchasenumber || '' %>\"\n\t\t>\n\t<\/div>\n\t<% if (SC.ENVIRONMENT.siteSettings.checkout.requiretermsandconditions === 'T') { %>\n\t<p>\n\t\t<%= _('I agree to pay with my current Invoice <a data-toggle=\"show-terms\" href=\"#\">Terms & Conditions<\/a>').translate() %>\n\t<\/p>\n\t<% } %>\n<\/div>","order_wizard_shipmethod_module_tmpl":"<%\n\tvar is_active = false\n\t,\torder_delivery_method = view.model.get('shipmethod')\n\t,\tshipping_methods = view.model.get('shipmethods');\n%>\n\n<% if (view.getTitle()) { %>\n\t<h3 class=\"section-header\">\n\t\t<%= view.getTitle() %>\n\t<\/h3>\n<% } %>\n\n<form class=\"delivery-options\" action=\"\">\n\t<fieldset>\n\t\t<legend class=\"delivery-options-header section-header\">\n\t\t\t<%= _('Delivery options:').translate() %>\n\t\t<\/legend>\n\t\t<% if (!view.model.get('isEstimating') && !view.wizard.application.getUser().get('addresses').get(view.model.get('shipaddress'))) { %>\n\t\t\t<%= _('Warning: Please enter a valid shipping address first').translate() %>\n\t\t<% } else if (!shipping_methods.length) { %>\n\t\t\t<%= _('Warning: No Shipping Methods are available for this address').translate() %>\n\t\t<% } else { %>\n\t\t\t<% shipping_methods.each(function (shipmethod) { %>\n\t\t\t\t<% is_active = order_delivery_method === shipmethod.get('internalid') %>\n\t\t\t\t<label class=\"delivery-option <%= is_active ? 'active' : '' %>\">\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\tname=\"delivery-options\"\n\t\t\t\t\t\tid=\"delivery-options-<%= shipmethod.get('internalid')%>\"\n\t\t\t\t\t\tvalue=\"<%- shipmethod.get('internalid')%>\" \n\t\t\t\t\t\t<%= is_active ? 'checked' : '' %>\n\t\t\t\t\t>\n\t\t\t\t\t<span class=\"delivery-option-label\">\n\t\t\t\t\t\t<%= shipmethod.get('name') %>:\n\t\t\t\t\t<\/span>\n\t\t\t\t\t<span class=\"delivery-option-rate\">\n\t\t\t\t\t\t<%= shipmethod.get('rate_formatted') %>\n\t\t\t\t\t<\/span>\n\t\t\t\t<\/label>\n\t\t\t<% }); %>\n\t\t<% } %>\n\t<\/fieldset>\n<\/form>","order_wizard_address_module_tmpl":"<%\n\tvar is_same_as_enabled = view.isSameAsEnabled\n\t,\tselected_address = view.address\n\t,\taddress_book = view.getAddressesToShow();\n%>\n<% if (view.getTitle()) { %>\n\t<h3 class=\"section-header\">\n\t\t<%= view.getTitle() %>\n\t<\/h3>\n<% } %>\n\n<% if (is_same_as_enabled) { %>\n\t<label class=\"checkbox same-as-address\">\n\t\t<input\n\t\t\ttype=\"checkbox\"\n\t\t\tname=\"same-as-address\"\n\t\t\tdata-action=\"same-as\"\n\t\t\tdata-address=\"<%= view.manage %>\"\n\t\t\tvalue=\"1\"\n\t\t\t<%= view.sameAs ? 'checked' : '' %>\n\t\t>\n\t\t<%= view.sameAsMessage %>\n\t<\/label>\n<% } %>\n\n<% if ((is_same_as_enabled && view.sameAs) || view.addressId && !selected_address.isNew()) { %>\n\n\t<%= address(selected_address, {\n\t\thideActions: true\n\t,\thideDefaults: true\n\t}) %>\n\n\t<% if (!is_same_as_enabled || !view.sameAs) { %>\n\t\t<% if (!view.isGuest && !view.options.edit_url) { %>\n\t\t\t<a class=\"btn btn-link\" href=\"\/addressbook\/<%- selected_address.get('internalid') %>\" data-toggle=\"show-in-modal\">\n\t\t\t\t<%= _('Edit Address').translate() %>\n\t\t\t<\/a>\n\t\t<% } %>\n\n\t\t<a href=\"#\" class=\"btn btn-link\" data-action=\"change-address\">\n\t\t\t<%= view.changeLinkText %>\n\t\t<\/a>\n\t<% } %>\n<% } else if (address_book.length && !view.isGuest) { %>\n\t<div id=\"address-module-list-placeholder\" class=\"address-module-list-placeholder\">\n\t\t<p>\n\t\t\t<a class=\"btn btn-link\" href=\"\/addressbook\/new\" data-toggle=\"show-in-modal\">\n\t\t\t\t<%= _('Add New Address').translate() %>\n\t\t\t<\/a>\n\t\t<\/p>\n\n\t\t<%\n\t\t\t\/\/ Wrap the address address macro to pass options in\n\t\t\tvar addressWrap = function (address) {\n\t\t\t\treturn SC.macros['address'](address, {\n\t\t\t\t\tshowSelect: true\n\t\t\t\t,\tselectMessage: view.selectMessage\n\t\t\t\t,\thideDefaults: true\n\t\t\t\t});\n\t\t\t}\n\t\t%>\n\n\t\t<%= displayInRows(address_book.models, addressWrap, view.wizard.application.getConfig('itemsPerRow', 2)) %>\n\t<\/div>\n<% } else { %>\n\t<div id=\"address-module-form-placeholder\" class=\"address-module-form-placeholder\">\n\t\t<form method=\"POST\">\n\t\t<%= addressFrom(selected_address, {\n\t\t\t\tcountries: view.wizard.application.getConfig('siteSettings.countries')\n\t\t\t,\tmanage: view.manage\n\t\t\t,\thideDefaults: true\n\t\t}) %>\n\t\t<\/form>\n\n\t\t<% if (view.showSaveButton) { %>\n\t\t\t<div class=\"form-actions\">\n\t\t\t\t<button type=\"submit\" class=\"btn btn-primary\" data-action=\"submit\">\n\t\t\t\t\t<%= _('Save Address').translate() %>\n\t\t\t\t<\/button>\n\t\t\t<\/div>\n\t\t<% } %>\t\n\t<\/div>\n<% } %>","order_wizard_showshipments_module_tmpl":"<section class=\"shipments-shipping-details\">\n\t<div class=\"row-fluid shipments-shipping-details-body\">\n\t\t<div class=\"span6 shipments-shipping-address\">\n\t\t\t<h4 class=\"section-header\">\n\t\t\t\t<%= _('Shipping Address').translate() %>\n\t\t\t<\/h4>\n\t\t\t\n\t\t\t<%= address(view.profile.get('addresses').get(view.model.get('shipaddress')), {\n\t\t\t\thideActions: true\n\t\t\t,\thideDefaults: true\n\t\t\t}) %>\n\n\t\t\t<% if (view.options.edit_url) { %>\n\t\t\t\t<a href=\"<%- view.options.edit_url %>?force=true\" class=\"btn-edit-address\">\n\t\t\t\t\t<%= _('Edit').translate() %>\n\t\t\t\t<\/a>\n\t\t\t<% } %>\n\t\t<\/div>\n\t\t<div class=\"span6 shipments-shipping-method\">\n\t\t\t<h4 class=\"section-header\">\n\t\t\t\t<%= _('Shipping Method').translate() %>\n\t\t\t<\/h4>\n\t\t\t<% if (view.options.edit_url) { %>\n\t\t\t\t<select id=\"delivery-options\" class=\"input-xlarge\" name=\"delivery-options\">\n\t\t\t\t\t<% \n\t\t\t\t\tvar shipmethods = view.model.get('shipmethods')\n\t\t\t\t\t,\tselected_shipmethod = shipmethods.findWhere({internalid: view.model.get('shipmethod')});\n\t\t\t\t\t%>\n\t\t\t\t\t<% if(!selected_shipmethod){ %>\n\t\t\t\t\t\t<option><%= _('Please select a shipping method').translate() %><\/option>\n\t\t\t\t\t<% } %>\n\t\t\t\t\t<% shipmethods.each(function(shipmethod) { %>\n\t\t\t\t\t\t<option value=\"<%- shipmethod.get('internalid')%>\"\n\t\t\t\t\t\t\t<%= view.model.get('shipmethod') === shipmethod.get('internalid') ? 'selected' : '' %>>\n\t\t\t\t\t\t\t<%= shipmethod.get('name') %>: <%= shipmethod.get('rate_formatted') %>\n\t\t\t\t\t\t<\/option>\n\t\t\t\t\t<% }); %>\n\t\t\t\t<\/select>\n\t\t\t<% } else { %>\n\t\t\t\t<span class=\"shipmethod-name\">\n\t\t\t\t\t<%= view.model.get('shipmethods').get(view.model.get('shipmethod')).get('name') %>\n\t\t\t\t<\/span>\n\t\t\t\t: \n\t\t\t\t<span class=\"shipmethod-rate\">\n\t\t\t\t\t<%= view.model.get('shipmethods').get(view.model.get('shipmethod')).get('rate_formatted') %>\n\t\t\t\t<\/span>\t\t\t\t\n\t\t\t<% } %>\n\t\t<\/div>\n\t<\/div>\n<\/section>\n\n<section class=\"shipments-cart-details\">\n\t<div class=\"shipments-cart-details-header\">\n\t\t<h3>\n\t\t\t<%= _('Items').translate() %>\n\n\t\t\t<% if (view.options.show_edit_button) { %>\n\t\t\t\t<a href=\"#\" class=\"btn btn-link btn-edit-cart\" data-touchpoint=\"viewcart\">\n\t\t\t\t\t<%= _('Edit Order').translate() %>\n\t\t\t\t<\/a>\n\t\t\t<% } %>\n\t\t<\/h3>\n\t\t<h3 class=\"pull-right\"><%= _('Total').translate() %><\/h3>\n\t<\/div>\n\t<div class=\"shipments-cart-details-body\">\n\t\t<% view.model.get('lines').each(function (lines, index) { %>\n\t\t\t<%= shoppingCartItem(lines, view, {\n\t\t\t\tshowActions:false\n\t\t\t}) %>\n\t\t<% }) %>\n\t<\/div>\n<\/section>\n","wizard_tmpl":"<% if(!view.wizard.getCurrentStep().hideBreadcrumb){ %>\n\t<header class=\"order-wizard-layout-header\">\n\t<%= wizadStepNavigation(view.wizard.stepGroups) %>\n\t<\/header>\n<%}%>\n<div id=\"wizard-content\" class=\"wizard-content\"><\/div>","order_wizard_customtransactionfields_module_tmpl":"<div class=\"row-fluid\">\n\n\t<div class=\"span6 wizard-save-paper\">\n\n\t\t<h4 class=\"section-header\">\n\t\t\t<%=_('Save Paper! ').translate()%>\n\t\t<\/h4>\n\n\t\t<label class=\"send-by-email\">\n\t\t\t<span class=\"send-by-email-label\"><%= _('Please E-mail Me My Receipt').translate() %><\/span>\n\t\t\t<input type=\"checkbox\" value=\"\" id=\"send-by-email\" name=\"send-by-email\">\n\t\t<\/label>\n\n\t<\/div>\n\n<\/div>","wizard_module_tmpl":"<h2>Module Name<\/h2>","shopping_cart_tmpl":"<%\n\tvar lines = view.model.get('lines')\n\t,\trelated_items = view.model.getRelatedItems()\n\t,\thas_related_items = related_items && related_items.length\n\t,\tapplication = view.options.application\n\t,\tcontinueURL = application.getConfig('siteSettings.sitetype') === 'ADVANCED' ?  _(application.getConfig('defaultSearchUrl')).fixUrl() : ''\n\t,\tcrumbTrail = [\n\t\t\t{href: '\/', text: _('Home').translate(), 'data-touchpoint': 'continueshopping'}\n\t\t,\t{href: '\/cart', text: _('Shopping Cart').translate()}\n\t\t];\n%>\n\n<% if (lines && lines.length) { %>\n\t<div class=\"view-header\">\n\t\t<%= breadcrumb(crumbTrail) %>\n\t\t<header class=\"shopping-cart-header\">\n\t\t\t<a class=\"pull-right btn continue-shopping\" href=\"#\" data-touchpoint=\"continueshopping\" data-hashtag=\"#<%= continueURL %>\">\n\t\t\t\t<%= _('Continue Shopping').translate() %>\n\t\t\t<\/a>\n\t\t\t<h1 class=\"no-margin-top\"><%= view.page_header %><\/h1>\n\t\t<\/header>\n\t<\/div>\n\t<div class=\"row-fluid view-body\">\n\t\t<section class=\"span8\">\n\t\t\t<div class=\"shopping-cart\">\n\t\t\t\t<header class=\"shopping-cart-heading\">\n\t\t\t\t\t<div class=\"row-fluid\">\n\t\t\t\t\t\t<div class=\"span3 strong\"><%= _('Items').translate() %><\/div>\n\t\t\t\t\t\t<div class=\"span9\">\n\t\t\t\t\t\t\t<div class=\"span3 offset6 strong\"><%= _('Qty').translate() %><\/div>\n\t\t\t\t\t\t\t<div class=\"span3 strong\"><%= _('Subtotal').translate() %><\/div>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/header>\n\t\t\t\t<% lines.each(function (lines, index) { %>\n\t\t\t\t\t<%= shoppingCartItem(lines, view) %>\n\t\t\t\t<% }) %>\n\t\t\t<\/div>\n\t\t<\/section>\n\t\t<section class=\"span4\">\n\t\t\t<%= shoppingCartSummary(view.model, application.getConfig('siteSettings'), {\n\t\t\t\tcheckout: application.getConfig('siteSettings.checkout')\n\t\t\t,\tcontinueURL: continueURL\n\t\t\t,\tshowActions: true\n\t\t\t}) %>\n\t\t<\/section>\n\t<\/div>\n\t<div class=\"view-footer\">\n\t\t<%\n\t\t\tvar relatedWrap = function relatedWrap (item) {\n\t\t\t\treturn SC.macros.relatedItem(item, application);\n\t\t\t};\n\t\t%>\n\t\t<% if (has_related_items) { %>\n\t\t<aside class=\"shopping-cart-related-items\">\n\t\t\t<h3><%= _('You may also like').translate() %><\/h3>\n\t\t\t<div class=\"row-fluid\">\n\t\t\t\t<%= displayInRows(_.first(related_items, 6), relatedWrap, 6) %>\n\t\t\t<\/div>\n\t\t<\/aside>\n\t\t<% } %>\n\t\t<div class=\"row-fluid\" data-type=\"recently-viewed-placeholder\" data-macro=\"recentlyViewed\"><\/div>\n\t<\/div>\n\n<% } else { %>\n\t<div class=\"view-header\">\n\t\t<%= breadcrumb(crumbTrail) %>\n\t<\/div>\n\t<section class=\"view-body empty-cart\">\n\t\t<h2 class=\"no-margin-top\"><%= _('Your Shopping Cart is empty').translate() %><\/h2>\n\t\t<p class=\"no-margin-bottom\">\n\t\t\t<%= _('Continue Shopping on our $(0)').translate('<a href=\"\/\" data-touchpoint=\"home\">' + _('Home Page').translate() + '<\/a>') %>\n\t\t<\/p>\n\t<\/section>\n<% } %>","layout_tmpl":"<div id=\"layout\" class=\"layout\">\n\t\n\t\t<%= header(view) %>\n\n\t<!-- Main Content Area -->\n\t<div id=\"content\" class=\"container content checkout-content\"><\/div>\n\t<!-- \/ Main Content Area -->\n\t<%= footer(view) %>\n<\/div>","login_register_tmpl":"<header class=\"page-header login-header\">\n\t<h3><%= _('Sign In').translate() %><\/h3>\n<\/header>\n\n<div class=\"row login-body\">\n\t<div class=\"span6\" data-placeholder=\"Login\"><\/div>\n\n\t<div class=\"span6\">\n\t\t<% if (view.enableRegister) { %>\n\t\t\t<div class=\"new-customer\">\n\t\t\t\t<h3><%= _('New customer').translate() %><\/h3>\n\n\t\t\t\t<% if (view.enableCheckoutAsGuest) { %>\n\t\t\t\t\t<div class=\"\" data-placeholder=\"CheckoutAsGuest\"><\/div>\n\t\t\t\t<% } %>\n\n\t\t\t\t<div class=\"<% if (view.enableCheckoutAsGuest) { %>collapse <% } %>register\" data-placeholder=\"Register\"><\/div>\n\t\t\t<\/div>\n\t\t<% } %>\n\t<\/div>\n<\/div>","order_wizard_paymentmethod_giftcertificates_module_tmpl":"<% if (view.getTitle()) { %>\n\t<h3 class=\"section-header\">\n\t\t<%= view.getTitle() %>\n\t<\/h3>\n<% } %>\n<p class=\"collapsible collapsed section-header\"  data-toggle=\"collapse\" data-target=\"#gift-certificate-form\">\n\t<a href=\"#\">\n\t\t<% if (view.giftCertificates && view.giftCertificates.length) { %>\n\t\t\t<%=_('Add other Gift Certificate').translate() %>\n\t\t<% } else { %>\n\t\t\t<%=_('Pay with Gift Certificate').translate() %>\n\t\t<% } %>\n\t\t<i class=\"icon-plus-sign pull-right\"><\/i>\n\t\t<i class=\"icon-minus-sign pull-right\"><\/i>\n\t<\/a>\n<\/p>\n<div data-type=\"alert-placeholder-gif-certificate\"><\/div>\n<form id=\"gift-certificate-form\" class=\"collapse gift-certificate-form\">\n\t<fieldset>\n\t\t<div class=\"control-group\">\n\t\t\t<label class=\"strong\">\n\t\t\t\t<%= _('Gift Certificate Number').translate() %>\n\t\t\t<\/label>\n\t\t\t<div class=\"controls\">\n\t\t\t\t<input type=\"text\" class=\"input-medium\" name=\"code\">\n\n\t\t\t\t<button type=\"submit\" class=\"btn\">\n\t\t\t\t\t<%= _('Apply').translate() %>\n\t\t\t\t<\/button>\n\t\t\t<\/div>\n\t\t<\/div>\n\t<\/fieldset>\n<\/form>\n\n<% if (view.giftCertificates && view.giftCertificates.length) { %>\n<table class=\"table\">\n\t<tr>\n\t\t<td>\n\t\t\t<b><%= _('Gift Certicficate number').translate() %><\/b>\n\t\t<\/td>\n\t\t<td class=\"right-aligned\">\n\t\t\t<b><%= _('Amount applied').translate() %><\/b>\n\t\t<\/td>\t\n\t\t<\/td>\n\t\t<td class=\"right-aligned\">\n\t\t\t<b><%= _('Remaining balance').translate() %><\/b>\n\t\t<\/td>\t\n\t\t<td>\n\t\t\t&nbsp;\n\t\t<\/td>\n\t<\/tr>\n<%  _.each(view.giftCertificates, function (giftCertificate) { %>\n\t<% var giftcertificate = giftCertificate.get('giftcertificate') %>\n\t<tr>\n\t\t<td>\n\t\t\t<%= SC.macros.formatPaymentMethod(giftCertificate) %>\n\t\t<\/td>\n\t\t<td class=\"right-aligned\">\n\t\t\t<%= _('$(0)').translate(giftcertificate.amountapplied_formatted) %>\n\t\t<\/td>\n\t\t<td class=\"right-aligned\">\n\t\t\t<%= _('$(0)').translate(giftcertificate.amountremaining_formatted) %>\n\t\t<\/td>\t\t\n\t\t<td class=\"right-aligned\">\n\t\t\t<a href=\"#\" data-action=\"remove\" data-id=\"<%- giftcertificate.code %>\">\n\t\t\t\t<%= _('Remove').translate() %>\n\t\t\t<\/a>\n\t\t<\/td>\n\t<\/tr>\n<% }) %>\n<\/table>\n<% } %>","checkout_as_guest_tmpl":"<p>\n\t<%= _('Checkout as a guest and you will have an opportunity to create an account when you are finished.').translate() %>\n<\/p>\n\n<form class=\"register-guest-form\">\n\t<fieldset>\n\t\t<div class=\"form-actions register-guest-actions\">\n\t\t\t<button type=\"submit\" class=\"btn btn-primary btn-large\">\n\t\t\t\t<%= _('Checkout as a guest').translate() %>\n\t\t\t<\/button>\n\t\t<\/div>\n\t<\/fieldset>\n<\/form>\n\n<div class=\"collapse in register\">\n\t<%= _('Want to create an Account first?').translate() %>\n\t<a href=\"#\" class=\"btn-link\" data-toggle=\"collapse\" data-target=\".register\">\n\t\t<%= _('Register Now').translate() %>\n\t<\/a>\n<\/div>","order_wizard_registeremail_module_tmpl":"<h3 class=\"section-header\">\n\t<%= _('Enter Email Address').translate() %>\n<\/h3>\n<div class=\"control-group\">\n\t<label class=\"control-label\">\n\t\t<%= _('Email Address <small>(required)<\/small>').translate() %>\n\t<\/label>\n\t<input\n\t\ttype=\"email\"\n\t\tname=\"email\"\n\t\tid=\"email\"\n\t\tclass=\"input-large\"\n\t\tplaceholder=\"<%- _('your@email.com').translate() %>\"\n\t\tvalue=\"<%- view.profile.get('email') || '' %>\"\n\t>\n\t<p class=\"help-block\">\n\t\t<%= _('We need you email address to send you information about your order.').translate() %>\n\t<\/p>\n<\/div>\n<label class=\"checkbox\">\n\t<input\n\t\ttype=\"checkbox\"\n\t\tname=\"sign-up-newsletter\"\n\t\t<%= view.profile.get('emailsubscribe') === 'T' ? 'checked' : '' %>\n\t>\n\t<%= _('Sign up for our Newsletter to receive promotions').translate() %>\n<\/label>\n","order_wizard_confirmation_module_tmpl":"<div class=\"alert alert-block alert-success fade in\">\n\t<h4 class=\"alert-heading\"><%= _('Thank you for shopping with us!').translate() %><\/h4>\n\t<p style=\"margin-top:10px\"><%= _('Your order number is <big><strong>#$(0)<\/strong><\/big>.').translate(view.confirmationNumber) %><\/p>\n\t<p style=\"margin-top:10px\">If you purchased a digital download as part of your order please <a href=\"http:\/\/www.folkways.si.edu\/my-downloads\/smithsonian\">click here<\/a> to access your files. This link will also be sent to you via email. If you need help downloading please visit our <a href=\"http:\/\/www.folkways.si.edu\/download-support\/smithsonian\">Download Support<\/a> for more information and a tutorial.<p>\n<!--p style=\"margin-top:10px\">If you pre-ordered <a href=\"http:\/\/www.folkways.si.edu\/leadbelly\" target=\"_blank\"><i>Lead Belly: The Smithsonian Folkways Collection<\/i><\/a>, with or without a t-shirt and poster, your entire order will ship in February, 2015 by the shipping method you selected. Your pre-order includes an instant album download of <i>Lead Belly: The Smithsonian Folkways Collection<\/i>. Please <a href=\"http:\/\/www.folkways.si.edu\/my-downloads\/smithsonian\">click here<\/a> to access your downloads.<\/p-->\n\t<p style=\"margin-top:10px\">Please contact us at <a href=\"mailto:SmithsonianFolkways@SI.EDU\">SmithsonianFolkways@SI.EDU<\/a> with any questions.<\/p>\t\n\t<p style=\"margin-top:10px\">\n\t\t<a class=\"btn btn-success\" href=\"\/\" data-touchpoint=\"continueshopping\" data-hashtag=\"#\/\"><%= _('Continue shopping').translate() %><\/a>\n\t<\/p>\n<\/div>","address_tmpl":"<% var model = view.model || new Backbone.Model(); %>\n<% if (!view.inModal) { %>\n\t<h1 class=\"\">\n\t\t<%= model.isNew() ? _('Add a new Address').translate() : _('Update Address').translate() %>\n\t<\/h1>\n\n\t<a href=\"\/\" class=\"back-btn\">\n\t\t<%= _('&lt; Back to Account').translate() %>\n\t<\/a>\n\n\t<hr class=\"divider-small\">\n\t<% if (!view.collection.length) { %>\n\t\t<p>\n\t\t\t<b><%= _('We have no address on file for this account.').translate() %><\/b><br>\n\t\t\t<%= _('For faster checkouts, please enter a shipping address bellow').translate() %>\n\t\t<\/p>\n\t\t<hr class=\"divider-small\">\n\t<% } %>\n<% } %>\n\n<form class=\"\" action=\"addressbook.ss\" method=\"POST\">\n<% if (view.inModal) { %>\n\t<div class=\"modal-body\">\n<% } %>\n\n<%= addressFrom(model, {\n\tcountries: view.options.application.getConfig('siteSettings.countries')\n,\thideDefaults: true\n}) %>\n\n<% if (view.inModal) { %>\n\t<\/div>\n<% } %>\n\t<div class=\"<%- view.inModal ? 'modal-footer' : 'form-actions' %>\">\n\t\t<button type=\"submit\" class=\"btn btn-primary\">\n\t\t\t<%= model.isNew() ? _('Save Address').translate() : _('Update Address').translate() %>\n\t\t<\/button>\n\n\t\t<% if (view.inModal || view.collection.length) { %>\n\t\t\t<a class=\"btn btn-link\" data-dismiss=\"modal\">\n\t\t\t\t<%= _('Cancel').translate() %>\n\t\t\t<\/a>\n\t\t<% } %>\n\n\t\t<% if (!view.inModal) { %>\n\t\t\t<button type=\"reset\" class=\"btn btn-link hide\" data-action=\"reset\">\n\t\t\t\t<%= _('Reset').translate() %>\n\t\t\t<\/button>\n\t\t<% } %>\n\t<\/div>\n<\/form>","product_details_tmpl":"<div class=\"view-header\">\n\t<%= breadcrumb(view.model.get('_breadcrumb')) %>\n\t<div id=\"banner-content-top\" class=\"content-banner banner-content-top\"><\/div>\n<\/div>\n<div itemscope itemtype=\"http:\/\/schema.org\/Product\" class=\"view-body\">\n\t<div id=\"banner-details-top\" class=\"content-banner banner-details-top\"><\/div>\n\t<div class=\"row-fluid item-detailed-page\">\n\t\t<div class=\"span7 item-detailed-image-container\">\n\t\t\t<div id=\"banner-image-top\" class=\"content-banner banner-image-top\"><\/div>\n\t\t\t<%= SC.macros[view.application.getConfig('macros.itemDetailsImage')](view.model.get('_images', true), view) %>\n\t\t\t<div id=\"banner-image-bottom\" class=\"content-banner banner-image-bottom\"><\/div>\n\t\t<\/div>\n\t\t<div class=\"span5\">\n\t\t\t<div class=\"well item-detailed-info\">\n\t\t\t\t<div class=\"well-header page-header\">\n\t\t\t\t\t<div id=\"banner-summary-bottom\" class=\"content-banner banner-summary-bottom\"><\/div>\n\t\t\t\t\t<h1 data-type=\"social-description\">\n\t\t\t\t\t\t<%= view.model.get('_pageHeader') %>\n\t\t\t\t\t<\/h1>\n\t\t\t\t\t<p itemprop=\"offers\" itemscope itemtype=\"http:\/\/schema.org\/Offer\" class=\"lead lead-small\">\n\t\t\t\t\t\t<%= showItemPrice(view.model) %>\n\t\t\t\t\t<\/p>\n\t\t\t\t\t<span class=\"pull-right\">\n\t\t\t\t\t\t<%= _('SKU: #$(0)').translate(view.model.get('_sku')) %>\n\t\t\t\t\t<\/span>\n\t\t\t\t\t<meta itemprop=\"sku\" content=\"<%= view.model.get('_sku')%>\" \/>\n\t\t\t\t\t<div itemprop=\"aggregateRating\" itemscope itemtype=\"http:\/\/schema.org\/AggregateRating\" class=\"item-rating\">\n\t\t\t\t\t\t<%= starRating({\n\t\t\t\t\t\t\tmax: view.options.application.getConfig('productReviews.maxRate')\n\t\t\t\t\t\t,\tvalue: view.model.get('_rating')\n\t\t\t\t\t\t,\tclassName: 'star pull-left'\n\t\t\t\t\t\t,\tfillRounded: true\n\t\t\t\t\t\t}) %>\n\t\t\t\t\t\t<span class=\"review-total\">\n\t\t\t\t\t\t\t<%= _('($(0))').translate(view.model.get('_ratingsCount')) %>\n\t\t\t\t\t\t<\/span>\n\t\t\t\t\t\t<meta itemprop=\"reviewCount\" content=\"<%= view.model.get('_ratingsCount') %>\" \/>\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t\t<div class=\"well-body\">\n\t\t\t\t\t<% if (!view.model.isProperlyConfigured()) { %>\n\t\t\t\t\t\t<div class=\"alert alert-error\">\n\t\t\t\t\t\t\t<%= _('<b>Warning<\/b>: This item is not properly configured, please contact your administrator.').translate() %>\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t<% } else { \n\t\t\t\t\t\t\/*\n\t\t\t\t\t\tRender a single option placeholder:\n\t\t\t\t\t\t===================================\n\t\t\t\t\t\tAny HTML element that matches [data-type=option], if it's rendered by ItemDetails.View \n\t\t\t\t\t\twill be populated by the render of a single macro for a single option, especified by the attributes:\n\t\t\t\t\t\t\tdata-cart-option-id: the id of the cart opion\n\t\t\t\t\t\t\tdata-macro: the macro you want this option to be rendered with, if omited the default for the option will be used\n\t\t\t\t\t\t\n\t\t\t\t\t\t<div \n\t\t\t\t\t\t\tclass=\"options-container\" \n\t\t\t\t\t\t\tdata-type=\"option\" \n\t\t\t\t\t\t\tdata-cart-option-id=\"cart_option_id\" \n\t\t\t\t\t\t\tdata-macro=\"macroName\">\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\n\t\t\t\t\t\tRender all options placeholder:\n\t\t\t\t\t\t===============================\n\t\t\t\t\t\tAny HTML element that matches [data-type=all-options], if it's rendered by ItemDetails.View \n\t\t\t\t\t\twill be populated with the result of the execution of all the options with the macros, \n\t\t\t\t\t\teither the default one or the one configured in the itemOptions array.\n\t\t\t\t\t\tUse the data-exclude-options to select the options you dont want to be rendered here,\n\t\t\t\t\t\tthis is a coma separated list, for instace: cart_option_id1, cart_option_id2\n\t\t\t\t\t\t*\/\n\t\t\t\t\t%>\n\t\t\t\t\t\t<div \n\t\t\t\t\t\t\tid=\"default-options-container\" \n\t\t\t\t\t\t\tclass=\"options-container default-options-container\" \n\t\t\t\t\t\t\tdata-type=\"all-options\" \n\t\t\t\t\t\t\tdata-exclude-options=\"\">\n\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t<form action=\"#\" class=\"form-inline add-to-cart-form\">\n\t\t\t\t\t\t\t<% if (view.model.get('_itemType') !== 'GiftCert'){ %>\n\t\t\t\t\t\t\t\t<label for=\"quantity\">\n\t\t\t\t\t\t\t\t\t<%= view.model.get('_minimumQuantity') !== 1 ? _('Quantity (Minimum of $(0) required)').translate(view.model.get('_minimumQuantity')) : _('Quantity').translate() %>\n\t\t\t\t\t\t\t\t<\/label>\n\t\t\t\t\t\t\t\t<div class=\"control-group\">\n\t\t\t\t\t\t\t\t\t<input type=\"number\" name=\"quantity\" id=\"quantity\" class=\"input-mini quantity\" value=\"<%= view.model.get('quantity') %>\" min=\"1\">\n\t\t\t\t\t\t\t<% } else { %>\n\t\t\t\t\t\t\t\t<div class=\"control-group\">\n\t\t\t\t\t\t\t\t\t<input type=\"hidden\" name=\"quantity\" id=\"quantity\" value=\"1\">\n\t\t\t\t\t\t\t<% } %>\n\t\t\t\t\t\t\t\t<%= itemDetailsStock(view.model.getStockInfo()) %>\n\t\t\t\t\t\t\t<\/div>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<div data-type=\"alert-placeholder\"><\/div>\n\t\t\t\t\t\t\t<button data-type=\"add-to-cart\" class=\"btn btn-primary btn-large add-to-cart-btn\"<% if (!view.model.isReadyForCart()) {%> disabled<%}%>>\n\t\t\t\t\t\t\t\t<i class=\"icon-shopping-cart icon-white\"><\/i>\n\t\t\t\t\t\t\t\t<%= _('Add to Cart').translate() %>\n\t\t\t\t\t\t\t<\/button>\n\t\t\t\t\t\t<\/form>\n\t\t\t\t\t<% } %>\n\t\t\t\t<\/div>\n\t\t\t\t<div class=\"well-footer\">\n\t\t\t\t\t<div class=\"social-share-icons\" data-toggle=\"social-share-icons\"><\/div>\n\t\t\t\t\t<div id=\"banner-summary-bottom\" class=\"content-banner banner-summary-bottom\"><\/div>\n\t\t\t\t<\/div>\n\t\t\t<\/div>\n\t\t<\/div>\n\t\t<div id=\"banner-details-bottom\" class=\"content-banner banner-details-bottom\"><\/div>\n\t<\/div>\n\t\n\t<% if (view.details && view.details.length) { %>\n\t\t<div id=\"banner-content-top\" class=\"content-banner banner-content-top\"><\/div>\n\t\t<div class=\"accordion\">\n\t\t\t<% _.each(view.details, function (detail, index) { %>\n\t\t\t<div id=\"accordion-group-<%= index %>\" class=\"accordion-group accordion-group-<%= index %>\">\n\t\t\t\t<div class=\"accordion-heading\">\n\t\t\t\t\t<h4 class=\"accordion-toggle <%= !detail.opened ? 'collapsed' : '' %>\" data-toggle=\"collapse\" data-target=\"#collapsed-<%= index %>\">\n\t\t\t\t\t\t<%= detail.name %>\n\t\t\t\t\t\t<i class=\"icon-minus-sign pull-right\"><\/i>\n\t\t\t\t\t\t<i class=\"icon-plus-sign pull-right\"><\/i>\n\t\t\t\t\t<\/h4>\n\t\t\t\t<\/div>\n\t\t\t\t<div id=\"collapsed-<%= index %>\" class=\"accordion-body collapse collapsed-<%= index %> <%= detail.opened ? 'in' : '' %>\">\n\t\t\t\t\t<div class=\"accordion-inner\">\n\t\t\t\t\t\t<%= detail.content %>\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\t\t\t<\/div>\t\t\t\n\t\t\t<% }) %>\n\t\t<\/div>\n\t\t<div id=\"banner-content-bottom\" class=\"content-banner banner-content-bottom\"><\/div>\n\t<% } %>\n\t\n\t<div data-type=\"review-list-placeholder\" data-itemid=\"<%= view.model.get('_id') %>\" data-url=\"<%= view.model.get('urlcomponent') %>\" data-order=\"useful_count:desc\" data-title=\"<%= _('Ratings &amp; Reviews').translate() %>\" data-subtitle=\"<%= _('Most Helpful Reviews').translate() %>\"><\/div>\n\t<div id=\"banner-details-bottom\" class=\"content-banner banner-details-bottom\"><\/div>\n<\/div>","order_wizard_paymentmethod_paypal_module_tmpl":"<div class=\"row-fluid\">\n\t<div class=\"span4\">\n\t\t<img class=\"paypal-logo\" src=\"img\/paypal.png\" alt=\"PayPal\">\n\t<\/div>\n\t<div class=\"span8\">\n\n\t\t<% if (view.model.get('isPaypalComplete')) { %>\n\t\t\t<p>\n\t\t\t\t<%= _('You have selected to pay using PayPal as your payment method.').translate() %>\n\t\t\t<\/p>\n\t\t\t<p>\n\t\t\t\t<%= _('To review your order, click the \"Continue\" button below.').translate() %>\n\t\t\t<\/p>\n\t\t<% } else { %>\n\t\t\t<p>\n\t\t\t\t<%= _('Please select the \"Continue To PayPal\" button below to sign in into your PayPal account.').translate() %>\n\t\t\t<\/p>\n\t\t\t<p>\n\t\t\t\t<%= _('You will be redirected to PayPal, but will have an opportunity to review your order back on our site before purchasing.').translate() %>\n\t\t\t<\/p>\n\t\t<% } %>\n\t<\/div>\n<\/div>","iframe_tmpl":"<iframe src=\"<%- view.src %>\"><\/iframe>","order_wizard_showpayments_module_tmpl":"<div class=\"row-fluid\">\n\t<div class=\"span6 wizard-showpayments-billing-address\">\n\t\t<h4 class=\"section-header\">\n\t\t\t<%=_('Billing Address').translate()%>\n\t\t<\/h4>\n\n\t\t<%= address(view.profile.get('addresses').get(view.model.get('billaddress')), {\n\t\t\thideActions: true\n\t\t,\thideDefaults: true\n\t\t}) %>\n\n\t\t<% if (view.options.edit_url_address) { %>\n\t\t\t<a class=\"\" href=\"<%- view.options.edit_url_address %>?force=true\">\n\t\t\t\t<%= _('Edit').translate() %>\n\t\t\t<\/a>\n\t\t<% } %>\n\t<\/div>\n\t<% var giftcertificates = view.getGiftCertificates() %>\n\t<% var paymentmethods = view.getPaymentmethods() %>\n\t<div class=\"span6 wizard-showpayments-billing-payment-method\">\n\t\t<% if (giftcertificates.length || paymentmethods.length || !view.wizard.hidePayment()) {%>\n\t\t\t<h4 class=\"section-header\">\n\t\t\t\t<%= _('Payment Type').translate() %>\n\t\t\t<\/h4>\n\n\t\t\t<div class=\"payment-methods-summary\">\t\t\n\n\t\t\t\t<% _.each(paymentmethods, function (paymentmethod) { %>\n\t\t\t\t\t<%= SC.macros.formatPaymentMethod(paymentmethod, view.wizard.application.getConfig('creditCardIcons')) %>\n\t\t\t\t<% }); %>\n\n\t\t\t\t<% if (giftcertificates.length) { %>\n\t\t\t\t\t<br>\n\t\t\t\t\t<b><%= _('Gift Certificates').translate() %><\/b><br>\n\t\t\t\t\t<% _.each(giftcertificates, function (paymentmethod) { %>\n\t\t\t\t\t\t<%= SC.macros.formatPaymentMethod(paymentmethod) %>\n\t\t\t\t\t\t<br>\n\t\t\t\t\t<% }); %>\n\t\t\t\t<% } %>\n\t\t\t\t<% if (view.profile.get('isGuest') === 'T') { %>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h5><%- view.profile.get('email') %><\/h5>\n\t\t\t\t\t<\/div>\n\t\t\t\t<% } %>\n\t\t\t<\/div>\n\n\t\t\t<% if (view.options.edit_url_billing) { %>\n\t\t\t\t<a class=\"\" href=\"<%- view.options.edit_url_billing %>?force=true\">\n\t\t\t\t\t<%= _('Edit').translate() %>\n\t\t\t\t<\/a>\n\t\t\t<% } %>\n\t\t<% } %>\n\t<\/div>\n\n<\/div>","order_wizard_paymentmethod_creditcard_module_tmpl":"<% var view_credit_card = view.creditcard %>\n\n<% if (view_credit_card && !view_credit_card.isNew()) { %>\n<div class=\"credit-card-selected\">\n\t<%= creditcard(view_credit_card, {\n\t\tshowSecurityCodeForm: view.requireccsecuritycode\n\t,\tsecurityNumberError: view.isSecurityNumberInvalid && view.securityNumberErrorMessage\n\t,\ticons: view.wizard.application.getConfig('creditCardIcons')\n\t,\tccsecuritycode: view.ccsecuritycode\n\t}) %>\n\t<div class=\"actions\">\n\t\t<a class=\"btn btn-link\" href=\"\/creditcards\/<%= view_credit_card.get('internalid') %>\" data-toggle=\"show-in-modal\">\n\t\t\t<%= _('Edit Card').translate() %>\n\t\t<\/a>\n\t\t| \n\t\t<a href=\"#\" class=\"btn btn-link\" data-action=\"change-creditcard\">\n\t\t\t<%= _('Change Card').translate() %>\n\t\t<\/a>\n\t<\/div>\n<\/div>\n<% } %>\n\n<% if (view.creditcards.length >= 1 && !view_credit_card) { %>\n\t<div id=\"creditcard-module-list-placeholder\" class=\"creditcard-module-list-placeholder\">\n\t\t<p>\n\t\t\t<a class=\"btn btn-link\" href=\"\/creditcards\/new\" data-toggle=\"show-in-modal\">\n\t\t\t\t<%= _('Add New Credit Card').translate() %>\n\t\t\t<\/a>\n\t\t<\/p>\n\t\t<%\n\t\t\tvar creditcardWrap = function (creditcard) {\n\t\t\t\treturn SC.macros.creditcard(creditcard, {\n\t\t\t\t\tshowSelect: true\n\t\t\t\t,\tshowActions: true\n\t\t\t\t,\tshowDefaults: false\n\t\t\t\t,\tselectMessage: view.selectMessage\n\t\t\t\t,\ticons: view.wizard.application.getConfig('creditCardIcons')\n\t\t\t\t});\n\t\t\t} \n\t\t%>\n\t\t<%= displayInRows(view.creditcards.models, creditcardWrap, view.wizard.application.getConfig('itemsPerRow', 2)) %>\n\t<\/div>\n<% } else if (view.creditcards.length === 0) { %>\n\t<div id=\"creditcard-module-form-placeholder\">\n\t\t<form>\n\t\t\t<% var date = new Date(); %>\n\t\t\t<%= creditcardForm(view_credit_card, {\n\t\t\t\tapplication: view.wizard.application\n\t\t\t,\tmonths: _.range(1, 13)\n\t\t\t,\tyears: _.range(date.getFullYear(), date.getFullYear() + 25)\n\t\t\t,   currentMonth: date.getMonth() + 1\n\t\t\t,\tshowDefaults: false\n\t\t\t,\tshowSecurityCodeForm: view.requireccsecuritycode\n\t\t\t}) %>\n\t\t<\/form>\n\t<\/div>\n<% } %>","page_not_found_tmpl":"<div class=\"view-header\">\n\t<% if (view.page_header) { %>\n\t<h1><%= view.page_header %><\/h1>\n\t<% } %>\n\t<div id=\"main-banner\" class=\"main-banner\"><\/div>\n<\/div>\n<div id=\"page-not-found-content\" class=\"view-body page-not-found-content\">\n\t<%= _('Sorry, we could not load the content you requested.').translate() %>\n<\/div>","forgot_password_tmpl":"<header class=\"page-header login-header\">\n\t<h3>\n\t\t<%= _('Sign In').translate() %>\n\t<\/h3>\n<\/header>\n\n<div class=\"row-fluid\">\n\t<div class=\"offset2 span10\">\n\t\t<h3>\n\t\t\t<%= _('Reset Password').translate() %>\n\t\t<\/h3>\n\n\t\t<form class=\"forgot-password-form\">\n\t\t\t<p>\n\t\t\t\t<%= _('Enter your email below and we\\'ll send you a link to reset your password.').translate() %>\n\t\t\t<\/p>\n\n\t\t\t<fieldset>\n\t\t\t\t<div data-type=\"alert-placeholder\"><\/div>\n\n\t\t\t\t<div class=\"control-group\">\n\t\t\t\t\t<label class=\"control-label\" for=\"email\">\n\t\t\t\t\t\t<%= _('Email Address <small>(required)<\/small>').translate() %>\n\t\t\t\t\t<\/label>\n\t\t\t\t\t<div class=\"controls\">\n\t\t\t\t\t\t<input type=\"text\" name=\"email\" id=\"email\" class=\"input-xlarge\" placeholder=\"<%- _('your@email.com').translate() %>\">\n\t\t\t\t\t<\/div>\n\t\t\t\t<\/div>\n\n\t\t\t\t<button type=\"submit\" class=\"btn btn-primary btn-large\">\n\t\t\t\t\t<%=_('Send Email').translate()%>\n\t\t\t\t<\/button>\n\t\t\t<\/fieldset>\n\t\t<\/form>\n\n\t\t<a href=\"\/login-register\" class=\"btn btn-link\" data-target=\".register\">\n\t\t\t<%= _('Sign In Now >').translate()%>\n\t\t<\/a>\n\t<\/div>\n<\/div>"};